<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>线性代数课件 - 线性方程组</title>
    
    <!-- MathJax for LaTeX Math Rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        :root {
            /* 浅色主题变量 */
            --primary-gradient-start: #667eea;
            --primary-gradient-end: #764ba2;
            --bg-gradient-start: #667eea;
            --bg-gradient-end: #764ba2;
            --main-bg: white;
            --text-color: #333;
            --text-color-light: #6c757d;
            --nav-bg: #f8f9fa;
            --nav-border: #e9ecef;
            --button-border: #667eea;
            --button-text: #667eea;
            --button-hover-bg: #667eea;
            --button-hover-text: white;
            --concept-gradient-start: #f5f7fa;
            --concept-gradient-end: #c3cfe2;
            --definition-bg: white;
            --definition-border: #667eea;
            --theorem-bg: #fffbf0;
            --theorem-border: #ffd700;
            --example-bg: #f0f8ff;
            --example-border: #4169e1;
            --formula-bg: #f8f9fa;
            --formula-border: #dee2e6;
            --graph-bg: white;
            --interactive-gradient-start: #e0c3fc;
            --interactive-gradient-end: #8ec5fc;
            --exercise-bg: #fff5f5;
            --exercise-border: #ff6b6b;
            --tip-bg: #d4edda;
            --tip-border: #c3e6cb;
            --animation-bg: #f8f9fa;
            --canvas-axes: #333;
            --shadow-color: rgba(0,0,0,0.3);
            --shadow-light: rgba(0,0,0,0.1);
            --shadow-lighter: rgba(0,0,0,0.05);
        }

        [data-theme="dark"] {
            /* 深色主题变量 */
            --primary-gradient-start: #8b9ef3;
            --primary-gradient-end: #9d6fc9;
            --bg-gradient-start: #1a1a2e;
            --bg-gradient-end: #0f0f1e;
            --main-bg: #1e1e2e;
            --text-color: #e0e0e0;
            --text-color-light: #a0a0a0;
            --nav-bg: #2a2a3e;
            --nav-border: #3a3a4e;
            --button-border: #8b9ef3;
            --button-text: #8b9ef3;
            --button-hover-bg: #8b9ef3;
            --button-hover-text: #1e1e2e;
            --concept-gradient-start: #2a2a3e;
            --concept-gradient-end: #323248;
            --definition-bg: #2a2a3e;
            --definition-border: #8b9ef3;
            --theorem-bg: #3a3a2e;
            --theorem-border: #ffd700;
            --example-bg: #2a2e3a;
            --example-border: #6189f1;
            --formula-bg: #2a2a3e;
            --formula-border: #3a3a4e;
            --graph-bg: #2a2a3e;
            --interactive-gradient-start: #3a2e4a;
            --interactive-gradient-end: #2e3a4a;
            --exercise-bg: #3a2a2a;
            --exercise-border: #ff8b8b;
            --tip-bg: #2a3a2e;
            --tip-border: #4a5a4e;
            --animation-bg: #2a2a3e;
            --canvas-axes: #e0e0e0;
            --shadow-color: rgba(0,0,0,0.5);
            --shadow-light: rgba(0,0,0,0.3);
            --shadow-lighter: rgba(0,0,0,0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', 'Helvetica Neue', 'Source Han Sans CN', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            min-height: 100vh;
            padding: 20px;
            scroll-behavior: smooth;
            overflow-x: hidden;
            position: relative;
        }
        
        /* 现代化背景动效 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundFloat 20s ease-in-out infinite;
        }
        
        @keyframes backgroundFloat {
            0%, 100% { 
                transform: scale(1) rotate(0deg);
                opacity: 0.5;
            }
            33% { 
                transform: scale(1.1) rotate(5deg);
                opacity: 0.8;
            }
            66% { 
                transform: scale(0.9) rotate(-5deg);
                opacity: 0.3;
            }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--main-bg);
            border-radius: 20px;
            box-shadow: 
                0 20px 60px var(--shadow-color),
                0 8px 25px var(--shadow-light),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* 现代化容器顶部装饰 */
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                #667eea 0%, 
                #764ba2 25%, 
                #f093fb 50%, 
                #f5576c 75%, 
                #667eea 100%);
            background-size: 300% 100%;
            animation: gradientShift 4s ease-in-out infinite;
            z-index: 10;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-gradient-start) 0%, var(--primary-gradient-end) 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* 主题切换按钮 */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50px;
            padding: 10px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            color: white;
            font-size: 16px;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .theme-icon {
            font-size: 20px;
            transition: transform 0.3s;
        }

        .theme-toggle:hover .theme-icon {
            transform: rotate(20deg);
        }
        
        nav {
            background: var(--nav-bg);
            padding: 20px 40px;
            border-bottom: 2px solid var(--nav-border);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        nav button {
            padding: 10px 20px;
            background: var(--main-bg);
            border: 2px solid var(--button-border);
            border-radius: 25px;
            color: var(--button-text);
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        nav button:hover, nav button.active {
            background: var(--button-hover-bg);
            color: var(--button-hover-text);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }
        
        main {
            padding: 40px;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .concept-box {
            background: linear-gradient(135deg, var(--concept-gradient-start) 0%, var(--concept-gradient-end) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 15px var(--shadow-light);
        }
        
        .concept-box h2 {
            color: var(--button-border);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .definition {
            background: var(--definition-bg);
            border-left: 5px solid var(--definition-border);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 10px var(--shadow-lighter);
        }
        
        .definition h3 {
            color: var(--definition-border);
            margin-bottom: 10px;
        }
        
        .theorem {
            background: var(--theorem-bg);
            border: 2px solid var(--theorem-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .theorem::before {
            content: "定理";
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--theorem-border);
            color: #333;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .example {
            background: var(--example-bg);
            border: 2px solid var(--example-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .example::before {
            content: "例题";
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--example-border);
            color: white;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .formula {
            background: var(--formula-bg);
            border: 1px solid var(--formula-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            max-width: 100%;
        }
        
        /* 现代化公式样式 */
        .modern-formula {
            background: linear-gradient(135deg, var(--formula-bg) 0%, rgba(102, 126, 234, 0.05) 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }
        
        .modern-formula:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
            border-color: rgba(102, 126, 234, 0.4);
        }
        
        .modern-formula::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .modern-formula:hover::before {
            left: 100%;
        }
        
        /* 现代化问题场景样式 */
        .problem-scenario {
            background: linear-gradient(135deg, #f8f9ff 0%, #e8f2ff 100%);
            border: 1px solid rgba(65, 105, 225, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            position: relative;
        }
        
        .problem-scenario ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .problem-scenario li {
            margin: 8px 0;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .question-mark {
            background: linear-gradient(135deg, #ff9a56 0%, #ff6b56 100%);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
            text-align: center;
        }
        
        /* 现代化解类型样式 */
        .solution-types {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }
        
        .solution-type {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .solution-type:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .solution-type.no-solution {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-left: 4px solid #f44336;
        }
        
        .solution-type.unique {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            border-left: 4px solid #4caf50;
        }
        
        .solution-type.infinite {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 4px solid #2196f3;
        }
        
        .solution-type .icon {
            font-size: 24px;
            min-width: 40px;
        }
        
        .solution-type div p {
            margin: 5px 0 0 0;
            color: #666;
            font-size: 0.9em;
        }
        
        /* 现代化提示样式 */
        .modern-tip {
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
            border: 1px solid rgba(33, 150, 243, 0.2);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .tip-header {
            background: linear-gradient(135deg, #2196f3 0%, #21cbf3 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }
        
        .tip-icon {
            font-size: 20px;
        }
        
        .modern-tip p {
            padding: 20px;
            margin: 0;
            line-height: 1.6;
        }
        
        /* 现代化按钮样式 */
        .modern-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .modern-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .modern-button:active {
            transform: translateY(0);
        }
        
        .modern-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .modern-button:hover::before {
            left: 100%;
        }
        
        /* 响应式设计优化 */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 15px;
                padding: 15px;
                margin-top: 10px;
                margin-bottom: 10px;
            }
            
            header {
                padding: 20px 15px;
                text-align: center;
            }
            
            header h1 {
                font-size: 24px;
                margin-bottom: 10px;
            }
            
            header p {
                font-size: 14px;
            }
            

            
            .section {
                padding: 15px;
            }
            
            .concept-box,
            .definition,
            .theorem,
            .example,
            .tip,
            .modern-tip,
            .modern-card {
                padding: 15px;
                margin: 15px 0;
            }
            
            .formula,
            .modern-formula {
                padding: 15px;
                font-size: 1em;
            }
            
            .solution-types {
                gap: 10px;
            }
            
            .solution-type {
                padding: 12px;
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }
            
            .solution-type .icon {
                font-size: 20px;
            }
            
            .problem-scenario {
                padding: 15px;
            }
            
            .question-mark {
                padding: 8px 12px;
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 10px;
                margin: 5px;
                border-radius: 10px;
            }
            
            header {
                padding: 15px 10px;
            }
            
            header h1 {
                font-size: 20px;
            }
            

            
            .section {
                padding: 10px;
            }
            
            .concept-box h2,
            .definition h3,
            .theorem h3,
            .example h3 {
                font-size: 18px;
            }
            
            .formula,
            .modern-formula {
                padding: 10px;
                font-size: 0.9em;
            }
            
            .modern-button {
                padding: 10px 20px;
                font-size: 12px;
            }
        }
        
        /* 现代化滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
        }
        
        /* 现代化选择文本样式 */
        ::selection {
            background: rgba(102, 126, 234, 0.3);
            color: #333;
        }
        
        ::-moz-selection {
            background: rgba(102, 126, 234, 0.3);
            color: #333;
        }
        
        /* 现代化加载动画 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: white;
            font-size: 18px;
            font-weight: 600;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* 现代化进度条 */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            z-index: 10000;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
        
        /* 性能优化 - 减少重绘和回流 */
        .section {
            will-change: transform, opacity;
            transform: translateZ(0);
        }
        
        .modern-formula,
        .modern-card,
        .solution-type {
            will-change: transform;
            transform: translateZ(0);
        }
        
        /* 淡入动画 */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 滑入动画 */
        .slide-in-left {
            animation: slideInLeft 0.6s ease-out;
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .slide-in-right {
            animation: slideInRight 0.6s ease-out;
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .formula::-webkit-scrollbar {
            height: 8px;
        }

        .formula::-webkit-scrollbar-track {
            background: var(--formula-border);
            border-radius: 4px;
        }

        .formula::-webkit-scrollbar-thumb {
            background: var(--button-border);
            border-radius: 4px;
        }

        .formula::-webkit-scrollbar-thumb:hover {
            background: var(--primary-gradient-end);
        }

        .formula {
            scrollbar-width: thin;
            scrollbar-color: var(--button-border) var(--formula-border);
        }

        .formula mjx-container {
            display: inline-block !important;
            max-width: none !important;
        }
        
        .graph-container {
            background: var(--graph-bg);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px var(--shadow-light);
        }
        
        .graph-container h3 {
            color: var(--button-border);
            margin-bottom: 20px;
            text-align: center;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        
        .interactive-demo {
            background: linear-gradient(135deg, var(--interactive-gradient-start) 0%, var(--interactive-gradient-end) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }
        
        .interactive-demo h3 {
            color: var(--text-color);
            margin-bottom: 20px;
        }
        
        .slider-container {
            margin: 20px 0;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--text-color);
        }
        
        .slider-container input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background: var(--formula-border);
            border-radius: 5px;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--button-border);
            border-radius: 50%;
            cursor: pointer;
        }
        
        .slider-value {
            display: inline-block;
            background: var(--button-border);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin-left: 10px;
        }
        
        .exercise {
            background: var(--exercise-bg);
            border: 2px solid var(--exercise-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h3 {
            color: var(--exercise-border);
            margin-bottom: 15px;
        }
        
        .exercise ol {
            margin-left: 20px;
        }
        
        .exercise li {
            margin: 10px 0;
        }

        /* 交互式练习题样式 */
        .exercise-status {
            background: linear-gradient(135deg, var(--concept-gradient-start) 0%, var(--concept-gradient-end) 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .score-display {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--button-border);
        }

        .score-value {
            color: var(--exercise-border);
            font-size: 1.8em;
        }

        .progress-bar {
            width: 200px;
            height: 20px;
            background: var(--formula-bg);
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid var(--button-border);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--button-border), var(--primary-gradient-end));
            width: 0%;
            transition: width 0.5s ease;
        }

        .interactive-question {
            background: var(--main-bg);
            border: 2px solid var(--button-border);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 5px 15px var(--shadow-light);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .interactive-question:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow-light);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--nav-border);
        }

        .question-header h3 {
            color: var(--button-border);
            font-size: 1.3em;
            margin: 0;
        }

        .question-score {
            background: var(--formula-bg);
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid var(--formula-border);
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-score.correct {
            background: var(--tip-bg);
            border-color: var(--tip-border);
            color: #155724;
        }

        .question-score.incorrect {
            background: var(--exercise-bg);
            border-color: var(--exercise-border);
            color: #721c24;
        }

        .question-score.partial {
            background: #fff3cd;
            border-color: #ffeaa7;
            color: #856404;
        }

        .sub-question {
            margin: 20px 0;
            padding: 15px;
            background: var(--formula-bg);
            border-radius: 10px;
            border-left: 4px solid var(--button-border);
        }

        .answer-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .answer-input label {
            font-weight: bold;
            color: var(--text-color);
            min-width: 80px;
        }

        .answer-input input[type="text"] {
            flex: 1;
            min-width: 250px;
            padding: 10px 15px;
            border: 2px solid var(--formula-border);
            border-radius: 25px;
            font-size: 1em;
            background: var(--main-bg);
            color: var(--text-color);
            transition: border-color 0.3s;
        }

        .answer-input input[type="text"]:focus {
            outline: none;
            border-color: var(--button-border);
            box-shadow: 0 0 10px rgba(102,126,234,0.2);
        }

        .answer-input input[type="text"].correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .answer-input input[type="text"].incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .check-btn {
            padding: 10px 20px;
            background: var(--button-border);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .check-btn:hover {
            background: var(--primary-gradient-end);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }

        .check-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }

        .answer-options label {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: var(--formula-bg);
            border: 2px solid var(--formula-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .answer-options label:hover {
            background: var(--concept-gradient-start);
            border-color: var(--button-border);
        }

        .answer-options input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .answer-options label.correct {
            background: var(--tip-bg);
            border-color: var(--tip-border);
        }

        .answer-options label.incorrect {
            background: var(--exercise-bg);
            border-color: var(--exercise-border);
        }

        .feedback {
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.95em;
            display: none;
            animation: slideIn 0.3s ease;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: var(--tip-bg);
            border: 2px solid var(--tip-border);
            color: #155724;
        }

        .feedback.incorrect {
            background: var(--exercise-bg);
            border: 2px solid var(--exercise-border);
            color: #721c24;
        }

        .feedback.partial {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            color: #856404;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hint-section {
            background: var(--animation-bg);
            border: 2px solid var(--nav-border);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }

        .proof-steps {
            background: var(--concept-gradient-start);
            border: 2px solid var(--concept-gradient-end);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .exercise-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .reset-btn, .hint-btn {
            padding: 12px 25px;
            border: 2px solid var(--button-border);
            border-radius: 25px;
            background: var(--main-bg);
            color: var(--button-text);
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .reset-btn:hover, .hint-btn:hover {
            background: var(--button-hover-bg);
            color: var(--button-hover-text);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }

        .reset-btn {
            border-color: var(--exercise-border);
            color: var(--exercise-border);
        }

        .reset-btn:hover {
            background: var(--exercise-border);
            color: white;
        }

        /* 表格样式 */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--main-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        .data-table th {
            background: var(--button-border);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: bold;
        }

        .data-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid var(--formula-border);
        }

        .data-table tr:nth-child(even) {
            background: var(--formula-bg);
        }

        .data-table tr:hover {
            background: var(--concept-gradient-start);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .exercise-status {
                flex-direction: column;
                gap: 15px;
            }

            .progress-bar {
                width: 100%;
            }

            .answer-input {
                flex-direction: column;
                align-items: stretch;
            }

            .answer-input input[type="text"] {
                min-width: auto;
            }

            .question-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .exercise-controls {
                flex-direction: column;
                align-items: center;
            }

            .reset-btn, .hint-btn {
                width: 100%;
                max-width: 250px;
            }

            header h1 {
                font-size: 1.8em;
            }
            
            main {
                padding: 20px;
            }
            
            nav {
                padding: 15px 20px;
            }
            
            nav button {
                font-size: 0.9em;
                padding: 8px 15px;
            }

            .animation-container {
                height: 200px;
            }

            .theme-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 14px;
            }

            .theme-icon {
                font-size: 18px;
            }

            .data-table {
                font-size: 0.9em;
            }

            .data-table th, .data-table td {
                padding: 8px;
            }
        }
        
        footer {
            background: var(--nav-bg);
            text-align: center;
            padding: 20px;
            border-top: 2px solid var(--nav-border);
            color: var(--text-color-light);
        }
        
        .tip {
            background: var(--tip-bg);
            border: 1px solid var(--tip-border);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            display: flex;
            align-items: center;
        }
        
        .tip::before {
            content: "💡";
            font-size: 1.5em;
            margin-right: 10px;
        }

        /* 动画容器样式 */
        .animation-container {
            width: 100%;
            height: 300px;
            position: relative;
            margin: 20px 0;
            background: var(--animation-bg);
            border-radius: 10px;
            overflow: hidden;
        }

        .integral-animation {
            width: 100%;
            height: 100%;
        }

        .animation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .animation-btn {
            padding: 8px 20px;
            background: var(--button-border);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .animation-btn:hover {
            background: var(--primary-gradient-end);
            transform: translateY(-2px);
        }

        /* LaTeX公式样式 */
        .math-display {
            font-size: 1.2em;
            margin: 15px 0;
            text-align: center;
            color: var(--text-color);
        }

        /* MathJax 深色主题适配 */
        [data-theme="dark"] mjx-container {
            color: #e0e0e0 !important;
        }

        /* 实际应用部分样式 */
        .application-card {
            background: var(--card-background);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 25px var(--shadow-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .application-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px var(--shadow-color);
        }

        .traffic-network svg {
            max-width: 100%;
            height: auto;
        }

        .problem-setup {
            background: rgba(0, 102, 204, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .interactive-solver, .nutrition-calculator, .economic-model, .image-transform {
            margin: 25px 0;
        }

        .solve-btn, .transform-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .solve-btn:hover, .transform-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .transform-btn.active {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }

        .solution-display {
            background: var(--card-background);
            border: 2px solid #4CAF50;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .solution-steps {
            line-height: 1.8;
        }

        .solution-result {
            background: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .interpretation {
            background: rgba(255, 193, 7, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .matrix-display {
            text-align: center;
            margin: 20px 0;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .input-group input {
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            background: var(--input-background);
            color: var(--text-color);
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .modern-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--card-background);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        .modern-table th,
        .modern-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }

        .modern-table thead th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        .modern-table tbody tr:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .economic-table {
            margin: 25px 0;
        }

        .economic-equations {
            background: rgba(0, 123, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .sector-result {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .sector-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .sector-card h5 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }

        .sector-card p {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }

        .transform-controls {
            margin: 20px 0;
        }

        .transform-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .transform-demo {
            background: var(--card-background);
            border: 2px solid #007bff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .transform-example {
            background: rgba(0, 123, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .applications-summary {
            margin: 40px 0;
            padding: 30px;
            background: var(--card-background);
            border-radius: 15px;
            box-shadow: 0 8px 25px var(--shadow-color);
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .summary-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--shadow-color);
        }

        .summary-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .summary-card h4 {
            margin: 10px 0;
            color: var(--text-color);
        }

        .summary-card p {
            color: var(--secondary-text);
            margin: 0;
        }

        .equation-system {
            background: rgba(40, 167, 69, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .application-card {
                padding: 20px;
                margin: 20px 0;
            }

            .input-grid {
                grid-template-columns: 1fr;
            }

            .transform-buttons {
                flex-direction: column;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }

            .sector-result {
                grid-template-columns: 1fr;
            }

            .traffic-network svg {
                width: 100%;
                height: auto;
            }
        }

        /* 深色主题适配 */
        [data-theme="dark"] .application-card {
            background: #2a2a3e;
            border-color: #404060;
        }

        [data-theme="dark"] .modern-table {
            background: #2a2a3e;
        }

        [data-theme="dark"] .modern-table th {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }

        [data-theme="dark"] .input-group input {
            background: #2a2a3e;
            border-color: #404060;
            color: #e0e0e0;
        }

        [data-theme="dark"] .sector-card {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }
    </style>
    </head>
<body>
    <!-- 现代化加载界面 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">正在加载线性代数课件...</div>
    </div>
    
    <!-- 进度条 -->
    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
    <div class="container">
        <header>
            <h1>线性代数 - 线性方程组</h1>
            <div class="subtitle">线性代数中的核心概念与应用</div>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span class="theme-icon" id="themeIcon">🌙</span>
                <span id="themeText">深色模式</span>
            </button>
        </header>
        
        <nav>
            <button class="active" onclick="showSection('intro')">基本概念</button>
            <button onclick="showSection('methods')">求解方法</button>
            <button onclick="showSection('examples')">例题解析</button>
            <button onclick="showSection('applications')">实际应用</button>
            <button onclick="showSection('exercise')">练习题</button>
            <button onclick="showSection('animation')">可视化演示</button>
        </nav>
        
        <main>
            <!-- 基本概念部分 -->
            <div class="section active" id="intro">
                <div class="concept-box">
                    <h2>📚 线性方程组入门</h2>
                    <p>欢迎进入线性方程组的世界！从日常生活中的分配问题，到工程中的复杂计算，线性方程组都扮演着重要角色。让我们从最简单的概念开始。</p>
                </div>
                
                <div class="definition">
                    <h3>🔍 什么是线性方程？</h3>
                    <p>我们先从最简单的一元一次方程开始：</p>
                    <div class="formula modern-formula">
                        \[ 2x = 6 \]
                    </div>
                    <p>解得 \( x = 3 \)。这就是一个最简单的线性方程！</p>
                    
                    <p>扩展到多个变量，线性方程的一般形式为：</p>
                    <div class="formula modern-formula">
                        \[ a_1 x_1 + a_2 x_2 + \cdots + a_n x_n = b \]
                    </div>
                    <p>其中 \( a_1, a_2, \ldots, a_n \) 称为<strong>系数</strong>，\( b \) 称为<strong>常数项</strong>。</p>
                </div>
                
                <div class="example">
                    <h3>💡 实例：从生活问题到线性方程组</h3>
                    <p><strong>问题：</strong>小明去超市买苹果和橘子。已知：</p>
                    <div class="problem-scenario">
                        <ul>
                            <li>2个苹果 + 3个橘子 = 8元</li>
                            <li>1个苹果 + 2个橘子 = 5元</li>
                        </ul>
                        <p class="question-mark">❓ 问：一个苹果和一个橘子各多少元？</p>
                    </div>
                    
                    <p><strong>数学化：</strong>设苹果价格为 \( x \) 元，橘子价格为 \( y \) 元，则：</p>
                    <div class="formula modern-formula">
                        \[\begin{cases}
                        2x + 3y = 8 \\
                        x + 2y = 5
                        \end{cases}\]
                    </div>
                    <p>这就是一个<strong>线性方程组</strong>！</p>
                </div>
                
                <div class="definition">
                    <h3>📋 定义：线性方程组</h3>
                    <p>由若干个线性方程组成的方程组称为<strong>线性方程组</strong>。一般形式为：</p>
                    <div class="formula modern-formula">
                        \[\begin{cases}
                        a_{11}x_1 + a_{12}x_2 + \cdots + a_{1n}x_n = b_1 \\
                        a_{21}x_1 + a_{22}x_2 + \cdots + a_{2n}x_n = b_2 \\
                        \vdots \\
                        a_{m1}x_1 + a_{m2}x_2 + \cdots + a_{mn}x_n = b_m
                        \end{cases}\]
                    </div>
                    <p>其中包含 \( m \) 个方程，\( n \) 个未知数。</p>
                </div>
                
                <div class="theorem">
                    <h3>🔑 线性方程组的解</h3>
                    <p>线性方程组的<strong>解</strong>是一组数值 \( (s_1, s_2, \ldots, s_n) \)，当这组数值代入所有方程时，都能使等号两边相等。</p>
                    
                    <p><strong>解的情况：</strong></p>
                    <div class="solution-types">
                        <div class="solution-type no-solution">
                            <span class="icon">❌</span>
                            <div>
                                <strong>无解</strong>
                                <p>找不到任何满足所有方程的数值组合</p>
                            </div>
                        </div>
                        <div class="solution-type unique">
                            <span class="icon">🎯</span>
                            <div>
                                <strong>唯一解</strong>
                                <p>恰好存在一组解</p>
                            </div>
                        </div>
                        <div class="solution-type infinite">
                            <span class="icon">♾️</span>
                            <div>
                                <strong>无穷多解</strong>
                                <p>存在无限多组解</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tip modern-tip">
                    <div class="tip-header">
                        <span class="tip-icon">💡</span>
                        <strong>学习重点</strong>
                    </div>
                    <p>线性方程组是数学中的基础概念，广泛应用于工程、经济、物理等多个领域。掌握其基本概念后，我们将学习系统的求解方法。</p>
                </div>
            </div>
            

            
            <!-- 实际应用部分 -->
            <div class="section" id="applications">
                <div class="concept-box">
                    <h2>🌍 线性方程组的实际应用</h2>
                    <p>线性方程组在现实生活中有着广泛的应用场景。让我们通过具体例子来学习如何将实际问题转化为数学模型。</p>
                </div>
                
                <!-- 交通流量控制 -->
                <div class="application-card">
                    <div class="example">
                        <h3>🚗 应用1：智慧交通流量控制</h3>
                        <p>某城市智慧交通系统需要优化路口流量分配。已知某路网局部区域如下图所示：</p>
                        
                        <!-- 交通網絡可視化 -->
                        <div class="traffic-network" style="border: 2px solid #0066cc; border-radius: 10px; padding: 20px; margin: 20px 0; background: #f8f9fa;">
                            <svg width="500" height="300" viewBox="0 0 500 300" style="display: block; margin: 0 auto;">
                                <!-- 路口 -->
                                <circle cx="100" cy="150" r="25" fill="#ffcccb" stroke="#d00" stroke-width="3"/>
                                <text x="100" y="155" text-anchor="middle" font-size="12" font-weight="bold">A</text>
                                
                                <circle cx="250" cy="100" r="25" fill="#ffcccb" stroke="#d00" stroke-width="3"/>
                                <text x="250" y="105" text-anchor="middle" font-size="12" font-weight="bold">B</text>
                                
                                <circle cx="250" cy="200" r="25" fill="#ffcccb" stroke="#d00" stroke-width="3"/>
                                <text x="250" y="205" text-anchor="middle" font-size="12" font-weight="bold">C</text>
                                
                                <circle cx="400" cy="150" r="25" fill="#ffcccb" stroke="#d00" stroke-width="3"/>
                                <text x="400" y="155" text-anchor="middle" font-size="12" font-weight="bold">D</text>
                                
                                <!-- 道路 -->
                                <line x1="125" y1="150" x2="225" y2="100" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="175" y="120" text-anchor="middle" font-size="14" font-weight="bold" fill="#0066cc">x₁</text>
                                
                                <line x1="125" y1="150" x2="225" y2="200" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="175" y="180" text-anchor="middle" font-size="14" font-weight="bold" fill="#0066cc">x₂</text>
                                
                                <line x1="275" y1="100" x2="375" y2="150" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="325" y="120" text-anchor="middle" font-size="14" font-weight="bold" fill="#0066cc">x₃</text>
                                
                                <line x1="275" y1="200" x2="375" y2="150" stroke="#0066cc" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="325" y="180" text-anchor="middle" font-size="14" font-weight="bold" fill="#0066cc">x₄</text>
                                
                                <!-- 外部流量 -->
                                <line x1="50" y1="150" x2="75" y2="150" stroke="#ff6600" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="30" y="155" text-anchor="middle" font-size="12" font-weight="bold" fill="#ff6600">200輛/h</text>
                                
                                <line x1="425" y1="150" x2="450" y2="150" stroke="#ff6600" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="470" y="155" text-anchor="middle" font-size="12" font-weight="bold" fill="#ff6600">150輛/h</text>
                                
                                <line x1="250" y1="50" x2="250" y2="75" stroke="#ff6600" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="250" y="40" text-anchor="middle" font-size="12" font-weight="bold" fill="#ff6600">80輛/h</text>
                                
                                <line x1="250" y1="225" x2="250" y2="250" stroke="#ff6600" stroke-width="4" marker-end="url(#arrowhead)"/>
                                <text x="250" y="270" text-anchor="middle" font-size="12" font-weight="bold" fill="#ff6600">130輛/h</text>
                                
                                <!-- 箭頭定義 -->
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="currentColor" />
                                    </marker>
                                </defs>
                            </svg>
                        </div>
                        
                        <div class="problem-setup">
                            <h4>📋 问题建模过程：</h4>
                            <ol>
                                <li><strong>节点平衡原理：</strong>每个路口进入流量 = 流出流量</li>
                                <li><strong>約束條件：</strong>
                                    <ul>
                                        <li>路口A：200 = x₁ + x₂</li>
                                        <li>路口B：x₁ + 80 = x₃</li>
                                        <li>路口C：x₂ = x₄ + 130</li>
                                        <li>路口D：x₃ + x₄ = 150</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <div class="formula">
                                \[\begin{cases}
                                x_1 + x_2 = 200 \\
                                x_1 - x_3 = -80 \\
                                x_2 - x_4 = 130 \\
                                x_3 + x_4 = 150
                                \end{cases}\]
                            </div>
                        </div>
                        
                        <div class="interactive-solver">
                            <button onclick="solveTrafficFlow()" class="solve-btn">🔄 求解交通流量</button>
                            <div id="traffic-solution" class="solution-display" style="display:none;">
                                <h4>💡 解答：</h4>
                                <div class="solution-steps">
                                    <p><strong>第1步：</strong>建立增廣矩陣</p>
                                    <div class="matrix-display">
                                        \[\begin{bmatrix}
                                        1 & 1 & 0 & 0 & | & 200 \\
                                        1 & 0 & -1 & 0 & | & -80 \\
                                        0 & 1 & 0 & -1 & | & 130 \\
                                        0 & 0 & 1 & 1 & | & 150
                                        \end{bmatrix}\]
                                    </div>
                                    
                                    <p><strong>第2步：</strong>高斯消元</p>
                                    <div class="solution-result">
                                        <p>x₁ = 70 辆/小时</p>
                                        <p>x₂ = 130 辆/小时</p>
                                        <p>x₃ = 150 辆/小时</p>
                                        <p>x₄ = 0 辆/小时</p>
                                    </div>
                                    
                                    <div class="interpretation">
                                        <h4>🎯 实际意义：</h4>
                                        <ul>
                                            <li>A→B道路：每小时70辆车</li>
                                            <li>A→C道路：每小时130辆车</li>
                                            <li>B→D道路：每小时150辆车</li>
                                            <li>C→D道路：无需通行（可考虑改为停车场）</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 营养配比问题 -->
                <div class="application-card">
                    <div class="example">
                        <h3>🥗 应用2：智能营养配比系统</h3>
                        <p>基于中国居民营养需求，设计一个营养配比计算器：</p>
                        
                        <div class="nutrition-calculator">
                            <div class="user-input">
                                <h4>📝 设置您的营养目标：</h4>
                                <div class="input-grid">
                                    <div class="input-group">
                                        <label>每日蛋白質需求 (g):</label>
                                        <input type="number" id="protein-target" value="60" min="40" max="120">
                                    </div>
                                    <div class="input-group">
                                        <label>每日脂肪需求 (g):</label>
                                        <input type="number" id="fat-target" value="65" min="30" max="100">
                                    </div>
                                    <div class="input-group">
                                        <label>每日碳水化合物需求 (g):</label>
                                        <input type="number" id="carb-target" value="300" min="200" max="450">
                                    </div>
                                </div>
                                
                                <button onclick="calculateNutrition()" class="solve-btn">🧮 计算食物配比</button>
                            </div>
                            
                            <div class="nutrition-data">
                                <h4>📊 食物營養成分表（每100g）：</h4>
                                <table class="modern-table">
                                    <thead>
                                        <tr>
                                            <th>食物</th>
                                            <th>蛋白質(g)</th>
                                            <th>脂肪(g)</th>
                                            <th>碳水化合物(g)</th>
                                            <th>建議攝入量</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>🍚 大米</td>
                                            <td>7.5</td>
                                            <td>0.5</td>
                                            <td>79</td>
                                            <td id="rice-amount">-</td>
                                        </tr>
                                        <tr>
                                            <td>🐷 瘦肉</td>
                                            <td>17</td>
                                            <td>29</td>
                                            <td>1.1</td>
                                            <td id="meat-amount">-</td>
                                        </tr>
                                        <tr>
                                            <td>🥬 蔬菜</td>
                                            <td>2</td>
                                            <td>0.2</td>
                                            <td>4</td>
                                            <td id="vegetable-amount">-</td>
                                        </tr>
                                        <tr>
                                            <td>🥚 雞蛋</td>
                                            <td>13</td>
                                            <td>15</td>
                                            <td>0.5</td>
                                            <td id="egg-amount">-</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div id="nutrition-result" class="solution-display" style="display:none;">
                                <h4>🎯 营养配比结果：</h4>
                                <div class="equation-system">
                                    <p><strong>建立的线性方程组：</strong></p>
                                    <div class="formula">
                                        \[\begin{cases}
                                        7.5x_1 + 17x_2 + 2x_3 + 13x_4 = \text{蛋白质目标} \\
                                        0.5x_1 + 29x_2 + 0.2x_3 + 15x_4 = \text{脂肪目标} \\
                                        79x_1 + 1.1x_2 + 4x_3 + 0.5x_4 = \text{碳水化合物目标}
                                        \end{cases}\]
                                    </div>
                                    <p>其中 x₁, x₂, x₃, x₄ 分别表示大米、瘦肉、蔬菜、鸡蛋的摄入量（单位：100g）</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 经济学应用 -->
                <div class="application-card">
                    <div class="example">
                        <h3>📈 应用3：经济投入产出分析</h3>
                        <p>列昂惕夫（Wassily Leontief）投入产出模型，1973年诺贝尔经济学奖得主。</p>
                        
                        <div class="economic-model">
                            <h4>🏭 三部门经济模型：</h4>
                            <p>假设经济体包含农业、工业、服务业三个部门：</p>
                            
                            <div class="economic-table">
                                <table class="modern-table">
                                    <thead>
                                        <tr>
                                            <th>投入\產出</th>
                                            <th>农业</th>
                                            <th>工业</th>
                                            <th>服务业</th>
                                            <th>最終需求</th>
                                            <th>總產出</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>农业</strong></td>
                                            <td>0.2</td>
                                            <td>0.3</td>
                                            <td>0.1</td>
                                            <td>100</td>
                                            <td>x₁</td>
                                        </tr>
                                        <tr>
                                            <td><strong>工业</strong></td>
                                            <td>0.4</td>
                                            <td>0.2</td>
                                            <td>0.3</td>
                                            <td>150</td>
                                            <td>x₂</td>
                                        </tr>
                                        <tr>
                                            <td><strong>服务业</strong></td>
                                            <td>0.1</td>
                                            <td>0.3</td>
                                            <td>0.2</td>
                                            <td>200</td>
                                            <td>x₃</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="economic-equations">
                                <p><strong>平衡方程组：</strong></p>
                                <div class="formula">
                                    \[\begin{cases}
                                    x_1 = 0.2x_1 + 0.3x_2 + 0.1x_3 + 100 \\
                                    x_2 = 0.4x_1 + 0.2x_2 + 0.3x_3 + 150 \\
                                    x_3 = 0.1x_1 + 0.3x_2 + 0.2x_3 + 200
                                    \end{cases}\]
                                </div>
                                
                                <p>整理为标准形式：</p>
                                <div class="formula">
                                    \[\begin{cases}
                                    0.8x_1 - 0.3x_2 - 0.1x_3 = 100 \\
                                    -0.4x_1 + 0.8x_2 - 0.3x_3 = 150 \\
                                    -0.1x_1 - 0.3x_2 + 0.8x_3 = 200
                                    \end{cases}\]
                                </div>
                            </div>
                            
                            <button onclick="solveEconomicModel()" class="solve-btn">📊 计算各部门产出</button>
                            <div id="economic-result" class="solution-display" style="display:none;">
                                <h4>📈 经济分析结果：</h4>
                                <div class="economic-output">
                                    <div class="sector-result">
                                        <div class="sector-card">
                                            <h5>🌾 农业部门</h5>
                                            <p>总产出：<span id="agriculture-output">-</span> 亿元</p>
                                        </div>
                                        <div class="sector-card">
                                            <h5>🏭 工业部门</h5>
                                            <p>总产出：<span id="industry-output">-</span> 亿元</p>
                                        </div>
                                        <div class="sector-card">
                                            <h5>🏢 服务业部门</h5>
                                            <p>总产出：<span id="service-output">-</span> 亿元</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 图像处理应用 -->
                <div class="application-card">
                    <div class="example">
                        <h3>🖼️ 应用4：图像处理中的线性变换</h3>
                        <p>计算机图形学中的图像变换本质上就是矩阵运算：</p>
                        
                        <div class="image-transform">
                            <div class="transform-controls">
                                <h4>🎛️ 选择变换类型：</h4>
                                <div class="transform-buttons">
                                    <button onclick="showTransform('rotation')" class="transform-btn">↻ 旋转</button>
                                    <button onclick="showTransform('scaling')" class="transform-btn">⚡ 缩放</button>
                                    <button onclick="showTransform('shearing')" class="transform-btn">📐 剪切</button>
                                    <button onclick="showTransform('reflection')" class="transform-btn">🪞 反射</button>
                                </div>
                            </div>
                            
                            <div id="transform-rotation" class="transform-demo" style="display:none;">
                                <h4>↻ 旋转变换矩阵：</h4>
                                <div class="formula">
                                    \[R(\theta) = \begin{bmatrix}
                                    \cos\theta & -\sin\theta \\
                                    \sin\theta & \cos\theta
                                    \end{bmatrix}\]
                                </div>
                                <div class="transform-example">
                                    <p>將點 (3, 4) 繞原點逆時針旋轉 45°：</p>
                                    <div class="formula">
                                        \[\begin{bmatrix}
                                        \cos 45° & -\sin 45° \\
                                        \sin 45° & \cos 45°
                                        \end{bmatrix}
                                        \begin{bmatrix}
                                        3 \\ 4
                                        \end{bmatrix} = 
                                        \begin{bmatrix}
                                        -0.71 \\ 4.95
                                        \end{bmatrix}\]
                                    </div>
                                </div>
                            </div>
                            
                            <div id="transform-scaling" class="transform-demo" style="display:none;">
                                <h4>⚡ 缩放变换矩阵：</h4>
                                <div class="formula">
                                    \[S(s_x, s_y) = \begin{bmatrix}
                                    s_x & 0 \\
                                    0 & s_y
                                    \end{bmatrix}\]
                                </div>
                                <div class="transform-example">
                                    <p>将图形在x方向缩放2倍，y方向缩放0.5倍：</p>
                                    <div class="formula">
                                        \[\begin{bmatrix}
                                        2 & 0 \\
                                        0 & 0.5
                                        \end{bmatrix}
                                        \begin{bmatrix}
                                        x \\ y
                                        \end{bmatrix} = 
                                        \begin{bmatrix}
                                        2x \\ 0.5y
                                        \end{bmatrix}\]
                                    </div>
                                </div>
                            </div>
                            
                            <div id="transform-shearing" class="transform-demo" style="display:none;">
                                <h4>📐 剪切变换矩阵：</h4>
                                <div class="formula">
                                    \[H(k) = \begin{bmatrix}
                                    1 & k \\
                                    0 & 1
                                    \end{bmatrix}\]
                                </div>
                                <div class="transform-example">
                                    <p>x方向剪切变换（k=0.5）：</p>
                                    <div class="formula">
                                        \[\begin{bmatrix}
                                        1 & 0.5 \\
                                        0 & 1
                                        \end{bmatrix}
                                        \begin{bmatrix}
                                        x \\ y
                                        \end{bmatrix} = 
                                        \begin{bmatrix}
                                        x + 0.5y \\ y
                                        \end{bmatrix}\]
                                    </div>
                                </div>
                            </div>
                            
                            <div id="transform-reflection" class="transform-demo" style="display:none;">
                                <h4>🪞 反射变换矩阵：</h4>
                                <div class="formula">
                                    \[\text{关于x轴反射: } \begin{bmatrix}
                                    1 & 0 \\
                                    0 & -1
                                    \end{bmatrix}\]
                                </div>
                                <div class="formula">
                                    \[\text{关于y轴反射: } \begin{bmatrix}
                                    -1 & 0 \\
                                    0 & 1
                                    \end{bmatrix}\]
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="applications-summary">
                    <h3>🎯 线性代数应用总结</h3>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <div class="summary-icon">🚗</div>
                            <h4>交通流量</h4>
                            <p>优化城市交通网络，提高通行效率</p>
                        </div>
                        <div class="summary-card">
                            <div class="summary-icon">🥗</div>
                            <h4>营养配比</h4>
                            <p>科学搭配饮食，维护身体健康</p>
                        </div>
                        <div class="summary-card">
                            <div class="summary-icon">📊</div>
                            <h4>经济分析</h4>
                            <p>分析产业关联，制定经济政策</p>
                        </div>
                        <div class="summary-card">
                            <div class="summary-icon">🖼️</div>
                            <h4>图像处理</h4>
                            <p>计算机图形学，游戏和影视</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 求解方法部分 -->
            <div class="section" id="methods">
                <div class="concept-box">
                    <h2>🛠️ 线性方程组的求解方法</h2>
                    <p>现在让我们学习系统性的求解方法。从简单的消元法开始，逐步掌握高效的矩阵方法。</p>
                </div>
                
                <div class="definition">
                    <h3>方法一：代入消元法（适用于简单方程组）</h3>
                    <p>回到购物问题：</p>
                    <div class="formula">
                        \[\begin{cases}
                        2x + 3y = 8 \\
                        x + 2y = 5
                        \end{cases}\]
                    </div>
                    
                    <p><strong>步骤：</strong></p>
                    <ol>
                        <li>从第二个方程解出：\( x = 5 - 2y \)</li>
                        <li>代入第一个方程：\( 2(5 - 2y) + 3y = 8 \)</li>
                        <li>化简：\( 10 - 4y + 3y = 8 \)，得 \( y = 2 \)</li>
                        <li>回代得：\( x = 5 - 2 \times 2 = 1 \)</li>
                    </ol>
                    
                    <p><strong>答案：</strong>蘋果1元，橘子2元。</p>
                </div>
                
                <div class="definition">
                    <h3>方法二：加减消元法</h3>
                    <p>同样的方程组，用加减消元：</p>
                    <div class="formula">
                        \[\begin{cases}
                        2x + 3y = 8 \quad \text{(1)} \\
                        x + 2y = 5 \quad \text{(2)}
                        \end{cases}\]
                    </div>
                    
                    <p><strong>步骤：</strong></p>
                    <ol>
                        <li>方程(1) × 1，方程(2) × 2：</li>
                        <div class="formula">
                            \[\begin{cases}
                            2x + 3y = 8 \\
                            2x + 4y = 10
                            \end{cases}\]
                        </div>
                        <li>下式减上式：\( y = 2 \)</li>
                        <li>代入得：\( x = 1 \)</li>
                    </ol>
                </div>
                
                <div class="theorem">
                    <h3>方法三：矩阵方法（高斯消元法）</h3>
                    <p>对于复杂的方程组，矩阵方法更加系统和高效。</p>
                    
                    <p><strong>增广矩阵：</strong>将方程组写成矩阵形式</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        a_{11} & a_{12} & \cdots & a_{1n} & | & b_1 \\
                        a_{21} & a_{22} & \cdots & a_{2n} & | & b_2 \\
                        \vdots & \vdots & \ddots & \vdots & | & \vdots \\
                        a_{m1} & a_{m2} & \cdots & a_{mn} & | & b_m
                        \end{bmatrix}\]
                    </div>
                    
                    <p><strong>基本行变换：</strong></p>
                    <ul>
                        <li>R_i ↔ R_j：交换两行</li>
                        <li>kR_i：某行乘以非零常数</li>
                        <li>R_i + kR_j：某行加上另一行的k倍</li>
                    </ul>
                </div>
                
                <div class="example">
                    <h3>高斯消元法详细步骤</h3>
                    <p>求解三元线性方程组：</p>
                    <div class="formula">
                        \[\begin{cases}
                        x + 2y + z = 6 \\
                        2x + y - z = 1 \\
                        x - y + 2z = 5
                        \end{cases}\]
                    </div>
                    
                    <p><strong>步骤一：写出增广矩阵</strong></p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 2 & 1 & | & 6 \\
                        2 & 1 & -1 & | & 1 \\
                        1 & -1 & 2 & | & 5
                        \end{bmatrix}\]
                    </div>
                    
                    <p><strong>步骤二：前向消元</strong></p>
                    <p>消除第一列的下三角元素：</p>
                    <div class="formula">
                        \[R_2 - 2R_1, R_3 - R_1 \Rightarrow \begin{bmatrix}
                        1 & 2 & 1 & | & 6 \\
                        0 & -3 & -3 & | & -11 \\
                        0 & -3 & 1 & | & -1
                        \end{bmatrix}\]
                    </div>
                    
                    <p>消除第二列的下三角元素：</p>
                    <div class="formula">
                        \[R_3 - R_2 \Rightarrow \begin{bmatrix}
                        1 & 2 & 1 & | & 6 \\
                        0 & -3 & -3 & | & -11 \\
                        0 & 0 & 4 & | & 10
                        \end{bmatrix}\]
                    </div>
                    
                    <p><strong>步骤三：回代求解</strong></p>
                    <ol>
                        <li>从第三行：\( 4z = 10 \Rightarrow z = 2.5 \)</li>
                        <li>从第二行：\( -3y - 3z = -11 \Rightarrow y = 1.5 \)</li>
                        <li>从第一行：\( x + 2y + z = 6 \Rightarrow x = 0 \)</li>
                    </ol>
                    
                    <p><strong>解：</strong>\( (x, y, z) = (0, 1.5, 2.5) \)</p>
                </div>
                
                <div class="definition">
                    <h3>判断解的性质</h3>
                    <p>通过行阶梯形矩阵判断解的情况：</p>
                    <ol>
                        <li><strong>有唯一解</strong>：主元个数 = 未知数个数</li>
                        <li><strong>有无穷多解</strong>：主元个数 < 未知数个数，且无矛盾行</li>
                        <li><strong>无解</strong>：出现形如 [0 0 ... 0 | c] 的矛盾行（c ≠ 0）</li>
                    </ol>
                </div>
                
                <div class="tip">
                    方法总结：代入消元适合2-3元方程组，加减消元适合系数简单的情况，而高斯消元法是通用的系统方法，特别适合处理复杂和大型方程组。掌握这些方法后，我们就可以解决各种实际问题了。
                </div>
            </div>
            
            <!-- 例题解析部分 -->
            <div class="section" id="examples">
                <div class="concept-box">
                    <h2>📝 例题精讲：从基础到进阶</h2>
                    <p>通过精选例题，循序渐进地掌握线性方程组的解法技巧。每个例题都包含详细的思路分析和解题步骤。</p>
                </div>
                
                <div class="example">
                    <h3>例题1：基础二元方程组（代入法）</h3>
                    <p><strong>题目：</strong>解线性方程组</p>
                    <div class="formula">
                        \[\begin{cases}
                        3x + 2y = 7 \\
                        x - y = 1
                        \end{cases}\]
                    </div>
                    
                    <p><strong>思路分析：</strong>这是一个简单的二元方程组，第二个方程容易解出 x，适合用代入法。</p>
                    
                    <p><strong>解题步骤：</strong></p>
                    <ol>
                        <li>从方程②解出：\( x = y + 1 \)</li>
                        <li>代入方程①：\( 3(y + 1) + 2y = 7 \)</li>
                        <li>化简：\( 3y + 3 + 2y = 7 \)，得 \( 5y = 4 \)，所以 \( y = \frac{4}{5} \)</li>
                        <li>回代：\( x = \frac{4}{5} + 1 = \frac{9}{5} \)</li>
                    </ol>
                    
                    <p><strong>答案：</strong>\( (x, y) = \left(\frac{9}{5}, \frac{4}{5}\right) \)</p>
                    
                    <p><strong>验证：</strong>将解代入原方程验证正确性。</p>
                </div>
                
                <div class="example">
                    <h3>例题2：判断解的情况（矩阵法）</h3>
                    <p><strong>题目：</strong>判断下列方程组解的情况</p>
                    <div class="formula">
                        \[\begin{cases}
                        x - 2y = -1 \\
                        -x + 3y = 3
                        \end{cases}\]
                    </div>
                    
                    <p><strong>思路分析：</strong>使用增广矩阵的行变换来判断解的情况，这是处理复杂方程组的标准方法。</p>
                    
                    <p><strong>解题步骤：</strong></p>
                    <p>1. 写出增广矩阵：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & -2 & | & -1 \\
                        -1 & 3 & | & 3
                        \end{bmatrix}\]
                    </div>
                    
                    <p>2. 进行行变换 \( R_2 + R_1 \)：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & -2 & | & -1 \\
                        0 & 1 & | & 2
                        \end{bmatrix}\]
                    </div>
                    
                    <p>3. 继续化简 \( R_1 + 2R_2 \)：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 0 & | & 3 \\
                        0 & 1 & | & 2
                        \end{bmatrix}\]
                    </div>
                    
                    <p><strong>结论：</strong>主元个数 = 未知数个数 = 2，因此有唯一解 \( (x, y) = (3, 2) \)</p>
                </div>
                
                <div class="example">
                    <h3>例题3：三元方程组求解</h3>
                    <p><strong>题目：</strong>解三元线性方程组</p>
                    <div class="formula">
                        \[\begin{cases}
                        x + y + z = 6 \\
                        2x - y + z = 1 \\
                        x + 2y - z = 3
                        \end{cases}\]
                    </div>
                    
                    <p><strong>思路分析：</strong>三元方程组最好用高斯消元法，系统性强，不容易出错。</p>
                    
                    <p><strong>解题步骤：</strong></p>
                    <p>1. 建立增广矩阵：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 1 & 1 & | & 6 \\
                        2 & -1 & 1 & | & 1 \\
                        1 & 2 & -1 & | & 3
                        \end{bmatrix}\]
                    </div>
                    
                    <p>2. 消元过程：</p>
                    <p>\( R_2 - 2R_1, R_3 - R_1 \)：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 1 & 1 & | & 6 \\
                        0 & -3 & -1 & | & -11 \\
                        0 & 1 & -2 & | & -3
                        \end{bmatrix}\]
                    </div>
                    
                    <p>\( R_2 + 3R_3 \)：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 1 & 1 & | & 6 \\
                        0 & 0 & -7 & | & -20 \\
                        0 & 1 & -2 & | & -3
                        \end{bmatrix}\]
                    </div>
                    
                    <p>交换 \( R_2 \) 和 \( R_3 \)：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 1 & 1 & | & 6 \\
                        0 & 1 & -2 & | & -3 \\
                        0 & 0 & -7 & | & -20
                        \end{bmatrix}\]
                    </div>
                    
                    <p>3. 回代求解：</p>
                    <ol>
                        <li>从第三行：\( -7z = -20 \Rightarrow z = \frac{20}{7} \)</li>
                        <li>从第二行：\( y - 2z = -3 \Rightarrow y = -3 + 2 \times \frac{20}{7} = \frac{19}{7} \)</li>
                        <li>从第一行：\( x + y + z = 6 \Rightarrow x = 6 - \frac{19}{7} - \frac{20}{7} = \frac{3}{7} \)</li>
                    </ol>
                    
                    <p><strong>答案：</strong>\( (x, y, z) = \left(\frac{3}{7}, \frac{19}{7}, \frac{20}{7}\right) \)</p>
                </div>
                
                <div class="example">
                    <h3>例题4：无穷多解的情况</h3>
                    <p><strong>题目：</strong>求解方程组并写出通解</p>
                    <div class="formula">
                        \[\begin{cases}
                        x + 2y - z = 3 \\
                        2x + 4y - 2z = 6 \\
                        x + 2y + z = 5
                        \end{cases}\]
                    </div>
                    
                    <p><strong>思路分析：</strong>观察到前两个方程有倍数关系，可能有无穷多解。</p>
                    
                    <p><strong>解题步骤：</strong></p>
                    <p>1. 增广矩阵行变换：</p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 2 & -1 & | & 3 \\
                        2 & 4 & -2 & | & 6 \\
                        1 & 2 & 1 & | & 5
                        \end{bmatrix} \sim \begin{bmatrix}
                        1 & 2 & -1 & | & 3 \\
                        0 & 0 & 0 & | & 0 \\
                        0 & 0 & 2 & | & 2
                        \end{bmatrix}\]
                    </div>
                    
                    <p>2. 从第三行得：\( z = 1 \)</p>
                    <p>3. 代入第一行：\( x + 2y - 1 = 3 \Rightarrow x = 4 - 2y \)</p>
                    
                    <p><strong>通解：</strong>\( (x, y, z) = (4 - 2t, t, 1) \)，其中 \( t \) 为任意实数</p>
                </div>
                
                <div class="example">
                    <h3>例题5：无解的情况</h3>
                    <p><strong>题目：</strong>判断方程组是否有解</p>
                    <div class="formula">
                        \[\begin{cases}
                        x + y = 2 \\
                        2x + 2y = 5
                        \end{cases}\]
                    </div>
                    
                    <p><strong>思路分析：</strong>观察系数的关系，第二个方程的系数是第一个的2倍，但常数项不是。</p>
                    
                    <p><strong>解题步骤：</strong></p>
                    <p>将第二个方程除以2得：\( x + y = 2.5 \)</p>
                    <p>与第一个方程 \( x + y = 2 \) 矛盾</p>
                    
                    <p><strong>结论：</strong>方程组无解（两条平行直线）</p>
                    
                    <p><strong>矩阵验证：</strong></p>
                    <div class="formula">
                        \[\begin{bmatrix}
                        1 & 1 & | & 2 \\
                        2 & 2 & | & 5
                        \end{bmatrix} \sim \begin{bmatrix}
                        1 & 1 & | & 2 \\
                        0 & 0 & | & 1
                        \end{bmatrix}\]
                    </div>
                    <p>出现矛盾行 [0 0 | 1]，确認无解。</p>
                </div>
                
                <div class="tip">
                    解题策略总结：
                    <ul>
                        <li><strong>简单方程组</strong>：优先考虑代入法或加减法</li>
                        <li><strong>複雜方程组</strong>：使用矩阵行变换（高斯消元法）</li>
                        <li><strong>判断解的情况</strong>：观察系数关系，用矩阵方法系统分析</li>
                        <li><strong>验证答案</strong>：将解代入原方程组进行验证</li>
                    </ul>
                </div>
            </div>
            
            <!-- 练习题部分 -->
            <div class="section" id="exercise">
                <div class="concept-box">
                    <h2>📝 线性方程组交互式练习题</h2>
                    <p>完成下列练习题，系统会自动评分并提供反馈</p>
                </div>

                <!-- 练习状态显示 -->
                <div class="exercise-status">
                    <div class="score-display">
                        <span class="score-label">当前得分：</span>
                        <span class="score-value" id="totalScore">0</span>
                        <span class="score-total">/100</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <!-- 第一题：基础概念 -->
                <div class="interactive-question" data-question="1">
                    <div class="question-header">
                        <h3>题目 1：基础概念 (15分)</h3>
                        <div class="question-score" id="q1-score">未答题</div>
                    </div>
                    <div class="question-content">
                        <p><strong>（入门级）</strong>下列哪个方程是线性方程？</p>
                        <div class="answer-options">
                            <label><input type="radio" name="q1" value="A"> A. \( x^2 + y = 3 \)</label>
                            <label><input type="radio" name="q1" value="B"> B. \( 2x + 3y = 5 \)</label>
                            <label><input type="radio" name="q1" value="C"> C. \( xy + z = 1 \)</label>
                            <label><input type="radio" name="q1" value="D"> D. \( \sin x + y = 2 \)</label>
                        </div>
                        <button onclick="checkAnswer('1')" class="check-btn">提交答案</button>
                        <div class="feedback" id="q1-feedback"></div>
                    </div>
                </div>

                <!-- 第二题：解的判断 -->
                <div class="interactive-question" data-question="2">
                    <div class="question-header">
                        <h3>题目 2：解的情况判断 (20分)</h3>
                        <div class="question-score" id="q2-score">未答题</div>
                    </div>
                    <div class="question-content">
                        <p><strong>（基础级）</strong>判断线性方程组 \(\begin{cases} 2x + 3y = 6 \\ 4x + 6y = 12 \end{cases}\) 的解的情况：</p>
                        <div class="answer-options">
                            <label><input type="radio" name="q2" value="A"> A. 无解</label>
                            <label><input type="radio" name="q2" value="B"> B. 有唯一解</label>
                            <label><input type="radio" name="q2" value="C"> C. 有无穷多解</label>
                            <label><input type="radio" name="q2" value="D"> D. 无法判断</label>
                        </div>
                        <button onclick="checkAnswer('2')" class="check-btn">提交答案</button>
                        <div class="feedback" id="q2-feedback"></div>
                        
                        <div class="hint-section" id="q2-hint" style="display: none;">
                            <p><strong>提示：</strong>观察两个方程之间的系数关系。</p>
                        </div>
                    </div>
                </div>

                <!-- 第三题：矩阵求解 -->
                <div class="interactive-question" data-question="3">
                    <div class="question-header">
                        <h3>题目 3：矩阵方法 (25分)</h3>
                        <div class="question-score" id="q3-score">未答题</div>
                    </div>
                    <div class="question-content">
                        <p><strong>（中级）</strong>线性方程组的增广矩阵经行变换后为 \(\begin{bmatrix} 1 & 2 & | & 3 \\ 0 & 1 & | & 2 \end{bmatrix}\)，则解为：</p>
                        <div class="answer-options">
                            <label><input type="radio" name="q3" value="A"> A. x = 1, y = 2</label>
                            <label><input type="radio" name="q3" value="B"> B. x = -1, y = 2</label>
                            <label><input type="radio" name="q3" value="C"> C. x = 2, y = 1</label>
                            <label><input type="radio" name="q3" value="D"> D. x = 3, y = 0</label>
                        </div>
                        <button onclick="checkAnswer('3')" class="check-btn">提交答案</button>
                        <div class="feedback" id="q3-feedback"></div>
                        
                        <div class="hint-section" id="q3-hint" style="display: none;">
                            <p><strong>提示：</strong>从第二行得 y = 2，代入第一行求 x。</p>
                        </div>
                    </div>
                </div>

                <!-- 第四题：三元方程组 -->
                <div class="interactive-question" data-question="4">
                    <div class="question-header">
                        <h3>题目 4：三元方程组 (20分)</h3>
                        <div class="question-score" id="q4-score">未答题</div>
                    </div>
                    <div class="question-content">
                        <p><strong>（中级）</strong>下列哪个向量是方程组 \(\begin{cases} x + y + z = 6 \\ 2x - y + z = 3 \end{cases}\) 的解？</p>
                        <div class="answer-options">
                            <label><input type="radio" name="q4" value="A"> A. (1, 2, 3)</label>
                            <label><input type="radio" name="q4" value="B"> B. (2, 1, 3)</label>
                            <label><input type="radio" name="q4" value="C"> C. (3, 2, 1)</label>
                            <label><input type="radio" name="q4" value="D"> D. (1, 3, 2)</label>
                        </div>
                        <button onclick="checkAnswer('4')" class="check-btn">提交答案</button>
                        <div class="feedback" id="q4-feedback"></div>
                    </div>
                </div>

                <!-- 第五题：高斯消元法 -->
                <div class="interactive-question" data-question="5">
                    <div class="question-header">
                        <h3>题目 5：高斯消元法 (20分)</h3>
                        <div class="question-score" id="q5-score">未答题</div>
                    </div>
                    <div class="question-content">
                        <p><strong>（高级）</strong>高斯消元法的主要思想是：</p>
                        <div class="answer-options">
                            <label><input type="radio" name="q5" value="A"> A. 将矩阵化为对角矩阵</label>
                            <label><input type="radio" name="q5" value="B"> B. 將系数矩阵化为上三角矩阵</label>
                            <label><input type="radio" name="q5" value="C"> C. 将矩阵化为单位矩阵</label>
                            <label><input type="radio" name="q5" value="D"> D. 将矩阵化为下三角矩阵</label>
                        </div>
                        <button onclick="checkAnswer('5')" class="check-btn">提交答案</button>
                        <div class="feedback" id="q5-feedback"></div>
                    </div>
                </div>

                <!-- 重置按钮 -->
                <div class="exercise-controls">
                    <button onclick="resetAllAnswers()" class="reset-btn">重置所有答案</button>
                    <button onclick="showAllHints()" class="hint-btn">显示所有提示</button>
                </div>
            </div>
            
            <!-- 可视化演示部分 -->
            <div class="section" id="animation">
                <div class="concept-box">
                    <h2>🎬 线性方程组可视化演示</h2>
                    <p>通过动画直观理解线性方程组的求解过程</p>
                </div>

                <div class="interactive-demo">
                    <h3>二元线性方程组的图形表示</h3>
                    <div class="math-display">
                        \[\begin{cases}
                        a_1x + b_1y = c_1 \\
                        a_2x + b_2y = c_2
                        \end{cases}\]
                    </div>
                    <div class="animation-container">
                        <canvas id="linearCanvas" class="integral-animation"></canvas>
                    </div>
                    <div class="animation-controls">
                        <button class="animation-btn" onclick="startLinearAnimation()">开始演示</button>
                        <button class="animation-btn" onclick="resetLinearAnimation()">重置</button>
                    </div>
                    <p>演示说明：两条直线的交点即为方程组的解。通过调整参数，可以观察无解、唯一解和无穷多解的情况。</p>
                </div>

                <div class="interactive-demo">
                    <h3>高斯消元法步骤演示</h3>
                    <div class="animation-container">
                        <canvas id="gaussCanvas" class="integral-animation"></canvas>
                    </div>
                    <div class="animation-controls">
                        <button class="animation-btn" onclick="startGaussAnimation()">开始演示</button>
                        <button class="animation-btn" onclick="pauseGaussAnimation()">暂停</button>
                    </div>
                    <p>演示说明：动画展示高斯消元法的逐步过程，将增广矩阵化为行阶梯形。</p>
                </div>
            </div>
        </main>
        
        <footer>
            <p>© 2025 苏州经贸职业技术学院|线性方程组专题</p>
            <p>建议使用Chrome、Firefox或Edge浏览器获得最佳体验</p>
        </footer>
    </div>
    
    <script>
        // 配置 MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            options: {
                enableMenu: false,
                menuOptions: {
                    settings: {
                        texHints: true,
                        semantics: false,
                        zoom: 'NoZoom',
                        zscale: '200%'
                    }
                }
            },
            chtml: {
                displayAlign: 'left',
                displayIndent: '0',
                scale: 1,
                minScale: 0.5,
                maxScale: 2
            }
        };

        // 主题切换功能
        let currentTheme = 'light';

        function initTheme() {
            // 检查系统主题偏好
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                currentTheme = 'dark';
            }
            
            applyTheme(currentTheme);
        }

        function applyTheme(theme) {
            currentTheme = theme;
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.textContent = '☀️';
                themeText.textContent = '浅色模式';
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.textContent = '🌙';
                themeText.textContent = '深色模式';
            }
            
            // 重新渲染画布以适应主题
            if (typeof redrawCanvases === 'function') {
                redrawCanvases();
            }
        }

        function toggleTheme() {
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme(newTheme);
        }

        // 动画相关变量
        let linearAnimationId;
        let gaussAnimationId;

        // 获取当前主题的颜色
        function getThemeColors() {
            const isDark = currentTheme === 'dark';
            return {
                axes: isDark ? '#e0e0e0' : '#333',
                primary: isDark ? '#8b9ef3' : '#667eea',
                secondary: isDark ? '#ff8b8b' : '#ff6b6b',
                tertiary: isDark ? '#4a9d4a' : '#28a745',
                fill: isDark ? 'rgba(139, 158, 243, 0.3)' : 'rgba(102, 126, 234, 0.3)',
                background: isDark ? '#2a2a3e' : 'white',
                text: isDark ? '#e0e0e0' : '#333'
            };
        }

        // 初始化所有动画
        function initAnimations() {
            initLinearAnimation();
            initGaussAnimation();
        }

        // 重新绘制所有画布（主题切换时调用）
        function redrawCanvases() {
            const linearCanvas = document.getElementById('linearCanvas');
            const gaussCanvas = document.getElementById('gaussCanvas');
            
            if (linearCanvas && linearCanvas.getContext) {
                initLinearAnimation();
            }
            if (gaussCanvas && gaussCanvas.getContext) {
                initGaussAnimation();
            }
        }

        // 线性方程组可视化动画
        function initLinearAnimation() {
            const canvas = document.getElementById('linearCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            if (!ctx) return;
            
            // 设置canvas尺寸
            canvas.width = canvas.offsetWidth || 800;
            canvas.height = canvas.offsetHeight || 300;

            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const scale = 20;
            const colors = getThemeColors();

            function drawAxes() {
                ctx.clearRect(0, 0, width, height);
                
                // 设置背景
                ctx.fillStyle = colors.background;
                ctx.fillRect(0, 0, width, height);
                
                // 绘制坐标轴
                ctx.beginPath();
                ctx.strokeStyle = colors.axes;
                ctx.lineWidth = 2;
                
                // X轴
                ctx.moveTo(0, centerY);
                ctx.lineTo(width, centerY);
                
                // Y轴
                ctx.moveTo(centerX, 0);
                ctx.lineTo(centerX, height);
                
                ctx.stroke();
                
                // 绘制刻度和标签
                ctx.fillStyle = colors.text;
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'top';
                
                // X轴刻度
                for (let i = -10; i <= 10; i++) {
                    if (i !== 0) {
                        const x = centerX + i * scale;
                        ctx.beginPath();
                        ctx.moveTo(x, centerY - 5);
                        ctx.lineTo(x, centerY + 5);
                        ctx.stroke();
                        if (i % 5 === 0) {
                            ctx.fillText(i.toString(), x, centerY + 10);
                        }
                    }
                }
                
                // Y轴刻度
                ctx.textAlign = 'right';
                ctx.textBaseline = 'middle';
                for (let i = -10; i <= 10; i++) {
                    if (i !== 0) {
                        const y = centerY - i * scale;
                        ctx.beginPath();
                        ctx.moveTo(centerX - 5, y);
                        ctx.lineTo(centerX + 5, y);
                        ctx.stroke();
                        if (i % 5 === 0) {
                            ctx.fillText(i.toString(), centerX - 10, y);
                        }
                    }
                }
                
                // 坐标轴标签
                ctx.fillStyle = colors.text;
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('x', width - 20, centerY - 10);
                ctx.textAlign = 'right';
                ctx.fillText('y', centerX - 10, 20);
            }

            function drawLine(a, b, c, color, label) {
                ctx.beginPath();
                ctx.strokeStyle = color;
                ctx.lineWidth = 3;
                
                if (Math.abs(b) > 0.001) {
                    // y = (-a*x - c) / b
                    const x1 = -width / scale;
                    const y1 = (-a * x1 + c) / b;
                    const x2 = width / scale;
                    const y2 = (-a * x2 + c) / b;
                    
                    ctx.moveTo(0, centerY - y1 * scale);
                    ctx.lineTo(width, centerY - y2 * scale);
                } else {
                    // 垂直线 x = c/a
                    const x = c / a;
                    ctx.moveTo(centerX + x * scale, 0);
                    ctx.lineTo(centerX + x * scale, height);
                }
                
                ctx.stroke();
                
                // 绘制标签
                ctx.fillStyle = color;
                ctx.font = 'bold 14px Arial';
                ctx.fillText(label, 50, 30 + (label === 'L₁' ? 0 : 20));
            }

            let animationStep = 0;

            function animate() {
                drawAxes();
                
                // 第一条线：2x + 3y = 6
                drawLine(2, 3, 6, colors.primary, 'L₁: 2x + 3y = 6');
                
                // 第二条线根据动画步骤变化
                if (animationStep < 100) {
                    // 唯一解情况：x - y = 0
                    drawLine(1, -1, 0, colors.secondary, 'L₂: x - y = 0');
                    
                    // 画交点
                    const x = 1.2;
                    const y = 1.2;
                    ctx.beginPath();
                    ctx.fillStyle = colors.tertiary;
                    ctx.arc(centerX + x * scale, centerY - y * scale, 5, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = colors.text;
                    ctx.font = '12px Arial';
                    ctx.fillText('解: (1.2, 1.2)', centerX + x * scale + 20, centerY - y * scale - 10);
                } else if (animationStep < 200) {
                    // 无解情况：4x + 6y = 15（平行线）
                    drawLine(4, 6, 15, colors.secondary, 'L₂: 4x + 6y = 15');
                    
                    ctx.fillStyle = colors.text;
                    ctx.font = '12px Arial';
                    ctx.fillText('无解（平行线）', width / 2, height - 30);
                } else {
                    // 无穷多解：4x + 6y = 12（重合）
                    drawLine(4, 6, 12, colors.secondary, 'L₂: 4x + 6y = 12');
                    
                    ctx.fillStyle = colors.text;
                    ctx.font = '12px Arial';
                    ctx.fillText('无穷多解（重合）', width / 2, height - 30);
                }
                
                animationStep = (animationStep + 1) % 300;
                linearAnimationId = requestAnimationFrame(animate);
            }

            window.startLinearAnimation = function() {
                if (linearAnimationId) {
                    cancelAnimationFrame(linearAnimationId);
                }
                animationStep = 0;
                animate();
            };

            window.resetLinearAnimation = function() {
                if (linearAnimationId) {
                    cancelAnimationFrame(linearAnimationId);
                    linearAnimationId = null;
                }
                animationStep = 0;
                drawAxes();
            };

            // 初始绘制坐标轴
            drawAxes();
        }

        // 高斯消元法动画
        function initGaussAnimation() {
            const canvas = document.getElementById('gaussCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            if (!ctx) return;
            
            // 设置canvas尺寸
            canvas.width = canvas.offsetWidth || 800;
            canvas.height = canvas.offsetHeight || 300;

            const width = canvas.width;
            const height = canvas.height;
            const colors = getThemeColors();

            let gaussStep = 0;
            let matrix = [
                [2, 1, -1, 8],
                [-3, -1, 2, -11],
                [-2, 1, 2, -3]
            ];

            function drawMatrix(mat, step) {
                ctx.clearRect(0, 0, width, height);
                
                // 设置背景
                ctx.fillStyle = colors.background;
                ctx.fillRect(0, 0, width, height);
                
                const cellWidth = 60;
                const cellHeight = 40;
                const startX = (width - cellWidth * 4) / 2;
                const startY = (height - cellHeight * 3) / 2;
                
                // 绘制矩阵
                for (let i = 0; i < mat.length; i++) {
                    for (let j = 0; j < mat[i].length; j++) {
                        const x = startX + j * cellWidth;
                        const y = startY + i * cellHeight;
                        
                        // 绘制单元格
                        ctx.strokeStyle = colors.axes;
                        ctx.lineWidth = 2;
                        ctx.strokeRect(x, y, cellWidth, cellHeight);
                        
                        // 高亮当前操作的行
                        if (step > 0 && i === Math.floor((step - 1) / 2)) {
                            ctx.fillStyle = colors.fill;
                            ctx.fillRect(x, y, cellWidth, cellHeight);
                        }
                        
                        // 绘制数值
                        ctx.fillStyle = colors.text;
                        ctx.font = '16px Arial';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(mat[i][j].toFixed(0), x + cellWidth / 2, y + cellHeight / 2);
                    }
                }
                
                // 绘制分隔线（增广矩阵）
                ctx.strokeStyle = colors.primary;
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(startX + cellWidth * 3, startY);
                ctx.lineTo(startX + cellWidth * 3, startY + cellHeight * 3);
                ctx.stroke();
                
                // 显示步骤说明
                ctx.fillStyle = colors.text;
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                let stepText = '';
                
                switch(step) {
                    case 0:
                        stepText = '初始增广矩阵';
                        break;
                    case 1:
                        stepText = 'R2 = R2 + (3/2)R1';
                        break;
                    case 2:
                        stepText = 'R3 = R3 + R1';
                        break;
                    case 3:
                        stepText = 'R3 = R3 - (4/5)R2';
                        break;
                    default:
                        stepText = '行阶梯形矩阵完成';
                }
                
                ctx.fillText(stepText, width / 2, height - 40);
            }

            function performGaussStep() {
                if (gaussStep === 1) {
                    // R2 = R2 + (3/2)R1
                    matrix[1][0] = 0;
                    matrix[1][1] = 0.5;
                    matrix[1][2] = 0.5;
                    matrix[1][3] = 1;
                } else if (gaussStep === 2) {
                    // R3 = R3 + R1
                    matrix[2][0] = 0;
                    matrix[2][1] = 2;
                    matrix[2][2] = 1;
                    matrix[2][3] = 5;
                } else if (gaussStep === 3) {
                    // R3 = R3 - 4R2
                    matrix[2][1] = 0;
                    matrix[2][2] = -1;
                    matrix[2][3] = 1;
                }
            }

            function animateGauss() {
                if (gaussStep > 0) {
                    performGaussStep();
                }
                
                drawMatrix(matrix, gaussStep);
                
                gaussStep++;
                if (gaussStep <= 4) {
                    gaussAnimationId = setTimeout(() => animateGauss(), 1500);
                }
            }

            window.startGaussAnimation = function() {
                if (gaussAnimationId) {
                    clearTimeout(gaussAnimationId);
                }
                gaussStep = 0;
                matrix = [
                    [2, 1, -1, 8],
                    [-3, -1, 2, -11],
                    [-2, 1, 2, -3]
                ];
                animateGauss();
            };

            window.pauseGaussAnimation = function() {
                if (gaussAnimationId) {
                    clearTimeout(gaussAnimationId);
                    gaussAnimationId = null;
                }
            };

            // 初始绘制
            drawMatrix(matrix, 0);
        }

        // 交互式练习题功能
        
        // 练习题答案和评分系统
        const exerciseData = {
            totalScore: 0,
            questionScores: {
                '1': 0,
                '2': 0,
                '3': 0,
                '4': 0,
                '5': 0
            },
            maxScores: {
                '1': 15,
                '2': 20,
                '3': 25,
                '4': 20,
                '5': 20
            },
            correctAnswers: {
                '1': 'B',  // 2x + 3y = 5 是线性方程
                '2': 'C',  // 有无穷多解（第二个方程是第一个的2倍）
                '3': 'B',  // x = -1, y = 2
                '4': 'A',  // (1, 2, 3)
                '5': 'B'   // 將系数矩阵化为上三角矩阵
            }
        };

        // 检查答案函数
        function checkAnswer(questionId) {
            // 处理所有选择题
            const selectedOption = document.querySelector(`input[name="q${questionId}"]:checked`);
            if (!selectedOption) {
                showFeedback(`q${questionId}-feedback`, 'incorrect', '请选择一个答案！');
                return;
            }
            
            const userAnswer = selectedOption.value;
            const correctAnswer = exerciseData.correctAnswers[questionId];
            
            if (userAnswer === correctAnswer) {
                exerciseData.questionScores[questionId] = exerciseData.maxScores[questionId];
                
                let feedbackText = '';
                switch(questionId) {
                    case '1':
                        feedbackText = '✅ 正确！线性方程的特点是变量的最高次数为1，且变量之间沒有乘积项。2x + 3y = 5 符合这个条件。';
                        break;
                    case '2':
                        feedbackText = '✅ 正确！第二个方程 4x + 6y = 12 是第一个方程 2x + 3y = 6 的2倍，两个方程实际上是同一条直线，所以有无穷多解。';
                        break;
                    case '3':
                        feedbackText = '✅ 正确！从第二行得 y = 2，代入第一行得 x + 2×2 = 3，所以 x = 3 - 4 = -1。';
                        break;
                    case '4':
                        feedbackText = '✅ 正确！将 (1, 2, 3) 代入两个方程：1 + 2 + 3 = 6 ✓，2×1 - 2 + 3 = 3 ✓';
                        break;
                    case '5':
                        feedbackText = '✅ 正确！高斯消元法通过行变换將系数矩阵化为上三角矩阵（行阶梯形），然后回代求解。';
                        break;
                }
                
                showFeedback(`q${questionId}-feedback`, 'correct', feedbackText);
                updateQuestionScore(`q${questionId}-score`, 'correct', `${exerciseData.maxScores[questionId]}分`);
                
                // 标记正确答案
                document.querySelectorAll(`input[name="q${questionId}"]`).forEach(radio => {
                    const label = radio.closest('label');
                    if (radio.value === correctAnswer) {
                        label.classList.add('correct');
                    } else if (radio.checked) {
                        label.classList.add('incorrect');
                    }
                });
                
                // 显示額外提示
                if (questionId === '2' || questionId === '3') {
                    const hintElement = document.getElementById(`q${questionId}-hint`);
                    if (hintElement) {
                        hintElement.style.display = 'block';
                    }
                }
                
            } else {
                exerciseData.questionScores[questionId] = 0;
                
                let feedbackText = '';
                switch(questionId) {
                    case '1':
                        feedbackText = '❌ 答案错误。正确答案是 B。提示：线性方程中变量的最高次数必须为1，且不能有变量的乘积项。';
                        break;
                    case '2':
                        feedbackText = '❌ 答案错误。正确答案是 C。提示：比較两个方程的系数比例，看是否相等。';
                        break;
                    case '3':
                        feedbackText = '❌ 答案错误。正确答案是 B。提示：使用回代法，从第二行开始求解。';
                        break;
                    case '4':
                        feedbackText = '❌ 答案错误。正确答案是 A。提示：將每个选项代入两个方程验证。';
                        break;
                    case '5':
                        feedbackText = '❌ 答案错误。正确答案是 B。提示：回忆高斯消元法的基本步骤和目标。';
                        break;
                }
                
                showFeedback(`q${questionId}-feedback`, 'incorrect', feedbackText);
                updateQuestionScore(`q${questionId}-score`, 'incorrect', '0分');
                
                // 标记答案
                document.querySelectorAll(`input[name="q${questionId}"]`).forEach(radio => {
                    const label = radio.closest('label');
                    if (radio.value === correctAnswer) {
                        label.classList.add('correct');
                    } else if (radio.checked) {
                        label.classList.add('incorrect');
                    }
                });
            }
            
            updateTotalScore();
        }

        // 显示反馈信息
        function showFeedback(elementId, type, message) {
            const feedbackElement = document.getElementById(elementId);
            feedbackElement.className = `feedback ${type} show`;
            feedbackElement.innerHTML = message;
            
            // 如果消息包含LaTeX公式，重新渲染MathJax
            if (message.includes('\\(') || message.includes('\\[')) {
                if (typeof MathJax !== 'undefined') {
                    MathJax.typesetPromise([feedbackElement]);
                }
            }
        }

        // 更新题目得分显示
        function updateQuestionScore(elementId, type, score) {
            const scoreElement = document.getElementById(elementId);
            scoreElement.className = `question-score ${type}`;
            scoreElement.textContent = score;
        }

        // 更新总分
        function updateTotalScore() {
            const total = Object.values(exerciseData.questionScores).reduce((sum, score) => sum + score, 0);
            exerciseData.totalScore = total;
            
            document.getElementById('totalScore').textContent = Math.round(total);
            
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = `${total}%`;
            
            // 更新进度条颜色
            if (total >= 90) {
                progressFill.style.background = 'linear-gradient(90deg, #28a745, #20c997)';
            } else if (total >= 70) {
                progressFill.style.background = 'linear-gradient(90deg, #ffc107, #fd7e14)';
            } else {
                progressFill.style.background = 'linear-gradient(90deg, var(--button-border), var(--primary-gradient-end))';
            }
        }

        // 重置所有答案
        function resetAllAnswers() {
            // 重置得分
            Object.keys(exerciseData.questionScores).forEach(key => {
                exerciseData.questionScores[key] = 0;
            });
            
            // 清除选择题
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            // 清除反馈
            document.querySelectorAll('.feedback').forEach(feedback => {
                feedback.className = 'feedback';
                feedback.innerHTML = '';
            });
            
            // 重置题目得分显示
            document.querySelectorAll('.question-score').forEach(score => {
                score.className = 'question-score';
                score.textContent = '未答题';
            });
            
            // 清除选择题标记
            document.querySelectorAll('.answer-options label').forEach(label => {
                label.classList.remove('correct', 'incorrect');
            });
            
            // 隐藏提示
            ['q2-hint', 'q3-hint'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = 'none';
                }
            });
            
            updateTotalScore();
        }

        // 显示所有提示
        function showAllHints() {
            ['q2-hint', 'q3-hint'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = 'block';
                }
            });
            
            // 显示額外提示
            const hintMessages = {
                'q1-feedback': '💡 提示：线性方程的标准形式是 ax + by + cz + ... = d，变量的次数都是1。',
                'q2-feedback': '💡 提示：比較两个方程的系数比例，系数成比例且常数项也成比例则重合。',
                'q3-feedback': '💡 提示：行阶梯形矩阵可以直接读出解，从最后一行开始回代。',
                'q4-feedback': '💡 提示：將每个选项的三个数值代入两个方程，看是否都满足。',
                'q5-feedback': '💡 提示：高斯消元法的核心是通过行变换将矩阵化简為上三角形。'
            };
            
            Object.entries(hintMessages).forEach(([id, message]) => {
                const element = document.getElementById(id);
                if (!element.classList.contains('show')) {
                    showFeedback(id, 'partial', message);
                }
            });
        }

        // 现代化加载系统
        class ModernLoader {
            constructor() {
                this.progressBar = document.getElementById('progressBar');
                this.loadingOverlay = document.getElementById('loadingOverlay');
                this.progress = 0;
            }
            
            updateProgress(value, text = '') {
                this.progress = Math.min(100, Math.max(0, value));
                if (this.progressBar) {
                    this.progressBar.style.width = this.progress + '%';
                }
                
                if (text) {
                    const loadingText = document.querySelector('.loading-text');
                    if (loadingText) {
                        loadingText.textContent = text;
                    }
                }
            }
            
            complete() {
                this.updateProgress(100, '加载完成！');
                setTimeout(() => {
                    if (this.loadingOverlay) {
                        this.loadingOverlay.classList.add('hidden');
                    }
                    this.addPageAnimations();
                }, 500);
            }
            
            addPageAnimations() {
                // 为元素添加动画类
                const sections = document.querySelectorAll('.section');
                sections.forEach((section, index) => {
                    setTimeout(() => {
                        section.classList.add('fade-in');
                    }, index * 100);
                });
                
                const formulas = document.querySelectorAll('.modern-formula');
                formulas.forEach((formula, index) => {
                    setTimeout(() => {
                        formula.classList.add('slide-in-left');
                    }, 200 + index * 50);
                });
            }
        }
        
        // 现代化滚动进度条
        function updateScrollProgress() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            
            const progressBar = document.getElementById('progressBar');
            const loadingOverlay = document.getElementById('loadingOverlay');
            
            if (progressBar && loadingOverlay && loadingOverlay.classList.contains('hidden')) {
                progressBar.style.width = scrolled + '%';
            }
        }
        
        // 现代化切换动画
        function showSectionWithAnimation(sectionId) {
            // 隐藏所有section
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active', 'fade-in');
                section.style.display = 'none';
            });
            
            // 显示目标section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
                setTimeout(() => {
                    targetSection.classList.add('active', 'fade-in');
                }, 50);
            }
            
            // 更新导航按钮状态
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            const targetButton = document.querySelector(`button[onclick="showSection('${sectionId}')"]`);
            if (targetButton) {
                targetButton.classList.add('active');
            }
        }
        
        // 更新原有的showSection函数
        function showSection(sectionId) {
            showSectionWithAnimation(sectionId);
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            const loader = new ModernLoader();
            
            // 模拟加载过程
            loader.updateProgress(20, '正在加载样式...');
            
            setTimeout(() => {
                loader.updateProgress(40, '正在初始化主题...');
                initTheme();
            }, 200);
            
            setTimeout(() => {
                loader.updateProgress(60, '正在加载数学公式...');
                
                // 初始化MathJax
                if (typeof MathJax !== 'undefined') {
                    MathJax.typesetPromise().then(() => {
                        loader.updateProgress(80, '正在初始化练习...');
                        updateTotalScore();
                        
                        // 初始化可视化动画
                        initLinearAnimation();
                        initGaussAnimation();
                        
                        setTimeout(() => {
                            loader.complete();
                        }, 300);
                    });
                } else {
                    setTimeout(() => {
                        loader.updateProgress(80, '正在初始化练习...');
                        updateTotalScore();
                        
                        // 初始化可视化动画
                        initLinearAnimation();
                        initGaussAnimation();
                        
                        setTimeout(() => {
                            loader.complete();
                        }, 300);
                    }, 200);
                }
            }, 400);
            
            // 添加滚动监听
            window.addEventListener('scroll', updateScrollProgress);
            
            // 添加窗口大小变化监听
            window.addEventListener('resize', function() {
                setTimeout(() => {
                    redrawCanvases();
                }, 100);
            });
        });

        // 实际应用部分的交互函数
        function solveTrafficFlow() {
            const solutionDiv = document.getElementById('traffic-solution');
            solutionDiv.style.display = 'block';
            
            // 重新渲染数学公式
            if (window.MathJax) {
                window.MathJax.typeset([solutionDiv]);
            }
        }

        function calculateNutrition() {
            const proteinTarget = parseFloat(document.getElementById('protein-target').value);
            const fatTarget = parseFloat(document.getElementById('fat-target').value);
            const carbTarget = parseFloat(document.getElementById('carb-target').value);
            
            // 简化的营养配比计算（这里使用近似解法）
            // 实际应用中会使用更复杂的优化算法
            const rice = Math.max(0, (carbTarget - 50) / 79);
            const meat = Math.max(0, (fatTarget - 10) / 29);
            const vegetable = Math.max(0, 5 - rice);
            const egg = Math.max(0, (proteinTarget - 7.5*rice - 17*meat - 2*vegetable) / 13);
            
            // 更新顯示
            document.getElementById('rice-amount').textContent = `${rice.toFixed(1)} x 100g`;
            document.getElementById('meat-amount').textContent = `${meat.toFixed(1)} x 100g`;
            document.getElementById('vegetable-amount').textContent = `${vegetable.toFixed(1)} x 100g`;
            document.getElementById('egg-amount').textContent = `${egg.toFixed(1)} x 100g`;
            
            // 顯示結果
            const resultDiv = document.getElementById('nutrition-result');
            resultDiv.style.display = 'block';
            
            // 重新渲染数学公式
            if (window.MathJax) {
                window.MathJax.typeset([resultDiv]);
            }
        }

        function solveEconomicModel() {
            // 经济学投入产出模型的解（使用预计算的结果）
            const agriculture = 312.5;
            const industry = 437.5;
            const service = 468.75;
            
            // 更新顯示
            document.getElementById('agriculture-output').textContent = agriculture.toFixed(1);
            document.getElementById('industry-output').textContent = industry.toFixed(1);
            document.getElementById('service-output').textContent = service.toFixed(1);
            
            // 顯示結果
            const resultDiv = document.getElementById('economic-result');
            resultDiv.style.display = 'block';
        }

        function showTransform(transformType) {
            // 隐藏所有变换演示
            const demos = document.querySelectorAll('.transform-demo');
            demos.forEach(demo => demo.style.display = 'none');
            
            // 显示选中的变换
            const selectedDemo = document.getElementById('transform-' + transformType);
            if (selectedDemo) {
                selectedDemo.style.display = 'block';
                
                // 重新渲染数学公式
                if (window.MathJax) {
                    window.MathJax.typeset([selectedDemo]);
                }
            }
            
            // 更新按鈕狀態
            const buttons = document.querySelectorAll('.transform-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html>