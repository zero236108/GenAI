<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>线性代数课件 - 线性方程组</title>
    
    <!-- MathJax for LaTeX Math Rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        :root {
            /* 浅色主题变量 */
            --primary-gradient-start: #667eea;
            --primary-gradient-end: #764ba2;
            --bg-gradient-start: #667eea;
            --bg-gradient-end: #764ba2;
            --main-bg: white;
            --text-color: #333;
            --text-color-light: #6c757d;
            --nav-bg: #f8f9fa;
            --nav-border: #e9ecef;
            --button-border: #667eea;
            --button-text: #667eea;
            --button-hover-bg: #667eea;
            --button-hover-text: white;
            --concept-gradient-start: #f5f7fa;
            --concept-gradient-end: #c3cfe2;
            --definition-bg: white;
            --definition-border: #667eea;
            --theorem-bg: #fffbf0;
            --theorem-border: #ffd700;
            --example-bg: #f0f8ff;
            --example-border: #4169e1;
            --formula-bg: #f8f9fa;
            --formula-border: #dee2e6;
            --graph-bg: white;
            --interactive-gradient-start: #e0c3fc;
            --interactive-gradient-end: #8ec5fc;
            --exercise-bg: #fff5f5;
            --exercise-border: #ff6b6b;
            --tip-bg: #d4edda;
            --tip-border: #c3e6cb;
            --animation-bg: #f8f9fa;
            --canvas-axes: #333;
            --shadow-color: rgba(0,0,0,0.3);
            --shadow-light: rgba(0,0,0,0.1);
            --shadow-lighter: rgba(0,0,0,0.05);
        }

        [data-theme="dark"] {
            /* 深色主题变量 */
            --primary-gradient-start: #8b9ef3;
            --primary-gradient-end: #9d6fc9;
            --bg-gradient-start: #1a1a2e;
            --bg-gradient-end: #0f0f1e;
            --main-bg: #1e1e2e;
            --text-color: #e0e0e0;
            --text-color-light: #a0a0a0;
            --nav-bg: #2a2a3e;
            --nav-border: #3a3a4e;
            --button-border: #8b9ef3;
            --button-text: #8b9ef3;
            --button-hover-bg: #8b9ef3;
            --button-hover-text: #1e1e2e;
            --concept-gradient-start: #2a2a3e;
            --concept-gradient-end: #323248;
            --definition-bg: #2a2a3e;
            --definition-border: #8b9ef3;
            --theorem-bg: #3a3a2e;
            --theorem-border: #ffd700;
            --example-bg: #2a2e3a;
            --example-border: #6189f1;
            --formula-bg: #2a2a3e;
            --formula-border: #3a3a4e;
            --graph-bg: #2a2a3e;
            --interactive-gradient-start: #3a2e4a;
            --interactive-gradient-end: #2e3a4a;
            --exercise-bg: #3a2a2a;
            --exercise-border: #ff8b8b;
            --tip-bg: #2a3a2e;
            --tip-border: #4a5a4e;
            --animation-bg: #2a2a3e;
            --canvas-axes: #e0e0e0;
            --shadow-color: rgba(0,0,0,0.5);
            --shadow-light: rgba(0,0,0,0.3);
            --shadow-lighter: rgba(0,0,0,0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--main-bg);
            border-radius: 20px;
            box-shadow: 0 20px 60px var(--shadow-color);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-gradient-start) 0%, var(--primary-gradient-end) 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* 主题切换按钮 */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50px;
            padding: 10px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            color: white;
            font-size: 16px;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .theme-icon {
            font-size: 20px;
            transition: transform 0.3s;
        }

        .theme-toggle:hover .theme-icon {
            transform: rotate(20deg);
        }
        
        nav {
            background: var(--nav-bg);
            padding: 20px 40px;
            border-bottom: 2px solid var(--nav-border);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        nav button {
            padding: 10px 20px;
            background: var(--main-bg);
            border: 2px solid var(--button-border);
            border-radius: 25px;
            color: var(--button-text);
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        nav button:hover, nav button.active {
            background: var(--button-hover-bg);
            color: var(--button-hover-text);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }
        
        main {
            padding: 40px;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .concept-box {
            background: linear-gradient(135deg, var(--concept-gradient-start) 0%, var(--concept-gradient-end) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 15px var(--shadow-light);
        }
        
        .concept-box h2 {
            color: var(--button-border);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .definition {
            background: var(--definition-bg);
            border-left: 5px solid var(--definition-border);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 10px var(--shadow-lighter);
        }
        
        .definition h3 {
            color: var(--definition-border);
            margin-bottom: 10px;
        }
        
        .theorem {
            background: var(--theorem-bg);
            border: 2px solid var(--theorem-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .theorem::before {
            content: "定理";
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--theorem-border);
            color: #333;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .example {
            background: var(--example-bg);
            border: 2px solid var(--example-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .example::before {
            content: "例题";
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--example-border);
            color: white;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .formula {
            background: var(--formula-bg);
            border: 1px solid var(--formula-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            max-width: 100%;
        }

        /* 矩阵样式 */
        .matrix-display {
            background: var(--formula-bg);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .matrix-item {
            text-align: center;
        }

        .matrix-label {
            font-weight: bold;
            color: var(--button-border);
            margin-bottom: 10px;
        }

        /* 向量可视化容器 */
        .vector-visualization {
            background: var(--graph-bg);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        .vector-visualization h3 {
            color: var(--button-border);
            margin-bottom: 20px;
            text-align: center;
        }

        /* 交互式矩阵输入 */
        .matrix-input-container {
            background: linear-gradient(135deg, var(--interactive-gradient-start) 0%, var(--interactive-gradient-end) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .matrix-input {
            display: grid;
            gap: 10px;
            margin: 20px 0;
        }

        .matrix-input input {
            padding: 10px;
            border: 2px solid var(--formula-border);
            border-radius: 5px;
            text-align: center;
            font-size: 1em;
            background: var(--main-bg);
            color: var(--text-color);
        }

        .matrix-input input:focus {
            outline: none;
            border-color: var(--button-border);
            box-shadow: 0 0 10px rgba(102,126,234,0.2);
        }

        /* 步骤展示 */
        .step-container {
            background: var(--main-bg);
            border: 2px solid var(--button-border);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .step-number {
            background: var(--button-border);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .step-title {
            color: var(--button-border);
            font-weight: bold;
            font-size: 1.1em;
        }

        /* 按钮样式 */
        .action-btn {
            padding: 12px 25px;
            background: var(--button-border);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .action-btn:hover {
            background: var(--primary-gradient-end);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }

        /* 结果显示 */
        .result-display {
            background: var(--tip-bg);
            border: 2px solid var(--tip-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .result-display.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 向量运算可视化 */
        .vector-operation {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .vector-box {
            background: var(--formula-bg);
            border: 2px solid var(--formula-border);
            border-radius: 10px;
            padding: 15px;
            min-width: 80px;
            text-align: center;
        }

        .operator {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--button-border);
        }

        canvas {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        
        .interactive-demo {
            background: linear-gradient(135deg, var(--interactive-gradient-start) 0%, var(--interactive-gradient-end) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }
        
        .interactive-demo h3 {
            color: var(--text-color);
            margin-bottom: 20px;
        }
        
        .tip {
            background: var(--tip-bg);
            border: 1px solid var(--tip-border);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            display: flex;
            align-items: center;
        }
        
        .tip::before {
            content: "💡";
            font-size: 1.5em;
            margin-right: 10px;
        }

        /* 练习题样式 */
        .exercise {
            background: var(--exercise-bg);
            border: 2px solid var(--exercise-border);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h3 {
            color: var(--exercise-border);
            margin-bottom: 15px;
        }
        
        footer {
            background: var(--nav-bg);
            text-align: center;
            padding: 20px;
            border-top: 2px solid var(--nav-border);
            color: var(--text-color-light);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }
            
            main {
                padding: 20px;
            }
            
            nav {
                padding: 15px 20px;
            }
            
            nav button {
                font-size: 0.9em;
                padding: 8px 15px;
            }

            .theme-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 14px;
            }

            .matrix-display {
                flex-direction: column;
            }

            .vector-operation {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>线性代数 - 第一章</h1>
            <div class="subtitle">线性方程组与矩阵基础</div>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span class="theme-icon" id="themeIcon">🌙</span>
                <span id="themeText">深色模式</span>
            </button>
        </header>
        
        <nav>
            <button class="active" onclick="showSection('equations')">线性方程组</button>
            <button onclick="showSection('matrix')">矩阵与行化简</button>
            <button onclick="showSection('vectors')">向量方程</button>
            <button onclick="showSection('matrix-eq')">矩阵方程</button>
            <button onclick="showSection('linear-dep')">线性相关性</button>
            <button onclick="showSection('practice')">练习与应用</button>
        </nav>
        
        <main>
            <!-- 线性方程组部分 -->
            <div class="section active" id="equations">
                <div class="concept-box">
                    <h2>📚 线性方程组基础</h2>
                    <p>线性方程组是线性代数的核心内容，它在工程、经济、物理等领域有着广泛的应用。本节将介绍线性方程组的基本概念和求解方法。</p>
                </div>
                
                <div class="definition">
                    <h3>定义 1.1：线性方程</h3>
                    <p>包含变量 \(x_1, x_2, \ldots, x_n\) 的线性方程是形如：</p>
                    <div class="formula">
                        \[ a_1x_1 + a_2x_2 + \cdots + a_nx_n = b \]
                    </div>
                    <p>其中 \(a_1, a_2, \ldots, a_n\) 和 \(b\) 均为实数，称为系数和常数项。</p>
                </div>
                
                <div class="example">
                    <h3>线性方程组的三种解的情况</h3>
                    <p>考虑二元线性方程组（几何上表示两条直线）：</p>
                    
                    <div class="vector-visualization">
                        <canvas id="equationCanvas" width="600" height="300"></canvas>
                    </div>
                    
                    <div class="step-container">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <div class="step-title">唯一解</div>
                        </div>
                        <p>两条直线相交于一点</p>
                        <div class="formula">
                            \[ \begin{cases} x_1 - 2x_2 = -1 \\ -x_1 + 3x_2 = 3 \end{cases} \]
                        </div>
                    </div>
                    
                    <div class="step-container">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <div class="step-title">无穷多解</div>
                        </div>
                        <p>两条直线重合</p>
                        <div class="formula">
                            \[ \begin{cases} x_1 - 2x_2 = -1 \\ -x_1 + 2x_2 = 1 \end{cases} \]
                        </div>
                    </div>
                    
                    <div class="step-container">
                        <div class="step-header">
                            <div class="step-number">3</div>
                            <div class="step-title">无解</div>
                        </div>
                        <p>两条直线平行</p>
                        <div class="formula">
                            \[ \begin{cases} x_1 - 2x_2 = -1 \\ x_1 - 2x_2 = 3 \end{cases} \]
                        </div>
                    </div>
                </div>
                
                <div class="tip">
                    线性方程组的解有且仅有三种情况：无解、唯一解、无穷多解。
                </div>
            </div>
            
            <!-- 矩阵与行化简部分 -->
            <div class="section" id="matrix">
                <div class="concept-box">
                    <h2>🔧 矩阵与行化简</h2>
                    <p>矩阵是表示和求解线性方程组的强有力工具。通过矩阵的行化简，我们可以系统地求解线性方程组。</p>
                </div>
                
                <div class="definition">
                    <h3>矩阵表示法</h3>
                    <p>线性方程组可以用矩阵简洁地表示：</p>
                    <div class="matrix-display">
                        <div class="matrix-item">
                            <div class="matrix-label">线性方程组</div>
                            <div class="formula">
                                \[ \begin{cases} 
                                x + 2y = 3 \\ 
                                3x + 4y = 5 
                                \end{cases} \]
                            </div>
                        </div>
                        <div class="operator">→</div>
                        <div class="matrix-item">
                            <div class="matrix-label">系数矩阵</div>
                            <div class="formula">
                                \[ \begin{bmatrix} 1 & 2 \\ 3 & 4 \end{bmatrix} \]
                            </div>
                        </div>
                        <div class="operator">→</div>
                        <div class="matrix-item">
                            <div class="matrix-label">增广矩阵</div>
                            <div class="formula">
                                \[ \begin{bmatrix} 1 & 2 & 3 \\ 3 & 4 & 5 \end{bmatrix} \]
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <h3>高斯消元法演示</h3>
                    <p>通过初等行变换将矩阵化为行阶梯形</p>
                    
                    <div class="matrix-input-container">
                        <div id="gaussMatrix" class="matrix-display">
                            <div class="formula">
                                \[ \begin{bmatrix} 1 & 2 & 3 \\ 3 & 4 & 5 \end{bmatrix} \]
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="action-btn" onclick="stepGaussElimination()">下一步</button>
                            <button class="action-btn" onclick="resetGaussElimination()">重置</button>
                        </div>
                        <div id="gaussStep" class="step-title" style="margin-top: 20px;"></div>
                    </div>
                </div>
                
                <div class="theorem">
                    <h3>初等行变换</h3>
                    <p>三种基本的行变换操作：</p>
                    <ol style="margin-left: 20px;">
                        <li><strong>倍加变换：</strong>把某一行扩大k倍（k≠0）后加到另一行</li>
                        <li><strong>对换变换：</strong>把两行互换</li>
                        <li><strong>倍乘变换：</strong>把某一行的所有元素乘以同一个非零数k</li>
                    </ol>
                </div>
            </div>
            
            <!-- 向量方程部分 -->
            <div class="section" id="vectors">
                <div class="concept-box">
                    <h2>📐 向量方程</h2>
                    <p>向量是线性代数的基本概念，向量方程提供了理解线性方程组的几何视角。</p>
                </div>
                
                <div class="definition">
                    <h3>n维向量</h3>
                    <p>n个有序数 \(a_1, a_2, \ldots, a_n\) 组成的数组称为n维向量：</p>
                    <div class="vector-operation">
                        <div class="vector-box">
                            <div class="matrix-label">行向量</div>
                            \[ (a_1, a_2, \ldots, a_n) \]
                        </div>
                        <div class="vector-box">
                            <div class="matrix-label">列向量</div>
                            \[ \begin{bmatrix} a_1 \\ a_2 \\ \vdots \\ a_n \end{bmatrix} \]
                        </div>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <h3>向量运算可视化</h3>
                    <div class="vector-visualization">
                        <canvas id="vectorCanvas" width="600" height="400"></canvas>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="action-btn" onclick="animateVectorAddition()">向量加法</button>
                        <button class="action-btn" onclick="animateScalarMultiplication()">数乘</button>
                        <button class="action-btn" onclick="animateLinearCombination()">线性组合</button>
                    </div>
                </div>
                
                <div class="example">
                    <h3>实际应用：颜色混合</h3>
                    <p>RGB颜色模型中，颜色可以表示为三维向量：</p>
                    <div class="vector-operation">
                        <div class="vector-box" style="background: rgb(255,0,0); color: white;">
                            红色<br>\[ \begin{bmatrix} 255 \\ 0 \\ 0 \end{bmatrix} \]
                        </div>
                        <div class="operator">+</div>
                        <div class="vector-box" style="background: rgb(0,255,0); color: black;">
                            绿色<br>\[ \begin{bmatrix} 0 \\ 255 \\ 0 \end{bmatrix} \]
                        </div>
                        <div class="operator">=</div>
                        <div class="vector-box" style="background: rgb(255,255,0); color: black;">
                            黄色<br>\[ \begin{bmatrix} 255 \\ 255 \\ 0 \end{bmatrix} \]
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 矩阵方程部分 -->
            <div class="section" id="matrix-eq">
                <div class="concept-box">
                    <h2>📊 矩阵方程</h2>
                    <p>矩阵方程 Ax = b 提供了统一的框架来理解和求解线性方程组。</p>
                </div>
                
                <div class="theorem">
                    <h3>矩阵乘法的定义</h3>
                    <p>若A是m×n矩阵，其列为 \(a_1, a_2, \ldots, a_n\)，x为n维向量，则：</p>
                    <div class="formula">
                        \[ Ax = x_1a_1 + x_2a_2 + \cdots + x_na_n \]
                    </div>
                    <p>即 Ax 是 A 的各列以 x 中对应元素为权的线性组合。</p>
                </div>
                
                <div class="interactive-demo">
                    <h3>矩阵乘法计算器</h3>
                    <div class="matrix-input-container">
                        <p>输入 2×2 矩阵 A 和向量 x：</p>
                        <div style="display: flex; justify-content: center; gap: 20px; align-items: center;">
                            <div>
                                <div class="matrix-label">矩阵 A</div>
                                <div class="matrix-input" style="grid-template-columns: repeat(2, 60px);">
                                    <input type="number" id="a11" value="1">
                                    <input type="number" id="a12" value="2">
                                    <input type="number" id="a21" value="3">
                                    <input type="number" id="a22" value="4">
                                </div>
                            </div>
                            <div class="operator">×</div>
                            <div>
                                <div class="matrix-label">向量 x</div>
                                <div class="matrix-input" style="grid-template-columns: 60px;">
                                    <input type="number" id="x1" value="2">
                                    <input type="number" id="x2" value="1">
                                </div>
                            </div>
                            <div class="operator">=</div>
                            <div>
                                <div class="matrix-label">结果</div>
                                <div id="matrixResult" class="formula">
                                    \[ \begin{bmatrix} ? \\ ? \end{bmatrix} \]
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="action-btn" onclick="calculateMatrixProduct()">计算</button>
                        </div>
                    </div>
                </div>
                
                <div class="tip">
                    方程 Ax = b 有解当且仅当 b 是 A 的各列的线性组合。
                </div>
            </div>
            
            <!-- 线性相关性部分 -->
            <div class="section" id="linear-dep">
                <div class="concept-box">
                    <h2>🔗 线性相关与线性无关</h2>
                    <p>线性相关性是理解向量组结构的关键概念。</p>
                </div>
                
                <div class="definition">
                    <h3>线性相关的定义</h3>
                    <p>设有n维向量组 \(\alpha_1, \alpha_2, \ldots, \alpha_m\)，如果存在不全为零的数 \(k_1, k_2, \ldots, k_m\)，使得：</p>
                    <div class="formula">
                        \[ k_1\alpha_1 + k_2\alpha_2 + \cdots + k_m\alpha_m = 0 \]
                    </div>
                    <p>则称向量组线性相关；否则称为线性无关。</p>
                </div>
                
                <div class="theorem">
                    <h3>线性相关性的几何意义</h3>
                    <div class="step-container">
                        <div class="step-header">
                            <div class="step-number">2D</div>
                            <div class="step-title">平面中的向量</div>
                        </div>
                        <p>两个向量线性相关 ⟺ 它们共线（平行或反向）</p>
                    </div>
                    <div class="step-container">
                        <div class="step-header">
                            <div class="step-number">3D</div>
                            <div class="step-title">空间中的向量</div>
                        </div>
                        <p>三个向量线性相关 ⟺ 它们共面</p>
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <h3>线性相关性判断</h3>
                    <div class="vector-visualization">
                        <canvas id="linearDepCanvas" width="600" height="400"></canvas>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="action-btn" onclick="showLinearIndependent()">线性无关示例</button>
                        <button class="action-btn" onclick="showLinearDependent()">线性相关示例</button>
                    </div>
                </div>
            </div>
            
            <!-- 练习与应用部分 -->
            <div class="section" id="practice">
                <div class="concept-box">
                    <h2>✏️ 练习与应用</h2>
                    <p>通过练习巩固所学概念，加深理解。</p>
                </div>
                
                <div class="exercise">
                    <h3>练习 1：求解线性方程组</h3>
                    <p>使用高斯消元法求解：</p>
                    <div class="formula">
                        \[ \begin{cases}
                        x + 2y - z = 3 \\
                        2x - y + z = 1 \\
                        3x + y = 4
                        \end{cases} \]
                    </div>
                    <div class="matrix-input-container">
                        <button class="action-btn" onclick="toggleSolution('sol1')">显示解答</button>
                        <div id="sol1" class="result-display">
                            <p><strong>步骤 1：</strong>写出增广矩阵</p>
                            <div class="formula">
                                \[ \begin{bmatrix}
                                1 & 2 & -1 & 3 \\
                                2 & -1 & 1 & 1 \\
                                3 & 1 & 0 & 4
                                \end{bmatrix} \]
                            </div>
                            <p><strong>步骤 2：</strong>行化简得到行阶梯形</p>
                            <p><strong>解：</strong>\(x = 1, y = 1, z = 0\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h3>练习 2：判断向量组的线性相关性</h3>
                    <p>判断下列向量组是否线性相关：</p>
                    <div class="formula">
                        \[ v_1 = \begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix}, \quad
                           v_2 = \begin{bmatrix} 2 \\ 4 \\ 6 \end{bmatrix}, \quad
                           v_3 = \begin{bmatrix} 1 \\ 1 \\ 1 \end{bmatrix} \]
                    </div>
                    <div class="matrix-input-container">
                        <button class="action-btn" onclick="toggleSolution('sol2')">显示解答</button>
                        <div id="sol2" class="result-display">
                            <p><strong>分析：</strong>注意到 \(v_2 = 2v_1\)，因此 \(v_1\) 和 \(v_2\) 线性相关。</p>
                            <p><strong>结论：</strong>向量组线性相关，因为其中包含线性相关的部分组。</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h3>应用：经济模型</h3>
                    <p>某工厂生产两种产品，设产品A生产x单位，产品B生产y单位。已知：</p>
                    <ul style="margin-left: 20px;">
                        <li>原料限制：2x + 3y ≤ 100</li>
                        <li>人工限制：3x + 2y ≤ 90</li>
                        <li>设备限制：x + y ≤ 35</li>
                    </ul>
                    <p>求最优生产方案（使用线性规划求解）。</p>
                    <div class="vector-visualization">
                        <canvas id="lpCanvas" width="600" height="400"></canvas>
                    </div>
                </div>
            </div>
        </main>
        
        <footer>
            <p>© 2025 线性代数交互式课件 | 基于现代Web技术构建</p>
            <p>建议使用Chrome、Firefox或Edge浏览器获得最佳体验</p>
        </footer>
    </div>
    
    <script>
        // 配置 MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            options: {
                enableMenu: false
            },
            chtml: {
                displayAlign: 'left',
                displayIndent: '0',
                scale: 1,
                minScale: 0.5,
                maxScale: 2
            }
        };

        // 主题切换功能
        let currentTheme = 'light';

        function initTheme() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                currentTheme = 'dark';
            }
            applyTheme(currentTheme);
        }

        function applyTheme(theme) {
            currentTheme = theme;
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.textContent = '☀️';
                themeText.textContent = '浅色模式';
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.textContent = '🌙';
                themeText.textContent = '深色模式';
            }
            
            // 重新绘制所有canvas
            drawEquationGraphs();
            drawVectorCanvas();
            drawLinearDepCanvas();
            drawLPCanvas();
        }

        function toggleTheme() {
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme(newTheme);
        }

        // 切换显示不同章节
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            
            const buttons = document.querySelectorAll('nav button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // 重新渲染数学公式
            if (window.MathJax) {
                window.MathJax.typeset();
            }
            
            // 初始化该章节的可视化
            if (sectionId === 'equations') {
                drawEquationGraphs();
            } else if (sectionId === 'vectors') {
                drawVectorCanvas();
            } else if (sectionId === 'linear-dep') {
                drawLinearDepCanvas();
            } else if (sectionId === 'practice') {
                drawLPCanvas();
            }
        }

        // 高斯消元法演示
        let gaussStep = 0;
        const gaussSteps = [
            { matrix: '\\begin{bmatrix} 1 & 2 & 3 \\\\ 3 & 4 & 5 \\end{bmatrix}', desc: '初始增广矩阵' },
            { matrix: '\\begin{bmatrix} 1 & 2 & 3 \\\\ 0 & -2 & -4 \\end{bmatrix}', desc: 'R₂ - 3R₁ → R₂' },
            { matrix: '\\begin{bmatrix} 1 & 2 & 3 \\\\ 0 & 1 & 2 \\end{bmatrix}', desc: 'R₂ ÷ (-2) → R₂' },
            { matrix: '\\begin{bmatrix} 1 & 0 & -1 \\\\ 0 & 1 & 2 \\end{bmatrix}', desc: 'R₁ - 2R₂ → R₁' }
        ];

        function stepGaussElimination() {
            gaussStep = (gaussStep + 1) % gaussSteps.length;
            updateGaussDisplay();
        }

        function resetGaussElimination() {
            gaussStep = 0;
            updateGaussDisplay();
        }

        function updateGaussDisplay() {
            const step = gaussSteps[gaussStep];
            document.getElementById('gaussMatrix').innerHTML = `
                <div class="formula">\\[ ${step.matrix} \\]</div>
            `;
            document.getElementById('gaussStep').textContent = step.desc;
            
            if (window.MathJax) {
                window.MathJax.typeset();
            }
        }

        // 矩阵乘法计算
        function calculateMatrixProduct() {
            const a11 = parseFloat(document.getElementById('a11').value) || 0;
            const a12 = parseFloat(document.getElementById('a12').value) || 0;
            const a21 = parseFloat(document.getElementById('a21').value) || 0;
            const a22 = parseFloat(document.getElementById('a22').value) || 0;
            const x1 = parseFloat(document.getElementById('x1').value) || 0;
            const x2 = parseFloat(document.getElementById('x2').value) || 0;
            
            const result1 = a11 * x1 + a12 * x2;
            const result2 = a21 * x1 + a22 * x2;
            
            document.getElementById('matrixResult').innerHTML = `
                \\[ \\begin{bmatrix} ${result1} \\\\ ${result2} \\end{bmatrix} \\]
            `;
            
            if (window.MathJax) {
                window.MathJax.typeset();
            }
        }

        // 显示/隐藏解答
        function toggleSolution(solutionId) {
            const solution = document.getElementById(solutionId);
            solution.classList.toggle('show');
        }

        // 绘制线性方程组图形
        function drawEquationGraphs() {
            const canvas = document.getElementById('equationCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // 清空画布
            ctx.clearRect(0, 0, width, height);
            
            // 绘制三个子图（唯一解、无穷多解、无解）
            const subWidth = width / 3;
            
            // 获取主题颜色
            const isDark = currentTheme === 'dark';
            const axesColor = isDark ? '#e0e0e0' : '#333';
            const lineColor1 = '#667eea';
            const lineColor2 = '#ff6b6b';
            
            // 绘制每个子图
            for (let i = 0; i < 3; i++) {
                const centerX = subWidth * i + subWidth / 2;
                const centerY = height / 2;
                
                // 绘制坐标轴
                ctx.strokeStyle = axesColor;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(centerX - 80, centerY);
                ctx.lineTo(centerX + 80, centerY);
                ctx.moveTo(centerX, centerY - 80);
                ctx.lineTo(centerX, centerY + 80);
                ctx.stroke();
                
                // 绘制直线
                ctx.lineWidth = 2;
                
                if (i === 0) {
                    // 唯一解：两条相交直线
                    ctx.strokeStyle = lineColor1;
                    ctx.beginPath();
                    ctx.moveTo(centerX - 80, centerY + 40);
                    ctx.lineTo(centerX + 80, centerY - 40);
                    ctx.stroke();
                    
                    ctx.strokeStyle = lineColor2;
                    ctx.beginPath();
                    ctx.moveTo(centerX - 80, centerY - 60);
                    ctx.lineTo(centerX + 80, centerY + 20);
                    ctx.stroke();
                    
                    // 标记交点
                    ctx.fillStyle = '#28a745';
                    ctx.beginPath();
                    ctx.arc(centerX + 20, centerY - 10, 5, 0, Math.PI * 2);
                    ctx.fill();
                } else if (i === 1) {
                    // 无穷多解：两条重合直线
                    ctx.strokeStyle = lineColor1;
                    ctx.beginPath();
                    ctx.moveTo(centerX - 80, centerY + 40);
                    ctx.lineTo(centerX + 80, centerY - 40);
                    ctx.stroke();
                    
                    ctx.strokeStyle = lineColor2;
                    ctx.setLineDash([5, 5]);
                    ctx.beginPath();
                    ctx.moveTo(centerX - 80, centerY + 40);
                    ctx.lineTo(centerX + 80, centerY - 40);
                    ctx.stroke();
                    ctx.setLineDash([]);
                } else {
                    // 无解：两条平行直线
                    ctx.strokeStyle = lineColor1;
                    ctx.beginPath();
                    ctx.moveTo(centerX - 80, centerY + 20);
                    ctx.lineTo(centerX + 80, centerY + 20);
                    ctx.stroke();
                    
                    ctx.strokeStyle = lineColor2;
                    ctx.beginPath();
                    ctx.moveTo(centerX - 80, centerY - 20);
                    ctx.lineTo(centerX + 80, centerY - 20);
                    ctx.stroke();
                }
                
                // 添加标签
                ctx.fillStyle = axesColor;
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                const labels = ['唯一解', '无穷多解', '无解'];
                ctx.fillText(labels[i], centerX, height - 20);
            }
        }

        // 绘制向量画布
        function drawVectorCanvas() {
            const canvas = document.getElementById('vectorCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // 清空画布
            ctx.clearRect(0, 0, width, height);
            
            // 获取主题颜色
            const isDark = currentTheme === 'dark';
            const axesColor = isDark ? '#e0e0e0' : '#333';
            
            // 绘制坐标系
            ctx.strokeStyle = axesColor;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(50, centerY);
            ctx.lineTo(width - 50, centerY);
            ctx.moveTo(centerX, 50);
            ctx.lineTo(centerX, height - 50);
            ctx.stroke();
            
            // 绘制箭头
            ctx.beginPath();
            ctx.moveTo(width - 50, centerY);
            ctx.lineTo(width - 60, centerY - 5);
            ctx.lineTo(width - 60, centerY + 5);
            ctx.closePath();
            ctx.fill();
            
            ctx.beginPath();
            ctx.moveTo(centerX, 50);
            ctx.lineTo(centerX - 5, 60);
            ctx.lineTo(centerX + 5, 60);
            ctx.closePath();
            ctx.fill();
            
            // 绘制两个示例向量
            drawVector(ctx, centerX, centerY, 100, -60, '#667eea', 'v₁');
            drawVector(ctx, centerX, centerY, 80, 100, '#ff6b6b', 'v₂');
        }

        function drawVector(ctx, startX, startY, dx, dy, color, label) {
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 3;
            
            // 绘制向量线
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX + dx, startY + dy);
            ctx.stroke();
            
            // 绘制箭头
            const angle = Math.atan2(dy, dx);
            const arrowLength = 10;
            ctx.beginPath();
            ctx.moveTo(startX + dx, startY + dy);
            ctx.lineTo(
                startX + dx - arrowLength * Math.cos(angle - Math.PI / 6),
                startY + dy - arrowLength * Math.sin(angle - Math.PI / 6)
            );
            ctx.lineTo(
                startX + dx - arrowLength * Math.cos(angle + Math.PI / 6),
                startY + dy - arrowLength * Math.sin(angle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fill();
            
            // 添加标签
            ctx.font = '16px Arial';
            ctx.fillText(label, startX + dx + 10, startY + dy);
        }

        // 向量动画
        function animateVectorAddition() {
            const canvas = document.getElementById('vectorCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let t = 0;
            
            function animate() {
                if (t <= 1) {
                    drawVectorCanvas();
                    
                    // 动画显示向量和
                    const centerX = canvas.width / 2;
                    const centerY = canvas.height / 2;
                    
                    ctx.strokeStyle = '#28a745';
                    ctx.setLineDash([5, 5]);
                    ctx.lineWidth = 2;
                    
                    // v1平移到v2末端
                    ctx.beginPath();
                    ctx.moveTo(centerX + 80 * t, centerY + 100 * t);
                    ctx.lineTo(centerX + 80 * t + 100, centerY + 100 * t - 60);
                    ctx.stroke();
                    
                    // 结果向量
                    if (t > 0.5) {
                        drawVector(ctx, centerX, centerY, 180, 40, '#28a745', 'v₁ + v₂');
                    }
                    
                    ctx.setLineDash([]);
                    
                    t += 0.02;
                    requestAnimationFrame(animate);
                }
            }
            animate();
        }

        function animateScalarMultiplication() {
            const canvas = document.getElementById('vectorCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let scale = 1;
            let growing = true;
            
            function animate() {
                drawVectorCanvas();
                
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                
                // 显示缩放的向量
                drawVector(ctx, centerX, centerY, 100 * scale, -60 * scale, '#9d6fc9', `${scale.toFixed(1)}v₁`);
                
                if (growing) {
                    scale += 0.02;
                    if (scale >= 2) growing = false;
                } else {
                    scale -= 0.02;
                    if (scale <= 0.5) return;
                }
                
                requestAnimationFrame(animate);
            }
            animate();
        }

        function animateLinearCombination() {
            const canvas = document.getElementById('vectorCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let t = 0;
            
            function animate() {
                if (t <= 1) {
                    drawVectorCanvas();
                    
                    const centerX = canvas.width / 2;
                    const centerY = canvas.height / 2;
                    
                    // 显示线性组合 2v₁ - 0.5v₂
                    const a = 2 * t;
                    const b = -0.5 * t;
                    
                    drawVector(ctx, centerX, centerY, 100 * a, -60 * a, '#667eea88', `${a.toFixed(1)}v₁`);
                    drawVector(ctx, centerX, centerY, 80 * b, 100 * b, '#ff6b6b88', `${b.toFixed(1)}v₂`);
                    
                    // 结果向量
                    drawVector(ctx, centerX, centerY, 100 * a + 80 * b, -60 * a + 100 * b, '#28a745', '线性组合');
                    
                    t += 0.02;
                    requestAnimationFrame(animate);
                }
            }
            animate();
        }

        // 绘制线性相关性演示
        function drawLinearDepCanvas() {
            const canvas = document.getElementById('linearDepCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // 清空画布
            ctx.clearRect(0, 0, width, height);
            
            // 获取主题颜色
            const isDark = currentTheme === 'dark';
            const axesColor = isDark ? '#e0e0e0' : '#333';
            
            // 绘制3D坐标系
            ctx.strokeStyle = axesColor;
            ctx.lineWidth = 2;
            
            // x轴
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + 150, centerY);
            ctx.stroke();
            
            // y轴
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX, centerY - 150);
            ctx.stroke();
            
            // z轴（斜向）
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX - 75, centerY - 75);
            ctx.stroke();
            
            // 添加轴标签
            ctx.fillStyle = axesColor;
            ctx.font = '14px Arial';
            ctx.fillText('x', centerX + 160, centerY);
            ctx.fillText('y', centerX, centerY - 160);
            ctx.fillText('z', centerX - 85, centerY - 85);
        }

        function showLinearIndependent() {
            const canvas = document.getElementById('linearDepCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            drawLinearDepCanvas();
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            // 绘制三个线性无关的向量（不共面）
            drawVector3D(ctx, centerX, centerY, 100, 0, 0, '#667eea', 'v₁');
            drawVector3D(ctx, centerX, centerY, 0, 100, 0, '#ff6b6b', 'v₂');
            drawVector3D(ctx, centerX, centerY, 50, 50, 80, '#28a745', 'v₃');
            
            // 添加说明
            ctx.fillStyle = currentTheme === 'dark' ? '#e0e0e0' : '#333';
            ctx.font = '16px Arial';
            ctx.fillText('线性无关：三个向量不共面', centerX - 100, 30);
        }

        function showLinearDependent() {
            const canvas = document.getElementById('linearDepCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            drawLinearDepCanvas();
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            // 绘制三个线性相关的向量（共面）
            drawVector3D(ctx, centerX, centerY, 100, 0, 0, '#667eea', 'v₁');
            drawVector3D(ctx, centerX, centerY, 0, 100, 0, '#ff6b6b', 'v₂');
            drawVector3D(ctx, centerX, centerY, 50, 50, 0, '#ffc107', 'v₃ = 0.5v₁ + 0.5v₂');
            
            // 绘制平面
            ctx.fillStyle = 'rgba(102, 126, 234, 0.1)';
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + 100, centerY);
            ctx.lineTo(centerX + 100, centerY - 100);
            ctx.lineTo(centerX, centerY - 100);
            ctx.closePath();
            ctx.fill();
            
            // 添加说明
            ctx.fillStyle = currentTheme === 'dark' ? '#e0e0e0' : '#333';
            ctx.font = '16px Arial';
            ctx.fillText('线性相关：三个向量共面', centerX - 100, 30);
        }

        function drawVector3D(ctx, startX, startY, dx, dy, dz, color, label) {
            // 转换3D坐标到2D（简单投影）
            const x2d = startX + dx - dz * 0.5;
            const y2d = startY - dy - dz * 0.5;
            
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 3;
            
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(x2d, y2d);
            ctx.stroke();
            
            // 绘制箭头
            const angle = Math.atan2(startY - y2d, x2d - startX);
            const arrowLength = 10;
            ctx.beginPath();
            ctx.moveTo(x2d, y2d);
            ctx.lineTo(
                x2d - arrowLength * Math.cos(angle - Math.PI / 6),
                y2d + arrowLength * Math.sin(angle - Math.PI / 6)
            );
            ctx.lineTo(
                x2d - arrowLength * Math.cos(angle + Math.PI / 6),
                y2d + arrowLength * Math.sin(angle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fill();
            
            // 添加标签
            ctx.font = '14px Arial';
            ctx.fillText(label, x2d + 10, y2d);
        }

        // 绘制线性规划图
        function drawLPCanvas() {
            const canvas = document.getElementById('lpCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const margin = 50;
            const scale = 4;
            
            // 清空画布
            ctx.clearRect(0, 0, width, height);
            
            // 获取主题颜色
            const isDark = currentTheme === 'dark';
            const axesColor = isDark ? '#e0e0e0' : '#333';
            
            // 绘制坐标轴
            ctx.strokeStyle = axesColor;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(margin, height - margin);
            ctx.lineTo(width - margin, height - margin);
            ctx.moveTo(margin, height - margin);
            ctx.lineTo(margin, margin);
            ctx.stroke();
            
            // 添加刻度
            ctx.fillStyle = axesColor;
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            for (let i = 0; i <= 50; i += 10) {
                const x = margin + i * scale;
                ctx.beginPath();
                ctx.moveTo(x, height - margin);
                ctx.lineTo(x, height - margin + 5);
                ctx.stroke();
                ctx.fillText(i, x, height - margin + 20);
            }
            
            ctx.textAlign = 'right';
            for (let i = 0; i <= 50; i += 10) {
                const y = height - margin - i * scale;
                ctx.beginPath();
                ctx.moveTo(margin, y);
                ctx.lineTo(margin - 5, y);
                ctx.stroke();
                ctx.fillText(i, margin - 10, y + 5);
            }
            
            // 绘制约束条件
            ctx.lineWidth = 2;
            
            // 2x + 3y ≤ 100
            ctx.strokeStyle = '#667eea';
            ctx.beginPath();
            ctx.moveTo(margin, height - margin - 100/3 * scale);
            ctx.lineTo(margin + 50 * scale, height - margin);
            ctx.stroke();
            
            // 3x + 2y ≤ 90
            ctx.strokeStyle = '#ff6b6b';
            ctx.beginPath();
            ctx.moveTo(margin, height - margin - 45 * scale);
            ctx.lineTo(margin + 30 * scale, height - margin);
            ctx.stroke();
            
            // x + y ≤ 35
            ctx.strokeStyle = '#28a745';
            ctx.beginPath();
            ctx.moveTo(margin, height - margin - 35 * scale);
            ctx.lineTo(margin + 35 * scale, height - margin);
            ctx.stroke();
            
            // 绘制可行域
            ctx.fillStyle = 'rgba(102, 126, 234, 0.2)';
            ctx.beginPath();
            ctx.moveTo(margin, height - margin);
            ctx.lineTo(margin, height - margin - 35 * scale);
            ctx.lineTo(margin + 10 * scale, height - margin - 25 * scale);
            ctx.lineTo(margin + 20 * scale, height - margin - 15 * scale);
            ctx.lineTo(margin + 30 * scale, height - margin);
            ctx.closePath();
            ctx.fill();
            
            // 标记最优解
            const optX = 20 * scale + margin;
            const optY = height - margin - 15 * scale;
            ctx.fillStyle = '#dc3545';
            ctx.beginPath();
            ctx.arc(optX, optY, 5, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('最优解(20, 15)', optX + 10, optY - 10);
            
            // 添加图例
            ctx.font = '14px Arial';
            ctx.textAlign = 'left';
            const legendX = width - 200;
            const legendY = 50;
            
            ctx.fillStyle = '#667eea';
            ctx.fillRect(legendX, legendY, 20, 3);
            ctx.fillStyle = axesColor;
            ctx.fillText('2x + 3y ≤ 100', legendX + 30, legendY + 5);
            
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(legendX, legendY + 20, 20, 3);
            ctx.fillStyle = axesColor;
            ctx.fillText('3x + 2y ≤ 90', legendX + 30, legendY + 25);
            
            ctx.fillStyle = '#28a745';
            ctx.fillRect(legendX, legendY + 40, 20, 3);
            ctx.fillStyle = axesColor;
            ctx.fillText('x + y ≤ 35', legendX + 30, legendY + 45);
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            
            // 初始化MathJax
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise();
            }
            
            // 初始化第一个章节的可视化
            drawEquationGraphs();
        });
    </script>
</body>
</html>