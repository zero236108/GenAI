<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜ç­‰æ•°å­¦è¯¾ä»¶ - å®šç§¯åˆ†çš„å‡ ä½•æ„ä¹‰</title>
    
    <!-- MathJax for LaTeX Math Rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        nav {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        nav button {
            padding: 10px 20px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 25px;
            color: #667eea;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        nav button:hover, nav button.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }
        
        main {
            padding: 40px;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .concept-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .concept-box h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .definition {
            background: white;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .definition h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .theorem {
            background: #fffbf0;
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .theorem::before {
            content: "å®šç†";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #ffd700;
            color: #333;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .example {
            background: #f0f8ff;
            border: 2px solid #4169e1;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        
        .example::before {
            content: "ä¾‹é¢˜";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #4169e1;
            color: white;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .formula {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
        }
        
        .graph-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .graph-container h3 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        
        .interactive-demo {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }
        
        .interactive-demo h3 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .slider-container {
            margin: 20px 0;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .slider-container input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 5px;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .slider-value {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin-left: 10px;
        }
        
        .exercise {
            background: #fff5f5;
            border: 2px solid #ff6b6b;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .exercise h3 {
            color: #ff6b6b;
            margin-bottom: 15px;
        }
        
        .exercise ol {
            margin-left: 20px;
        }
        
        .exercise li {
            margin: 10px 0;
        }
        
        footer {
            background: #f8f9fa;
            text-align: center;
            padding: 20px;
            border-top: 2px solid #e9ecef;
            color: #6c757d;
        }
        
        .tip {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            display: flex;
            align-items: center;
        }
        
        .tip::before {
            content: "ğŸ’¡";
            font-size: 1.5em;
            margin-right: 10px;
        }

        /* åŠ¨ç”»å®¹å™¨æ ·å¼ */
        .animation-container {
            width: 100%;
            height: 350px;
            position: relative;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
        }

        .integral-animation {
            width: 100%;
            height: 100%;
        }

        .animation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .animation-btn {
            padding: 8px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }

        .animation-btn:hover {
            background: #5569c0;
            transform: translateY(-2px);
        }

        /* LaTeXå…¬å¼æ ·å¼ */
        .math-display {
            font-size: 1.2em;
            margin: 15px 0;
            text-align: center;
        }

        .geometry-explanation {
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .geometry-explanation::before {
            content: "å‡ ä½•æ„ä¹‰";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #28a745;
            color: white;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .warning::before {
            content: "âš ï¸ æ³¨æ„";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #ffc107;
            color: #333;
            padding: 2px 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }
            
            main {
                padding: 20px;
            }
            
            nav {
                padding: 15px 20px;
            }
            
            nav button {
                font-size: 0.9em;
                padding: 8px 15px;
            }

            .animation-container {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>é«˜ç­‰æ•°å­¦ - å®šç§¯åˆ†çš„å‡ ä½•æ„ä¹‰</h1>
            <div class="subtitle">ä»é»æ›¼å’Œåˆ°é¢ç§¯è®¡ç®—çš„å‡ ä½•ç›´è§‚</div>
        </header>
        
        <nav>
            <button class="active" onclick="showSection('intro')">åŸºæœ¬æ¦‚å¿µ</button>
            <button onclick="showSection('geometry')">å‡ ä½•æ„ä¹‰</button>
            <button onclick="showSection('properties')">æ€§è´¨åº”ç”¨</button>
            <button onclick="showSection('examples')">ä¾‹é¢˜è§£æ</button>
            <button onclick="showSection('animation')">å¯è§†åŒ–æ¼”ç¤º</button>
        </nav>
        
        <main>
            <!-- åŸºæœ¬æ¦‚å¿µéƒ¨åˆ† -->
            <div class="section active" id="intro">
                <div class="concept-box">
                    <h2>ğŸ“š å®šç§¯åˆ†çš„åŸºæœ¬æ¦‚å¿µ</h2>
                    <p>å®šç§¯åˆ†æ˜¯é€šè¿‡æé™è¿‡ç¨‹å®šä¹‰çš„ï¼Œå®ƒå°†æ›²çº¿ä¸‹çš„é¢ç§¯é—®é¢˜è½¬åŒ–ä¸ºæ•°å­¦åˆ†æé—®é¢˜ã€‚</p>
                </div>
                
                <div class="definition">
                    <h3>å®šä¹‰ 1.1ï¼šåˆ†å‰²ä¸é»æ›¼å’Œ</h3>
                    <p>è®¾å‡½æ•° \( f(x) \) åœ¨åŒºé—´ \([a,b]\) ä¸Šæœ‰ç•Œã€‚å¯¹åŒºé—´ \([a,b]\) è¿›è¡Œåˆ†å‰²ï¼š</p>
                    <div class="formula">
                        \[ a = x_0 < x_1 < x_2 < \cdots < x_n = b \]
                    </div>
                    <p>åœ¨æ¯ä¸ªå°åŒºé—´ \([x_{i-1}, x_i]\) ä¸Šä»»å–ä¸€ç‚¹ \(\xi_i\)ï¼Œåˆ™<strong>é»æ›¼å’Œ</strong>å®šä¹‰ä¸ºï¼š</p>
                    <div class="formula">
                        \[ S = \sum_{i=1}^{n} f(\xi_i) \Delta x_i, \quad \Delta x_i = x_i - x_{i-1} \]
                    </div>
                </div>
                
                <div class="definition">
                    <h3>å®šä¹‰ 1.2ï¼šå®šç§¯åˆ†</h3>
                    <p>å¦‚æœå½“åˆ†å‰²çš„ç»†åº¦ \(\lambda = \max\{\Delta x_i\} \to 0\) æ—¶ï¼Œé»æ›¼å’Œçš„æé™å­˜åœ¨ä¸”ä¸åˆ†å‰²æ–¹å¼å’Œ \(\xi_i\) çš„é€‰å–æ— å…³ï¼Œåˆ™ç§°æ­¤æé™ä¸ºå‡½æ•° \(f(x)\) åœ¨ \([a,b]\) ä¸Šçš„<strong>å®šç§¯åˆ†</strong>ï¼š</p>
                    <div class="formula">
                        \[ \int_a^b f(x) \mathrm{d}x = \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i) \Delta x_i \]
                    </div>
                    <p>å…¶ä¸­ \(a\) ç§°ä¸ºç§¯åˆ†ä¸‹é™ï¼Œ\(b\) ç§°ä¸ºç§¯åˆ†ä¸Šé™ã€‚</p>
                </div>
                
                <div class="theorem">
                    <h3>å®šç§¯åˆ†å­˜åœ¨å®šç†</h3>
                    <p>å¦‚æœå‡½æ•° \(f(x)\) åœ¨åŒºé—´ \([a,b]\) ä¸Šè¿ç»­ï¼Œåˆ™å®šç§¯åˆ† \(\int_a^b f(x) \mathrm{d}x\) å­˜åœ¨ã€‚</p>
                    <p><strong>æ¨å¹¿ï¼š</strong>å¦‚æœ \(f(x)\) åœ¨ \([a,b]\) ä¸Šæœ‰ç•Œä¸”åªæœ‰æœ‰é™ä¸ªé—´æ–­ç‚¹ï¼Œåˆ™å®šç§¯åˆ†ä¹Ÿå­˜åœ¨ã€‚</p>
                </div>
                
                <div class="geometry-explanation">
                    <h3>å®šç§¯åˆ†çš„ç›´è§‚ç†è§£</h3>
                    <p>å®šç§¯åˆ†å¯ä»¥ç†è§£ä¸ºï¼š</p>
                    <ul style="margin-left: 20px;">
                        <li><strong>é¢ç§¯çš„ç²¾ç¡®å€¼</strong>ï¼šæ›²çº¿ \(y = f(x)\)ã€ç›´çº¿ \(x = a\)ã€\(x = b\) å’Œ \(x\) è½´æ‰€å›´æˆå›¾å½¢çš„é¢ç§¯</li>
                        <li><strong>æé™è¿‡ç¨‹</strong>ï¼šæ— é™ç»†åˆ†åŒºé—´ï¼Œç”¨çŸ©å½¢é¢ç§¯å’Œé€¼è¿‘æ›²è¾¹å›¾å½¢é¢ç§¯</li>
                        <li><strong>ä»£æ•°å’Œ</strong>ï¼šè€ƒè™‘ \(x\) è½´ä¸Šæ–¹ä¸ºæ­£ï¼Œä¸‹æ–¹ä¸ºè´Ÿçš„ä»£æ•°é¢ç§¯</li>
                    </ul>
                </div>
                
                <div class="tip">
                    ç†è§£è¦ç‚¹ï¼šå®šç§¯åˆ†æ˜¯é€šè¿‡"åˆ†å‰²-è¿‘ä¼¼-æ±‚å’Œ-å–æé™"çš„å››æ­¥è¿‡ç¨‹æ¥ç²¾ç¡®è®¡ç®—æ›²è¾¹å›¾å½¢é¢ç§¯çš„æ•°å­¦æ–¹æ³•ã€‚
                </div>
            </div>
            
            <!-- å‡ ä½•æ„ä¹‰éƒ¨åˆ† -->
            <div class="section" id="geometry">
                <div class="concept-box">
                    <h2>ğŸ¯ å®šç§¯åˆ†çš„å‡ ä½•æ„ä¹‰</h2>
                    <p>å®šç§¯åˆ†çš„å‡ ä½•æ„ä¹‰æ˜¯å…¶æœ€ç›´è§‚å’Œé‡è¦çš„è§£é‡Šï¼Œä½“ç°äº†æ•°å­¦åˆ†æä¸å‡ ä½•å›¾å½¢çš„å®Œç¾ç»“åˆã€‚</p>
                </div>
                
                <div class="geometry-explanation">
                    <h3>1. é¢ç§¯çš„å‡ ä½•æ„ä¹‰</h3>
                    <p>å½“ \(f(x) \geq 0\) åœ¨ \([a,b]\) ä¸Šæ—¶ï¼š</p>
                    <div class="formula">
                        \[ \int_a^b f(x) \mathrm{d}x = \text{æ›²çº¿} y = f(x) \text{ä¸} x \text{è½´åœ¨} [a,b] \text{ä¸Šå›´æˆçš„é¢ç§¯} \]
                    </div>
                    <p><strong>å‡ ä½•è§£é‡Šï¼š</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>å®šç§¯åˆ†å€¼ç­‰äºæ›²è¾¹æ¢¯å½¢çš„é¢ç§¯</li>
                        <li>é»æ›¼å’Œå¯¹åº”äºçŸ©å½¢é¢ç§¯çš„è¿‘ä¼¼</li>
                        <li>åˆ†å‰²è¶Šç»†ï¼Œè¿‘ä¼¼è¶Šç²¾ç¡®</li>
                    </ul>
                </div>
                
                <div class="warning">
                    <h3>2. æœ‰å‘é¢ç§¯ï¼ˆä»£æ•°é¢ç§¯ï¼‰</h3>
                    <p>å½“å‡½æ•° \(f(x)\) åœ¨ \([a,b]\) ä¸Šæœ‰æ­£æœ‰è´Ÿæ—¶ï¼š</p>
                    <ul style="margin-left: 20px;">
                        <li><strong>æ­£é¢ç§¯</strong>ï¼š\(f(x) > 0\) çš„éƒ¨åˆ†ï¼Œä½äº \(x\) è½´ä¸Šæ–¹</li>
                        <li><strong>è´Ÿé¢ç§¯</strong>ï¼š\(f(x) < 0\) çš„éƒ¨åˆ†ï¼Œä½äº \(x\) è½´ä¸‹æ–¹</li>
                        <li><strong>å®šç§¯åˆ†å€¼</strong> = æ­£é¢ç§¯ - è´Ÿé¢ç§¯ï¼ˆä»£æ•°å’Œï¼‰</li>
                    </ul>
                    <div class="formula">
                        \[ \int_a^b f(x) \mathrm{d}x = S_+ - S_- \]
                    </div>
                    <p>å…¶ä¸­ \(S_+\) ä¸ºæ­£é¢ç§¯ï¼Œ\(S_-\) ä¸ºè´Ÿé¢ç§¯çš„ç»å¯¹å€¼ã€‚</p>
                </div>
                
                <div class="geometry-explanation">
                    <h3>3. é»æ›¼å’Œçš„å‡ ä½•æ„ä¹‰</h3>
                    <p>é»æ›¼å’Œ \(\sum_{i=1}^{n} f(\xi_i) \Delta x_i\) çš„å‡ ä½•è§£é‡Šï¼š</p>
                    <ul style="margin-left: 20px;">
                        <li><strong>çŸ©å½¢è¿‘ä¼¼</strong>ï¼šæ¯ä¸€é¡¹ \(f(\xi_i) \Delta x_i\) è¡¨ç¤ºä¸€ä¸ªçŸ©å½¢çš„é¢ç§¯</li>
                        <li><strong>åº•è¾¹</strong>ï¼š\(\Delta x_i\) æ˜¯çŸ©å½¢çš„å®½åº¦</li>
                        <li><strong>é«˜åº¦</strong>ï¼š\(f(\xi_i)\) æ˜¯çŸ©å½¢çš„é«˜åº¦</li>
                        <li><strong>æ€»å’Œ</strong>ï¼šæ‰€æœ‰çŸ©å½¢é¢ç§¯ä¹‹å’Œè¿‘ä¼¼æ›²è¾¹å›¾å½¢é¢ç§¯</li>
                    </ul>
                </div>
                
                <div class="example">
                    <h3>å‡ ä½•æ„ä¹‰ç¤ºä¾‹</h3>
                    <p><strong>ä¾‹1ï¼š</strong>\(\int_0^2 x \mathrm{d}x = 2\)</p>
                    <p>å‡ ä½•æ„ä¹‰ï¼šç›´çº¿ \(y = x\)ã€\(x\) è½´ã€\(x = 0\) å’Œ \(x = 2\) å›´æˆçš„ä¸‰è§’å½¢é¢ç§¯ä¸º \(\frac{1}{2} \times 2 \times 2 = 2\)ã€‚</p>
                    
                    <p><strong>ä¾‹2ï¼š</strong>\(\int_{-1}^1 x \mathrm{d}x = 0\)</p>
                    <p>å‡ ä½•æ„ä¹‰ï¼š\(x\) è½´ä¸Šæ–¹å’Œä¸‹æ–¹çš„é¢ç§¯ç›¸ç­‰ï¼Œä»£æ•°å’Œä¸ºé›¶ã€‚</p>
                </div>
            </div>
        
            
            <!-- æ€§è´¨åº”ç”¨éƒ¨åˆ† -->
            <div class="section" id="properties">
                <div class="concept-box">
                    <h2>ğŸ”§ å®šç§¯åˆ†æ€§è´¨çš„å‡ ä½•æ„ä¹‰</h2>
                    <p>å®šç§¯åˆ†çš„å„ç§æ€§è´¨éƒ½æœ‰ç›´è§‚çš„å‡ ä½•è§£é‡Šï¼Œæœ‰åŠ©äºæ·±å…¥ç†è§£ç§¯åˆ†æ¦‚å¿µã€‚</p>
                </div>
                
                <div class="definition">
                    <h3>1. çº¿æ€§æ€§è´¨</h3>
                    <div class="formula">
                        \[ \int_a^b [k_1f(x) + k_2g(x)] \mathrm{d}x = k_1\int_a^b f(x) \mathrm{d}x + k_2\int_a^b g(x) \mathrm{d}x \]
                    </div>
                    <p><strong>å‡ ä½•æ„ä¹‰ï¼š</strong>é¢ç§¯çš„çº¿æ€§ç»„åˆç­‰äºç»„åˆå‡½æ•°å›´æˆå›¾å½¢çš„é¢ç§¯ã€‚</p>
                </div>
                
                <div class="definition">
                    <h3>2. åŒºé—´å¯åŠ æ€§</h3>
                    <div class="formula">
                        \[ \int_a^b f(x) \mathrm{d}x = \int_a^c f(x) \mathrm{d}x + \int_c^b f(x) \mathrm{d}x \quad (a < c < b) \]
                    </div>
                    <p><strong>å‡ ä½•æ„ä¹‰ï¼š</strong>æ€»é¢ç§¯ç­‰äºå„éƒ¨åˆ†é¢ç§¯ä¹‹å’Œï¼Œä½“ç°äº†é¢ç§¯çš„å¯åŠ æ€§ã€‚</p>
                </div>
                
                <div class="definition">
                    <h3>3. ä¿å·æ€§</h3>
                    <p>è‹¥ \(f(x) \geq 0\) åœ¨ \([a,b]\) ä¸Šï¼Œåˆ™ \(\int_a^b f(x) \mathrm{d}x \geq 0\)</p>
                    <p><strong>å‡ ä½•æ„ä¹‰ï¼š</strong>éè´Ÿå‡½æ•°çš„ç§¯åˆ†éè´Ÿï¼Œç¬¦åˆé¢ç§¯çš„éè´Ÿæ€§ã€‚</p>
                </div>
                
                <div class="definition">
                    <h3>4. å•è°ƒæ€§</h3>
                    <p>è‹¥ \(f(x) \leq g(x)\) åœ¨ \([a,b]\) ä¸Šï¼Œåˆ™ \(\int_a^b f(x) \mathrm{d}x \leq \int_a^b g(x) \mathrm{d}x\)</p>
                    <p><strong>å‡ ä½•æ„ä¹‰ï¼š</strong>è¾ƒä½çš„æ›²çº¿å›´æˆçš„é¢ç§¯è¾ƒå°ã€‚</p>
                </div>
                
                <div class="geometry-explanation">
                    <h3>5. ç§¯åˆ†ä¼°å€¼çš„å‡ ä½•æ„ä¹‰</h3>
                    <p>è‹¥ \(m \leq f(x) \leq M\) åœ¨ \([a,b]\) ä¸Šï¼Œåˆ™</p>
                    <div class="formula">
                        \[ m(b-a) \leq \int_a^b f(x) \mathrm{d}x \leq M(b-a) \]
                    </div>
                    
                    <p><strong>å‡ ä½•è§£é‡Šï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>æ›²è¾¹å›¾å½¢é¢ç§¯è¢«ä¸¤ä¸ªçŸ©å½¢é¢ç§¯å¤¹é€¼</li>
                        <li>ä¸‹çŸ©å½¢é¢ç§¯ï¼š\(m(b-a)\)</li>
                        <li>ä¸ŠçŸ©å½¢é¢ç§¯ï¼š\(M(b-a)\)</li>
                        <li>çœŸå®é¢ç§¯åœ¨ä¸¤è€…ä¹‹é—´</li>
                    </ul>
                </div>
                
                <div class="example">
                    <h3>æ€§è´¨åº”ç”¨ç¤ºä¾‹</h3>
                    <p><strong>ä¾‹ï¼š</strong>ä¼°ç®— \(\int_1^2 \frac{1}{x} \mathrm{d}x\) çš„å€¼ã€‚</p>
                    
                    <p><strong>è§£ï¼š</strong>åœ¨ \([1,2]\) ä¸Šï¼Œ\(\frac{1}{2} \leq \frac{1}{x} \leq 1\)</p>
                    
                    <p>ç”±ç§¯åˆ†ä¼°å€¼å®šç†ï¼š</p>
                    <div class="formula">
                        \[ \frac{1}{2}(2-1) \leq \int_1^2 \frac{1}{x} \mathrm{d}x \leq 1(2-1) \]
                    </div>
                    <div class="formula">
                        \[ \frac{1}{2} \leq \int_1^2 \frac{1}{x} \mathrm{d}x \leq 1 \]
                    </div>
                    
                    <p><strong>å‡ ä½•æ„ä¹‰ï¼š</strong>åŒæ›²çº¿ \(y = \frac{1}{x}\) åœ¨ \([1,2]\) ä¸Šä¸ \(x\) è½´å›´æˆçš„é¢ç§¯åœ¨ \(\frac{1}{2}\) å’Œ \(1\) ä¹‹é—´ã€‚</p>
                </div>
            </div>
            
            <!-- ä¾‹é¢˜è§£æéƒ¨åˆ† -->
            <div class="section" id="examples">
                <div class="example">
                    <h3>ä¾‹1ï¼šåˆ©ç”¨å‡ ä½•æ„ä¹‰è®¡ç®—å®šç§¯åˆ†</h3>
                    <p>è®¡ç®— \(\int_{-2}^2 \sqrt{4-x^2} \mathrm{d}x\)</p>
                    
                    <p><strong>è§£ï¼š</strong></p>
                    <p>å‡½æ•° \(y = \sqrt{4-x^2}\) è¡¨ç¤ºä¸ŠåŠåœ†ï¼Œåœ†å¿ƒåœ¨åŸç‚¹ï¼ŒåŠå¾„ä¸º 2ã€‚</p>
                    
                    <p><strong>å‡ ä½•åˆ†æï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>å®šä¹‰åŸŸï¼š\(x^2 \leq 4\)ï¼Œå³ \(x \in [-2, 2]\)</li>
                        <li>å›¾å½¢ï¼šä¸ŠåŠåœ†å¼§ä¸ \(x\) è½´å›´æˆçš„åŠåœ†</li>
                        <li>é¢ç§¯ï¼šåŠåœ†é¢ç§¯ = \(\frac{1}{2}\pi r^2 = \frac{1}{2}\pi \times 2^2 = 2\pi\)</li>
                    </ul>
                    
                    <p><strong>ç­”æ¡ˆï¼š</strong>\(\int_{-2}^2 \sqrt{4-x^2} \mathrm{d}x = 2\pi\)</p>
                </div>
                
                <div class="example">
                    <h3>ä¾‹2ï¼šå«æœ‰æ­£è´Ÿé¢ç§¯çš„ç§¯åˆ†</h3>
                    <p>è®¡ç®— \(\int_{-\pi}^{\pi} \sin x \mathrm{d}x\) å¹¶è§£é‡Šå…¶å‡ ä½•æ„ä¹‰ã€‚</p>
                    
                    <p><strong>è§£ï¼š</strong></p>
                    <p>1. ç›´æ¥è®¡ç®—ï¼š</p>
                    <div class="formula">
                        \[ \int_{-\pi}^{\pi} \sin x \mathrm{d}x = [-\cos x]_{-\pi}^{\pi} = -\cos\pi - (-\cos(-\pi)) = -(-1) - (-(-1)) = 0 \]
                    </div>
                    
                    <p>2. <strong>å‡ ä½•è§£é‡Šï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>åœ¨ \([-\pi, 0]\) ä¸Šï¼Œ\(\sin x \leq 0\)ï¼Œäº§ç”Ÿè´Ÿé¢ç§¯</li>
                        <li>åœ¨ \([0, \pi]\) ä¸Šï¼Œ\(\sin x \geq 0\)ï¼Œäº§ç”Ÿæ­£é¢ç§¯</li>
                        <li>ç”±äºæ­£å¼¦å‡½æ•°çš„å¯¹ç§°æ€§ï¼Œæ­£è´Ÿé¢ç§¯ç›¸ç­‰</li>
                        <li>å®šç§¯åˆ†å€¼ = æ­£é¢ç§¯ - è´Ÿé¢ç§¯ = 0</li>
                    </ul>
                    
                    <p><strong>æ³¨æ„ï¼š</strong>è™½ç„¶ç§¯åˆ†å€¼ä¸º0ï¼Œä½†å®é™…çš„æ€»é¢ç§¯æ˜¯ \(2 \times \int_0^{\pi} \sin x \mathrm{d}x = 4\)ã€‚</p>
                </div>
                
                <div class="example">
                    <h3>ä¾‹3ï¼šåˆ†æ®µå‡½æ•°çš„ç§¯åˆ†</h3>
                    <p>è®¾ \(f(x) = \begin{cases} x+1, & 0 \leq x \leq 1 \\ 2-x, & 1 < x \leq 2 \end{cases}\)ï¼Œè®¡ç®— \(\int_0^2 f(x) \mathrm{d}x\)ã€‚</p>
                    
                    <p><strong>è§£ï¼š</strong></p>
                    <p>1. åˆ†æ®µè®¡ç®—ï¼š</p>
                    <div class="formula">
                        \begin{align}
                        \int_0^2 f(x) \mathrm{d}x &= \int_0^1 (x+1) \mathrm{d}x + \int_1^2 (2-x) \mathrm{d}x \\
                        &= \left[\frac{x^2}{2} + x\right]_0^1 + \left[2x - \frac{x^2}{2}\right]_1^2 \\
                        &= \frac{3}{2} + \frac{3}{2} = 3
                        \end{align}
                    </div>
                    
                    <p>2. <strong>å‡ ä½•æ„ä¹‰ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>ç¬¬ä¸€æ®µï¼šæ¢¯å½¢é¢ç§¯ï¼Œåº•è¾¹ä¸º1ï¼Œä¸¤è…°é«˜ä¸º1å’Œ2</li>
                        <li>ç¬¬äºŒæ®µï¼šä¸‰è§’å½¢é¢ç§¯ï¼Œåº•è¾¹ä¸º1ï¼Œé«˜ä¸º1</li>
                        <li>æ€»é¢ç§¯ = \(\frac{1+2}{2} \times 1 + \frac{1 \times 1}{2} = 1.5 + 1.5 = 3\)</li>
                    </ul>
                </div>
                
                <div class="example">
                    <h3>ä¾‹4ï¼šç§¯åˆ†å¹³å‡å€¼çš„åº”ç”¨</h3>
                    <p>æ±‚å‡½æ•° \(f(x) = x^2\) åœ¨åŒºé—´ \([0, 3]\) ä¸Šçš„ç§¯åˆ†å¹³å‡å€¼ã€‚</p>
                    
                    <p><strong>è§£ï¼š</strong></p>
                    <p>ç§¯åˆ†å¹³å‡å€¼å…¬å¼ï¼š</p>
                    <div class="formula">
                        \[ \overline{f} = \frac{1}{b-a} \int_a^b f(x) \mathrm{d}x = \frac{1}{3-0} \int_0^3 x^2 \mathrm{d}x \]
                    </div>
                    
                    <p>è®¡ç®—å®šç§¯åˆ†ï¼š</p>
                    <div class="formula">
                        \[ \int_0^3 x^2 \mathrm{d}x = \left[\frac{x^3}{3}\right]_0^3 = 9 \]
                    </div>
                    
                    <p>æ‰€ä»¥å¹³å‡å€¼ä¸ºï¼š</p>
                    <div class="formula">
                        \[ \overline{f} = \frac{9}{3} = 3 \]
                    </div>
                    
                    <p><strong>å‡ ä½•æ„ä¹‰ï¼š</strong>å­˜åœ¨é«˜åº¦ä¸º3çš„çŸ©å½¢ï¼Œå…¶é¢ç§¯ç­‰äºæŠ›ç‰©çº¿ \(y = x^2\) ä¸ \(x\) è½´åœ¨ \([0,3]\) ä¸Šå›´æˆçš„é¢ç§¯ã€‚</p>
                </div>
            </div>
            
            <!-- å¯è§†åŒ–æ¼”ç¤ºéƒ¨åˆ† -->
            <div class="section" id="animation">
                <div class="concept-box">
                    <h2>ğŸ¬ å®šç§¯åˆ†å‡ ä½•æ„ä¹‰å¯è§†åŒ–</h2>
                    <p>é€šè¿‡åŠ¨ç”»æ¼”ç¤ºæ·±å…¥ç†è§£å®šç§¯åˆ†çš„å‡ ä½•æœ¬è´¨å’Œè®¡ç®—è¿‡ç¨‹</p>
                </div>

                <div class="interactive-demo">
                    <h3>é»æ›¼å’Œé€¼è¿‘æ¼”ç¤º</h3>
                    <div class="math-display">
                        \[ \int_a^b f(x) dx = \lim_{n \to \infty} \sum_{i=1}^{n} f(\xi_i) \Delta x_i \]
                    </div>
                    <div class="animation-container">
                        <canvas id="riemannCanvas" class="integral-animation"></canvas>
                    </div>
                    <div class="slider-container">
                        <label for="nRectangles">çŸ©å½¢æ•°é‡ n: <span id="nValue" class="slider-value">4</span></label>
                        <input type="range" id="nRectangles" min="4" max="100" step="4" value="4" oninput="updateRiemann()">
                    </div>
                    <div class="animation-controls">
                        <button class="animation-btn" onclick="animateRiemann()">åŠ¨ç”»æ¼”ç¤º</button>
                        <button class="animation-btn" onclick="resetRiemann()">é‡ç½®</button>
                        <button class="animation-btn" onclick="toggleMethod()">åˆ‡æ¢æ–¹æ³•</button>
                    </div>
                    <p>æ¼”ç¤ºè¯´æ˜ï¼šè§‚å¯Ÿéšç€çŸ©å½¢æ•°é‡å¢åŠ ï¼Œé»æ›¼å’Œå¦‚ä½•é€¼è¿‘å®šç§¯åˆ†çš„ç²¾ç¡®å€¼ã€‚å¯ä»¥åˆ‡æ¢å·¦ç«¯ç‚¹ã€å³ç«¯ç‚¹å’Œä¸­ç‚¹æ³•ã€‚</p>
                </div>

                <div class="interactive-demo">
                    <h3>æ­£è´Ÿé¢ç§¯æ¼”ç¤º</h3>
                    <div class="math-display">
                        \[ \int_a^b f(x) dx = S_+ - S_- \]
                    </div>
                    <div class="animation-container">
                        <canvas id="signedAreaCanvas"></canvas>
                    </div>
                    <div class="slider-container">
                        <label for="upperLimit">ç§¯åˆ†ä¸Šé™: <span id="limitValue" class="slider-value">Ï€</span></label>
                        <input type="range" id="upperLimit" min="1" max="20" step="1" value="10" oninput="updateSignedArea()">
                    </div>
                    <div class="animation-controls">
                        <button class="animation-btn" onclick="showPositiveArea()">æ˜¾ç¤ºæ­£é¢ç§¯</button>
                        <button class="animation-btn" onclick="showNegativeArea()">æ˜¾ç¤ºè´Ÿé¢ç§¯</button>
                        <button class="animation-btn" onclick="showNetArea()">æ˜¾ç¤ºå‡€é¢ç§¯</button>
                    </div>
                    <p>æ¼”ç¤ºè¯´æ˜ï¼šå±•ç¤ºå‡½æ•°åœ¨xè½´ä¸Šæ–¹å’Œä¸‹æ–¹çš„é¢ç§¯å¦‚ä½•å½±å“å®šç§¯åˆ†çš„å€¼ã€‚æ­£é¢ç§¯ä¸ºç»¿è‰²ï¼Œè´Ÿé¢ç§¯ä¸ºçº¢è‰²ã€‚</p>
                </div>

                <div class="interactive-demo">
                    <h3>ç§¯åˆ†ä¸­å€¼å®šç†æ¼”ç¤º</h3>
                    <div class="math-display">
                        \[ \int_a^b f(x) dx = f(\xi)(b-a) \]
                    </div>
                    <div class="animation-container">
                        <canvas id="meanValueCanvas"></canvas>
                    </div>
                    <div class="animation-controls">
                        <button class="animation-btn" onclick="findMeanValue()">å¯»æ‰¾å¹³å‡å€¼</button>
                        <button class="animation-btn" onclick="showMeanRectangle()">æ˜¾ç¤ºç­‰é¢ç§¯çŸ©å½¢</button>
                        <button class="animation-btn" onclick="resetMeanValue()">é‡ç½®</button>
                    </div>
                    <p>æ¼”ç¤ºè¯´æ˜ï¼šæ¼”ç¤ºç§¯åˆ†ä¸­å€¼å®šç†ï¼Œæ‰¾åˆ°ä¸€ä¸ªçŸ©å½¢ä½¿å…¶é¢ç§¯ç­‰äºæ›²è¾¹å›¾å½¢é¢ç§¯ã€‚</p>
                </div>
            </div>
        </main>
        
        <footer>
            <p>Â© 2025 è‹å·ç»è´¸èŒä¸šæŠ€æœ¯å­¦é™¢ | å®šç§¯åˆ†å‡ ä½•æ„ä¹‰ä¸“é¢˜</p>
            <p>å»ºè®®ä½¿ç”¨Chromeã€Firefoxæˆ–Edgeæµè§ˆå™¨è·å¾—æœ€ä½³ä½“éªŒ</p>
        </footer>
    </div>
    
    <script>
        // é…ç½® MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            }
        };
        
        // åˆ‡æ¢æ˜¾ç¤ºä¸åŒç« èŠ‚
        function showSection(sectionId) {
            // éšè—æ‰€æœ‰ç« èŠ‚
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„ç« èŠ‚
            document.getElementById(sectionId).classList.add('active');
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            const buttons = document.querySelectorAll('nav button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // é‡æ–°æ¸²æŸ“æ•°å­¦å…¬å¼
            if (window.MathJax) {
                window.MathJax.typeset();
            }

            // å¦‚æœåˆ‡æ¢åˆ°åŠ¨ç”»ç« èŠ‚ï¼Œåˆå§‹åŒ–åŠ¨ç”»
            if (sectionId === 'animation') {
                initAnimations();
            }
        }

        // åŠ¨ç”»ç›¸å…³å˜é‡
        let riemannAnimationId;
        let areaAnimationId;
        let currentMethod = 'left'; // 'left', 'right', 'middle'

        // åˆå§‹åŒ–æ‰€æœ‰åŠ¨ç”»
        function initAnimations() {
            initRiemannAnimation();
            initSignedAreaAnimation();
            initMeanValueAnimation();
            initAreaFunctionAnimation();
        }

        // é»æ›¼å’ŒåŠ¨ç”»
        function initRiemannAnimation() {
            const canvas = document.getElementById('riemannCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            const width = canvas.width;
            const height = canvas.height;
            const margin = 40;
            const graphWidth = width - 2 * margin;
            const graphHeight = height - 2 * margin;

            function f(x) {
                return 0.5 * x * x + 0.5; // f(x) = 0.5xÂ² + 0.5
            }

            function drawAxes() {
                ctx.clearRect(0, 0, width, height);
                
                // ç»˜åˆ¶åæ ‡è½´
                ctx.beginPath();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                
                // Xè½´
                ctx.moveTo(margin, height - margin);
                ctx.lineTo(width - margin, height - margin);
                
                // Yè½´
                ctx.moveTo(margin, margin);
                ctx.lineTo(margin, height - margin);
                ctx.stroke();
                
                // åˆ»åº¦æ ‡ç­¾
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('0', margin, height - margin + 15);
                ctx.fillText('2', width - margin, height - margin + 15);
                ctx.textAlign = 'right';
                ctx.fillText('0', margin - 5, height - margin + 5);
                ctx.fillText('2.5', margin - 5, margin + 5);
            }

            function drawFunction() {
                // ç»˜åˆ¶å‡½æ•°æ›²çº¿ f(x) = 0.5xÂ² + 0.5
                ctx.beginPath();
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 3;
                
                for (let x = 0; x <= 2; x += 0.05) {
                    const px = margin + x * graphWidth / 2;
                    const py = height - margin - f(x) * graphHeight / 2.5;
                    
                    if (x === 0) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
                ctx.stroke();
            }

            function drawRiemannSum(n) {
                drawAxes();
                drawFunction();
                
                const a = 0, b = 2;
                const dx = (b - a) / n;
                let sum = 0;
                
                // ç»˜åˆ¶çŸ©å½¢
                ctx.fillStyle = 'rgba(102, 126, 234, 0.3)';
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 1;
                
                for (let i = 0; i < n; i++) {
                    const x_left = a + i * dx;
                    const x_right = a + (i + 1) * dx;
                    let xi;
                    
                    // æ ¹æ®æ–¹æ³•é€‰æ‹©xi
                    switch(currentMethod) {
                        case 'left':
                            xi = x_left;
                            break;
                        case 'right':
                            xi = x_right;
                            break;
                        case 'middle':
                            xi = (x_left + x_right) / 2;
                            break;
                    }
                    
                    const height_rect = f(xi);
                    sum += height_rect * dx;
                    
                    // ç»˜åˆ¶çŸ©å½¢
                    const px_left = margin + x_left * graphWidth / 2;
                    const px_right = margin + x_right * graphWidth / 2;
                    const py_bottom = height - margin;
                    const py_top = height - margin - height_rect * graphHeight / 2.5;
                    
                    ctx.fillRect(px_left, py_top, px_right - px_left, py_bottom - py_top);
                    ctx.strokeRect(px_left, py_top, px_right - px_left, py_bottom - py_top);
                }
                
                // æ˜¾ç¤ºé»æ›¼å’Œå€¼
                ctx.fillStyle = '#333';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`é»æ›¼å’Œ â‰ˆ ${sum.toFixed(4)}`, width / 2, 30);
                ctx.fillText(`ç²¾ç¡®å€¼ = ${(8/3).toFixed(4)}`, width / 2, 50);
                ctx.fillText(`è¯¯å·® = ${Math.abs(sum - 8/3).toFixed(4)}`, width / 2, 70);
            }

            window.updateRiemann = function() {
                const slider = document.getElementById('nRectangles');
                const valueDisplay = document.getElementById('nValue');
                const n = parseInt(slider.value);
                
                valueDisplay.textContent = n;
                drawRiemannSum(n);
            };

            window.animateRiemann = function() {
                let n = 4;
                const maxN = 100;
                
                function animate() {
                    drawRiemannSum(n);
                    n += 4;
                    
                    if (n <= maxN) {
                        document.getElementById('nRectangles').value = n;
                        document.getElementById('nValue').textContent = n;
                        riemannAnimationId = setTimeout(animate, 300);
                    }
                }
                animate();
            };

            window.resetRiemann = function() {
                if (riemannAnimationId) {
                    clearTimeout(riemannAnimationId);
                }
                document.getElementById('nRectangles').value = 4;
                document.getElementById('nValue').textContent = '4';
                drawRiemannSum(4);
            };

            window.toggleMethod = function() {
                const methods = ['left', 'right', 'middle'];
                const currentIndex = methods.indexOf(currentMethod);
                currentMethod = methods[(currentIndex + 1) % methods.length];
                
                const n = parseInt(document.getElementById('nRectangles').value);
                drawRiemannSum(n);
                
                // æ›´æ–°æŒ‰é’®æ–‡æœ¬
                const button = event.target;
                const methodNames = {'left': 'å·¦ç«¯ç‚¹æ³•', 'right': 'å³ç«¯ç‚¹æ³•', 'middle': 'ä¸­ç‚¹æ³•'};
                button.textContent = `å½“å‰: ${methodNames[currentMethod]}`;
            };

            // åˆå§‹ç»˜åˆ¶
            drawRiemannSum(4);
        }

        // æ­£è´Ÿé¢ç§¯åŠ¨ç”»
        function initSignedAreaAnimation() {
            const canvas = document.getElementById('signedAreaCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            const width = canvas.width;
            const height = canvas.height;
            const margin = 40;
            const graphWidth = width - 2 * margin;
            const graphHeight = height - 2 * margin;

            function f(x) {
                return Math.sin(x); // æ­£å¼¦å‡½æ•°
            }

            function drawAxes() {
                ctx.clearRect(0, 0, width, height);
                
                ctx.beginPath();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.moveTo(margin, height / 2);
                ctx.lineTo(width - margin, height / 2);
                ctx.moveTo(margin, margin);
                ctx.lineTo(margin, height - margin);
                ctx.stroke();
                
                // æ ‡è®°Ï€
                const piX = margin + Math.PI * graphWidth / (2 * Math.PI);
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Ï€', piX, height / 2 + 20);
                ctx.fillText('2Ï€', width - margin, height / 2 + 20);
            }

            function drawFunction(upperLimit) {
                drawAxes();
                
                // ç»˜åˆ¶æ­£å¼¦å‡½æ•°
                ctx.beginPath();
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 3;
                
                for (let x = 0; x <= upperLimit; x += 0.05) {
                    const px = margin + x * graphWidth / (2 * Math.PI);
                    const py = height / 2 - f(x) * graphHeight / 4;
                    
                    if (x === 0) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
                ctx.stroke();
            }

            window.updateSignedArea = function() {
                const slider = document.getElementById('upperLimit');
                const valueDisplay = document.getElementById('limitValue');
                const limit = slider.value * Math.PI / 10;
                
                valueDisplay.textContent = (limit / Math.PI).toFixed(1) + 'Ï€';
                drawFunction(limit);
            };

            window.showPositiveArea = function() {
                const limit = document.getElementById('upperLimit').value * Math.PI / 10;
                drawFunction(limit);
                
                // å¡«å……æ­£é¢ç§¯
                ctx.fillStyle = 'rgba(40, 167, 69, 0.5)';
                
                for (let x = 0; x <= limit; x += 0.05) {
                    if (f(x) > 0) {
                        const px = margin + x * graphWidth / (2 * Math.PI);
                        const py_top = height / 2 - f(x) * graphHeight / 4;
                        const py_bottom = height / 2;
                        
                        ctx.fillRect(px, py_top, graphWidth / (2 * Math.PI) * 0.05, py_bottom - py_top);
                    }
                }
            };

            window.showNegativeArea = function() {
                const limit = document.getElementById('upperLimit').value * Math.PI / 10;
                drawFunction(limit);
                
                // å¡«å……è´Ÿé¢ç§¯
                ctx.fillStyle = 'rgba(220, 53, 69, 0.5)';
                
                for (let x = 0; x <= limit; x += 0.05) {
                    if (f(x) < 0) {
                        const px = margin + x * graphWidth / (2 * Math.PI);
                        const py_top = height / 2;
                        const py_bottom = height / 2 - f(x) * graphHeight / 4;
                        
                        ctx.fillRect(px, py_top, graphWidth / (2 * Math.PI) * 0.05, py_bottom - py_top);
                    }
                }
            };

            window.showNetArea = function() {
                showPositiveArea();
                showNegativeArea();
                
                // è®¡ç®—å‡€é¢ç§¯
                const limit = document.getElementById('upperLimit').value * Math.PI / 10;
                const netArea = -Math.cos(limit) + 1;
                
                ctx.fillStyle = '#333';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`å‡€é¢ç§¯ = ${netArea.toFixed(3)}`, width / 2, 30);
            };

            // åˆå§‹ç»˜åˆ¶
            updateSignedArea();
        }

        // ç§¯åˆ†ä¸­å€¼å®šç†åŠ¨ç”»
        function initMeanValueAnimation() {
            const canvas = document.getElementById('meanValueCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            const width = canvas.width;
            const height = canvas.height;
            const margin = 40;
            const graphWidth = width - 2 * margin;
            const graphHeight = height - 2 * margin;

            function f(x) {
                return x * x + 1; // f(x) = xÂ² + 1
            }

            function drawAxes() {
                ctx.clearRect(0, 0, width, height);
                
                ctx.beginPath();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.moveTo(margin, height - margin);
                ctx.lineTo(width - margin, height - margin);
                ctx.moveTo(margin, margin);
                ctx.lineTo(margin, height - margin);
                ctx.stroke();
            }

            function drawFunction() {
                // ç»˜åˆ¶å‡½æ•°æ›²çº¿
                ctx.beginPath();
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 3;
                
                for (let x = 0; x <= 2; x += 0.05) {
                    const px = margin + x * graphWidth / 2;
                    const py = height - margin - (f(x) - 1) * graphHeight / 4;
                    
                    if (x === 0) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
                ctx.stroke();
            }

            function drawArea() {
                // ç»˜åˆ¶æ›²çº¿ä¸‹é¢ç§¯
                ctx.fillStyle = 'rgba(102, 126, 234, 0.3)';
                ctx.beginPath();
                ctx.moveTo(margin, height - margin);
                
                for (let x = 0; x <= 2; x += 0.05) {
                    const px = margin + x * graphWidth / 2;
                    const py = height - margin - (f(x) - 1) * graphHeight / 4;
                    ctx.lineTo(px, py);
                }
                
                ctx.lineTo(width - margin, height - margin);
                ctx.closePath();
                ctx.fill();
            }

            window.findMeanValue = function() {
                drawAxes();
                drawFunction();
                drawArea();
                
                // è®¡ç®—ç§¯åˆ†å€¼å’Œå¹³å‡å€¼
                const integral = 14/3; // âˆ«â‚€Â² (xÂ² + 1) dx = [xÂ³/3 + x]â‚€Â² = 8/3 + 2 = 14/3
                const meanValue = integral / 2; // å¹³å‡å€¼ = ç§¯åˆ†å€¼ / åŒºé—´é•¿åº¦
                
                // ç»˜åˆ¶å¹³å‡å€¼çº¿
                const meanY = height - margin - (meanValue - 1) * graphHeight / 4;
                ctx.beginPath();
                ctx.strokeStyle = '#ff6b6b';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.moveTo(margin, meanY);
                ctx.lineTo(width - margin, meanY);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // æ˜¾ç¤ºå¹³å‡å€¼
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`å¹³å‡å€¼ = ${meanValue.toFixed(3)}`, width / 2, 30);
            };

            window.showMeanRectangle = function() {
                drawAxes();
                drawFunction();
                
                const meanValue = 14/6; // å¹³å‡å€¼
                const meanY = height - margin - (meanValue - 1) * graphHeight / 4;
                
                // ç»˜åˆ¶ç­‰é¢ç§¯çŸ©å½¢
                ctx.fillStyle = 'rgba(255, 107, 107, 0.3)';
                ctx.fillRect(margin, meanY, graphWidth, height - margin - meanY);
                
                ctx.strokeStyle = '#ff6b6b';
                ctx.lineWidth = 2;
                ctx.strokeRect(margin, meanY, graphWidth, height - margin - meanY);
                
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ç­‰é¢ç§¯çŸ©å½¢', width / 2, 30);
                ctx.fillText(`é¢ç§¯ = ${(14/3).toFixed(3)}`, width / 2, 50);
            };

            window.resetMeanValue = function() {
                drawAxes();
                drawFunction();
            };

            // åˆå§‹ç»˜åˆ¶
            drawAxes();
            drawFunction();
        }


        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–MathJax
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise().then(() => {
                    console.log('MathJaxå…¬å¼æ¸²æŸ“å®Œæˆ');
                });
            }
        });
    </script>
</body>
</html>