<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>线性代数学习网站 - 江苏转本专科</title>
    <!-- 预连接到CDN以提高加载速度 -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://polyfill.io">
    
    <!-- 延迟加载非关键CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></noscript>
    
    <!-- 异步加载脚本 -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'no-mathjax'
            },
            startup: {
                ready() {
                    MathJax.startup.defaultReady();
                    // 减少初始化时间
                    console.log('MathJax 已就绪');
                }
            }
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* 浅色主题 */
            --bg-color: #ffffff;
            --text-color: #333333;
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --card-bg: #f8f9fa;
            --border-color: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.1);
            --hover-bg: #f1f3f4;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --sidebar-bg: #2c3e50;
            --sidebar-text: #ecf0f1;
        }

        [data-theme="dark"] {
            /* 护眼模式 */
            --bg-color: #1a1a1a;
            --text-color: #e8e6e3;
            --primary-color: #4a90e2;
            --secondary-color: #2d3748;
            --accent-color: #e53e3e;
            --card-bg: #2d3748;
            --border-color: #4a5568;
            --shadow: rgba(0, 0, 0, 0.3);
            --hover-bg: #3a4a5c;
            --success-color: #48bb78;
            --warning-color: #ed8936;
            --sidebar-bg: #1a202c;
            --sidebar-text: #e2e8f0;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* 侧边栏样式 */
        .sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            color: var(--sidebar-text);
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .sidebar.collapsed {
            width: 80px;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .sidebar.collapsed .logo-text {
            display: none;
        }

        .toggle-sidebar {
            background: none;
            border: none;
            color: var(--sidebar-text);
            cursor: pointer;
            font-size: 1.2em;
            padding: 5px;
            border-radius: 4px;
            transition: background 0.3s ease;
        }

        .toggle-sidebar:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: var(--sidebar-text);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--primary-color);
            transform: translateX(5px);
        }

        .nav-link i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }

        .sidebar.collapsed .nav-text {
            display: none;
        }

        .theme-toggle {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
        }

        .theme-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .theme-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .sidebar.collapsed .theme-text {
            display: none;
        }

        /* 主内容区域 */
        .main-content {
            flex: 1;
            margin-left: 280px;
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 80px;
        }

        .content-header {
            background: var(--card-bg);
            padding: 20px 30px;
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 4px var(--shadow);
        }

        .content-header h1 {
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        .breadcrumb {
            color: #666;
            font-size: 14px;
        }

        .content-body {
            padding: 30px;
        }

        /* 卡片样式 */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px var(--shadow);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px var(--shadow);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
        }

        .card-header i {
            font-size: 1.5em;
            color: var(--primary-color);
            margin-right: 12px;
        }

        .card-header h2 {
            color: var(--secondary-color);
            font-size: 1.4em;
        }

        /* 知识点网格 */
        .knowledge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .knowledge-card {
            background: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .knowledge-card:hover {
            border-color: var(--primary-color);
            transform: scale(1.02);
        }

        .knowledge-card h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .knowledge-card p {
            color: var(--text-color);
            font-size: 14px;
            line-height: 1.5;
        }

        /* 例题和练习样式 */
        .problem-container {
            background: var(--bg-color);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .problem-title {
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .problem-content {
            margin-bottom: 15px;
            line-height: 1.8;
        }

        .solution {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid var(--border-color);
        }

        .solution-header {
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .solution-header i {
            margin-right: 8px;
        }

        /* 按钮样式 */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #219a52;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        /* 练习题样式 */
        .exercise-item {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .exercise-options {
            list-style: none;
            margin: 15px 0;
        }

        .exercise-options li {
            padding: 8px 0;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .exercise-options li:hover {
            color: var(--primary-color);
        }

        .exercise-options input[type="radio"] {
            margin-right: 10px;
        }

        /* 进度条 */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: fixed;
                transform: translateX(-100%);
                z-index: 1001;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .main-content.expanded {
                margin-left: 0;
            }

            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1002;
                background: var(--primary-color);
                color: white;
                border: none;
                padding: 10px;
                border-radius: 6px;
                cursor: pointer;
            }

            .knowledge-grid {
                grid-template-columns: 1fr;
            }

            .content-body {
                padding: 20px 15px;
            }
        }

        .mobile-menu-btn {
            display: none;
        }

        /* 动画效果 */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* 数学公式样式增强 */
        .mjx-chtml {
            font-size: 1.1em !important;
        }

        .math-block {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-color);
            overflow-x: auto;
        }

        /* 提示框样式 */
        .tip-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .tip-box i {
            margin-right: 8px;
        }

        /* 成功提示 */
        .success-message {
            background: var(--success-color);
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            margin: 10px 0;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .success-message.show {
            display: flex;
        }

        /* 错误提示 */
        .error-message {
            background: var(--accent-color);
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            margin: 10px 0;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .error-message.show {
            display: flex;
        }

        /* 矩阵计算器样式 */
        .matrix-grid {
            display: grid;
            gap: 5px;
            margin: 10px 0;
            border: 2px solid var(--border-color);
            padding: 10px;
            border-radius: 8px;
            background: var(--bg-color);
        }

        .matrix-input {
            width: 60px;
            height: 40px;
            text-align: center;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 14px;
        }

        .matrix-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        /* 成就卡片样式 */
        .achievement-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .achievement-card.unlocked {
            border-color: var(--success-color);
            background: linear-gradient(135deg, var(--success-color)20, var(--card-bg));
        }

        .achievement-card.unlocked::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: rotate(45deg) translateY(-100%); }
            100% { transform: rotate(45deg) translateY(100%); }
        }

        .achievement-icon {
            font-size: 3em;
            margin-bottom: 15px;
            filter: grayscale(1);
            transition: filter 0.3s ease;
        }

        .achievement-card.unlocked .achievement-icon {
            filter: grayscale(0);
        }

        .achievement-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 15px;
            display: inline-block;
        }

        .achievement-status.unlocked {
            background: var(--success-color);
            color: white;
        }

        .achievement-status.locked {
            background: var(--border-color);
            color: var(--text-color);
        }

        /* 统计项样式 */
        .stat-item {
            text-align: center;
            padding: 20px;
            background: var(--hover-bg);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--text-color);
            font-size: 14px;
        }

        /* 笔记样式 */
        .note-item {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .note-item:hover {
            box-shadow: 0 4px 12px var(--shadow);
            transform: translateY(-2px);
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .note-header h4 {
            color: var(--secondary-color);
            margin: 0;
        }

        .note-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 5px 8px;
            font-size: 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--primary-color);
            color: white;
        }

        .btn-small:hover {
            background: #2980b9;
            transform: scale(1.1);
        }

        .note-content {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .note-content p {
            margin: 8px 0;
        }

        .note-meta {
            font-size: 12px;
            color: #999;
            border-top: 1px solid var(--border-color);
            padding-top: 10px;
        }

        /* 新增练习题样式 */
        .difficulty-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 10px;
        }

        .difficulty-easy { background: var(--success-color); color: white; }
        .difficulty-medium { background: var(--warning-color); color: white; }
        .difficulty-hard { background: var(--accent-color); color: white; }

        /* 响应式改进 */
        @media (max-width: 768px) {
            .matrix-grid {
                padding: 5px;
            }
            
            .matrix-input {
                width: 45px;
                height: 35px;
                font-size: 12px;
            }
            
            .achievement-card {
                padding: 15px;
            }
            
            .achievement-icon {
                font-size: 2em;
            }
            
            .stat-number {
                font-size: 2em;
            }
        }

        /* 可視化組件樣式 */
        .visualization-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .viz-controls {
            flex: 1;
            min-width: 300px;
        }

        .transform-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .transform-btn, .operation-btn {
            padding: 8px 16px;
            border: 2px solid var(--accent-color);
            background: transparent;
            color: var(--accent-color);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .transform-btn:hover, .operation-btn:hover {
            background: var(--accent-color);
            color: white;
            transform: translateY(-2px);
        }

        .transform-btn.active, .operation-btn.active {
            background: var(--accent-color);
            color: white;
            box-shadow: 0 4px 12px rgba(69, 183, 209, 0.3);
        }

        .parameter-controls {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--text-color);
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--border-color);
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .visualization-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .canvas-container {
            position: relative;
            margin-bottom: 20px;
        }

        #transformCanvas, #vectorCanvas {
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: var(--card-bg);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .matrix-display {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .matrix-display h4 {
            margin: 0 0 10px 0;
            font-size: 0.9em;
            color: var(--text-color);
        }

        .matrix-values {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }

        .matrix-row {
            display: flex;
            gap: 8px;
            margin-bottom: 5px;
        }

        .matrix-row span {
            display: inline-block;
            min-width: 40px;
            text-align: center;
        }

        .legend {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .color-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .color-box.original {
            background: rgba(255, 107, 107, 0.8);
            border: 2px solid #ff6b6b;
        }

        .color-box.transformed {
            background: rgba(69, 183, 209, 0.8);
            border: 2px solid #45b7d1;
        }

        /* 向量可視化樣式 */
        .vector-visualization {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .vector-controls {
            flex: 1;
            min-width: 300px;
        }

        .vector-inputs {
            margin-bottom: 20px;
        }

        .vector-input-group {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .vector-input-group label {
            min-width: 80px;
            font-weight: 500;
        }

        .vector-input-group input {
            width: 80px;
            padding: 8px;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            text-align: center;
        }

        .vector-operations {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .calculation-result {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }

        .calculation-result h4 {
            margin: 0 0 10px 0;
            color: var(--accent-color);
        }

        .vector-canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .vector-info {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-width: 200px;
            padding: 5px 10px;
            background: var(--card-bg);
            border-radius: 5px;
        }

        /* 新增向量模塊樣式 */
        .control-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab-btn {
            padding: 12px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-color);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn.active,
        .tab-btn:hover {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .magnitude-display {
            font-size: 0.9em;
            color: var(--accent-color);
            font-weight: 500;
            margin-left: 10px;
        }

        .advanced-operations,
        .projection-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .scalar-input {
            margin: 15px 0;
            padding: 15px;
            background: rgba(69, 183, 209, 0.1);
            border-radius: 8px;
            border: 1px solid var(--accent-color);
        }

        .scalar-input label {
            font-weight: 500;
            margin-right: 10px;
        }

        .scalar-input input {
            width: 80px;
            padding: 6px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }

        .vector-properties,
        .projection-info {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-top: 15px;
        }

        .vector-properties h5 {
            margin: 0 0 10px 0;
            color: var(--accent-color);
        }

        .property-item {
            margin: 8px 0;
            padding: 5px 0;
        }

        .canvas-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .canvas-controls .btn {
            padding: 6px 12px;
            font-size: 0.9em;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .canvas-controls .btn:hover {
            background: var(--accent-color);
            color: white;
        }

        .info-section h5 {
            margin: 0 0 10px 0;
            color: var(--accent-color);
            text-align: center;
        }

        .detailed-result {
            margin-top: 10px;
            padding: 10px;
            background: rgba(69, 183, 209, 0.1);
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        /* 動畫效果增強 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeInUp 0.6s ease-out;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        /* 加載動畫 */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .loading {
            animation: pulse 1.5s ease-in-out infinite;
        }

        /* 响应式设计优化 */
        @media (max-width: 1024px) {
            .visualization-container,
            .vector-visualization {
                flex-direction: column;
            }
            
            .viz-controls,
            .vector-controls {
                min-width: unset;
            }

            .transform-buttons,
            .vector-operations {
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .transform-btn,
            .operation-btn {
                font-size: 0.8em;
                padding: 6px 12px;
            }

            #transformCanvas,
            #vectorCanvas {
                width: 300px;
                height: 300px;
            }

            .matrix-display {
                position: static;
                margin-top: 15px;
                background: var(--card-bg);
            }

            .vector-input-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .vector-input-group input {
                width: 100px;
            }
        }

        @media (max-width: 480px) {
            .transform-buttons,
            .vector-operations {
                flex-direction: column;
            }

            .transform-btn,
            .operation-btn {
                width: 100%;
                text-align: center;
            }

            #transformCanvas,
            #vectorCanvas {
                width: 250px;
                height: 250px;
            }
        }



        /* 向量概念網格樣式 */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .concept-item {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .concept-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(69, 183, 209, 0.15);
        }

        .concept-item h4 {
            color: var(--accent-color);
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .concept-item h4 i {
            font-size: 1.2em;
        }

        /* 向量運算理論樣式 */
        .vector-operations-theory {
            margin-top: 30px;
        }

        .vector-operations-theory h4 {
            color: var(--accent-color);
            margin-bottom: 20px;
            font-size: 1.4em;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        .operation-explanation {
            background: var(--card-bg);
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--accent-color);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .operation-explanation h5 {
            color: var(--accent-color);
            margin: 0 0 15px 0;
            font-size: 1.2em;
        }

        .operation-explanation ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .operation-explanation li {
            margin: 8px 0;
            color: var(--text-color);
        }

        /* 学习提示样式 */
        .learning-tips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tip-container {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(69, 183, 209, 0.1), rgba(255, 107, 107, 0.1));
            border-radius: 12px;
            border-left: 4px solid var(--accent-color);
            transition: transform 0.3s ease;
        }

        .tip-container:hover {
            transform: translateY(-5px);
        }

        .tip-icon {
            font-size: 2em;
            min-width: 50px;
            text-align: center;
        }

        .tip-content h4 {
            margin: 0 0 10px 0;
            color: var(--accent-color);
            font-size: 1.1em;
        }

        .tip-content p {
            margin: 0;
            line-height: 1.6;
            color: var(--text-color);
        }

        @media (max-width: 1024px) {

        }

        @media (max-width: 768px) {
            .learning-tips {
                grid-template-columns: 1fr;
            }
            
            .tip-container {
                flex-direction: column;
                text-align: center;
            }
            
            .matrix-2x2 input {
                width: 60px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <button class="mobile-menu-btn" onclick="toggleMobileSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="container">
        <!-- 侧边栏 -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-calculator"></i>
                    <span class="logo-text">线性代数</span>
                </div>
                <button class="toggle-sidebar" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('home')">
                        <i class="fas fa-home"></i>
                        <span class="nav-text">首页概览</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('linear-equations')">
                        <i class="fas fa-equals"></i>
                        <span class="nav-text">线性方程组</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('matrices')">
                        <i class="fas fa-th"></i>
                        <span class="nav-text">矩阵运算</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('determinants')">
                        <i class="fas fa-square-root-alt"></i>
                        <span class="nav-text">行列式</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('vectors')">
                        <i class="fas fa-vector-square"></i>
                        <span class="nav-text">向量空間</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('examples')">
                        <i class="fas fa-lightbulb"></i>
                        <span class="nav-text">例题示范</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('practice')">
                        <i class="fas fa-pencil-alt"></i>
                        <span class="nav-text">习题练习</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('calculator')">
                        <i class="fas fa-calculator"></i>
                        <span class="nav-text">矩阵计算器</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('achievements')">
                        <i class="fas fa-trophy"></i>
                        <span class="nav-text">学习成就</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('notes')">
                        <i class="fas fa-sticky-note"></i>
                        <span class="nav-text">学习笔记</span>
                    </a>
                </li>
            </ul>

            <div class="theme-toggle">
                <button class="theme-btn" onclick="toggleTheme()">
                    <i class="fas fa-moon" id="theme-icon"></i>
                    <span class="theme-text" id="theme-text">护眼模式</span>
                </button>
            </div>
        </nav>

        <!-- 主内容区域 -->
        <main class="main-content" id="mainContent">
            <!-- 首页概览 -->
            <section id="home" class="section active">
                <div class="content-header">
                    <h1>线性代数学习网站</h1>
                    <div class="breadcrumb">江苏转本专科 > 数学 > 线性代数</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-graduation-cap"></i>
                            <h2>欢迎来到线性代数学习平台</h2>
                        </div>
                        <p>本网站专为江苏转本专科学生设计，提供系统性的线性代数学习资源。我们致力于帮助您掌握线性方程组的解法、矩阵运算、行列式计算和向量空間理論等核心概念。</p>
                        
                        <div class="tip-box">
                            <i class="fas fa-info-circle"></i>
                            <strong>学习建议：</strong>建议按照线性方程组 → 矩阵运算 → 行列式 → 向量空间的顺序进行学习，每个章节都包含详细的理论讲解、交互式可视化工具和练习题。
                        </div>
                    </div>

                    <div class="knowledge-grid">
                        <div class="knowledge-card" onclick="showSection('linear-equations')">
                            <h3><i class="fas fa-equals"></i> 线性方程组</h3>
                            <p>学习线性方程组的基本概念、高斯消元法、矩阵形式表示以及解的判定与求解方法。</p>
                        </div>
                        <div class="knowledge-card" onclick="showSection('matrices')">
                            <h3><i class="fas fa-th"></i> 矩阵运算</h3>
                            <p>掌握矩阵的基本运算、矩阵的逆、矩阵的秩以及矩阵的初等变换等重要概念。</p>
                        </div>
                        <div class="knowledge-card" onclick="showSection('determinants')">
                            <h3><i class="fas fa-square-root-alt"></i> 行列式</h3>
                            <p>学习行列式的定义、性质、计算方法以及行列式在解线性方程组中的应用。</p>
                        </div>
                        <div class="knowledge-card" onclick="showSection('vectors')">
                            <h3><i class="fas fa-vector-square"></i> 向量空間</h3>
                            <p>深入理解向量的基礎概念、運算法則、幾何意義，以及向量投影等進階概念。</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-chart-line"></i>
                            <h2>学习进度</h2>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%" id="overall-progress"></div>
                        </div>
                        <p>总体学习进度: <span id="progress-text">0%</span></p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-primary" onclick="showSection('linear-equations')">
                                <i class="fas fa-play"></i>
                                开始学习
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 线性方程组 -->
            <section id="linear-equations" class="section">
                <div class="content-header">
                    <h1>线性方程组</h1>
                    <div class="breadcrumb">首页 > 线性方程组</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-book-open"></i>
                            <h2>基本概念</h2>
                        </div>
                        <p>线性方程组是由若干个线性方程组成的方程组。一般形式为：</p>
                        <div class="math-block">
                            $$\begin{cases}
                            a_{11}x_1 + a_{12}x_2 + \cdots + a_{1n}x_n = b_1 \\
                            a_{21}x_1 + a_{22}x_2 + \cdots + a_{2n}x_n = b_2 \\
                            \vdots \\
                            a_{m1}x_1 + a_{m2}x_2 + \cdots + a_{mn}x_n = b_m
                            \end{cases}$$
                        </div>
                        <p>其中 $a_{ij}$ 为系数，$x_j$ 为未知数，$b_i$ 为常数项。</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-cogs"></i>
                            <h2>高斯消元法</h2>
                        </div>
                        <p>高斯消元法是求解线性方程组的基本方法，通过初等行变换将增广矩阵化为阶梯形矩阵。</p>
                        
                        <h4>基本步骤：</h4>
                        <ol>
                            <li>写出增广矩阵 $(A|b)$</li>
                            <li>通过初等行变换化为阶梯形矩阵</li>
                            <li>回代求解</li>
                        </ol>

                        <div class="tip-box">
                            <i class="fas fa-lightbulb"></i>
                            <strong>重点提示：</strong>初等行变换包括：①交换两行；②某行乘以非零常数；③某行加上另一行的倍数。
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-search"></i>
                            <h2>解的判定</h2>
                        </div>
                        <p>对于线性方程组 $Ax = b$，解的情况取决于系数矩阵 $A$ 和增广矩阵 $(A|b)$ 的秩：</p>
                        <ul>
                            <li><strong>有唯一解：</strong>$\text{rank}(A) = \text{rank}(A|b) = n$（n为未知数个数）</li>
                            <li><strong>有无穷多解：</strong>$\text{rank}(A) = \text{rank}(A|b) < n$</li>
                            <li><strong>无解：</strong>$\text{rank}(A) < \text{rank}(A|b)$</li>
                        </ul>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-calculator"></i>
                            <h2>齐次线性方程组</h2>
                        </div>
                        <p>齐次线性方程组的一般形式为 $Ax = 0$，其特点是：</p>
                        <ul>
                            <li>总是有零解 $x = 0$</li>
                            <li>当 $\text{rank}(A) = n$ 时，只有零解</li>
                            <li>当 $\text{rank}(A) < n$ 时，有无穷多解</li>
                        </ul>
                        
                        <div class="math-block">
                            <p><strong>基础解系：</strong>齐次方程组 $Ax = 0$ 的基础解系是其解空间的一个基，包含 $n - \text{rank}(A)$ 个线性无关的解向量。</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 矩阵运算 -->
            <section id="matrices" class="section">
                <div class="content-header">
                    <h1>矩阵运算</h1>
                    <div class="breadcrumb">首页 > 矩阵运算</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-th"></i>
                            <h2>矩阵基本概念</h2>
                        </div>
                        <p>矩阵是由数字排成的矩形阵列。一个 $m \times n$ 矩阵 $A$ 可以表示为：</p>
                        <div class="math-block">
                            $$A = \begin{pmatrix}
                            a_{11} & a_{12} & \cdots & a_{1n} \\
                            a_{21} & a_{22} & \cdots & a_{2n} \\
                            \vdots & \vdots & \ddots & \vdots \\
                            a_{m1} & a_{m2} & \cdots & a_{mn}
                            \end{pmatrix}$$
                        </div>
                        <p>其中 $a_{ij}$ 表示第 $i$ 行第 $j$ 列的元素。</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-plus"></i>
                            <h2>矩阵运算</h2>
                        </div>
                        
                        <h4>1. 矩阵加法</h4>
                        <p>只有同型矩阵才能相加，对应元素相加：</p>
                        <div class="math-block">
                            $$(A + B)_{ij} = a_{ij} + b_{ij}$$
                        </div>

                        <h4>2. 数乘矩阵</h4>
                        <p>数 $k$ 乘以矩阵 $A$：</p>
                        <div class="math-block">
                            $$(kA)_{ij} = k \cdot a_{ij}$$
                        </div>

                        <h4>3. 矩阵乘法</h4>
                        <p>矩阵 $A_{m \times p}$ 与矩阵 $B_{p \times n}$ 的乘积：</p>
                        <div class="math-block">
                            $$(AB)_{ij} = \sum_{k=1}^{p} a_{ik}b_{kj}$$
                        </div>
                        
                        <div class="tip-box">
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>注意：</strong>矩阵乘法不满足交换律，即一般情况下 $AB \neq BA$。
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-undo"></i>
                            <h2>逆矩阵</h2>
                        </div>
                        <p>对于 $n$ 阶方阵 $A$，如果存在 $n$ 阶方阵 $B$ 使得 $AB = BA = I$，则称 $B$ 为 $A$ 的逆矩阵，记作 $A^{-1}$。</p>
                        
                        <h4>逆矩阵的性质：</h4>
                        <ul>
                            <li>$(A^{-1})^{-1} = A$</li>
                            <li>$(AB)^{-1} = B^{-1}A^{-1}$</li>
                            <li>$(A^T)^{-1} = (A^{-1})^T$</li>
                        </ul>

                        <h4>求逆矩阵的方法：</h4>
                        <p><strong>初等行变换法：</strong>对 $(A|I)$ 进行初等行变换，化为 $(I|A^{-1})$</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-layer-group"></i>
                            <h2>矩阵的秩</h2>
                        </div>
                        <p>矩阵的秩是矩阵中线性无关行（或列）的最大个数。</p>
                        
                        <h4>求矩阵秩的方法：</h4>
                        <ol>
                            <li>对矩阵进行初等行变换</li>
                            <li>化为阶梯形矩阵</li>
                            <li>非零行的个数即为矩阵的秩</li>
                        </ol>

                        <h4>矩阵秩的性质：</h4>
                        <ul>
                            <li>$\text{rank}(A) = \text{rank}(A^T)$</li>
                            <li>$\text{rank}(AB) \leq \min\{\text{rank}(A), \text{rank}(B)\}$</li>
                            <li>$\text{rank}(A + B) \leq \text{rank}(A) + \text{rank}(B)$</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 行列式 -->
            <section id="determinants" class="section">
                <div class="content-header">
                    <h1>行列式</h1>
                    <div class="breadcrumb">首页 > 行列式</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-square-root-alt"></i>
                            <h2>行列式的定义</h2>
                        </div>
                        <p>$n$ 阶行列式是一个与 $n$ 阶方阵对应的数值，记作 $|A|$ 或 $\det(A)$。</p>
                        
                        <h4>二阶行列式：</h4>
                        <div class="math-block">
                            $$\begin{vmatrix}
                            a & b \\
                            c & d
                            \end{vmatrix} = ad - bc$$
                        </div>

                        <h4>三阶行列式：</h4>
                        <div class="math-block">
                            $$\begin{vmatrix}
                            a_{11} & a_{12} & a_{13} \\
                            a_{21} & a_{22} & a_{23} \\
                            a_{31} & a_{32} & a_{33}
                            \end{vmatrix} = a_{11}\begin{vmatrix}a_{22} & a_{23} \\ a_{32} & a_{33}\end{vmatrix} - a_{12}\begin{vmatrix}a_{21} & a_{23} \\ a_{31} & a_{33}\end{vmatrix} + a_{13}\begin{vmatrix}a_{21} & a_{22} \\ a_{31} & a_{32}\end{vmatrix}$$
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-list"></i>
                            <h2>行列式的性质</h2>
                        </div>
                        <ol>
                            <li><strong>转置性质：</strong>$|A^T| = |A|$</li>
                            <li><strong>交换性质：</strong>交换两行（列），行列式变号</li>
                            <li><strong>数乘性质：</strong>某行（列）乘以常数 $k$，行列式乘以 $k$</li>
                            <li><strong>线性性质：</strong>某行（列）是两个向量之和，行列式等于两个行列式之和</li>
                            <li><strong>零性质：</strong>有两行（列）相同或成比例，行列式为零</li>
                            <li><strong>倍加性质：</strong>某行（列）加上另一行（列）的倍数，行列式不变</li>
                        </ol>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-calculator"></i>
                            <h2>行列式的计算</h2>
                        </div>
                        
                        <h4>1. 按行（列）展开</h4>
                        <p>按第 $i$ 行展开：</p>
                        <div class="math-block">
                            $$|A| = \sum_{j=1}^{n} a_{ij}A_{ij} = \sum_{j=1}^{n} a_{ij}(-1)^{i+j}M_{ij}$$
                        </div>
                        <p>其中 $M_{ij}$ 是元素 $a_{ij}$ 的余子式，$A_{ij}$ 是代数余子式。</p>

                        <h4>2. 化三角形法</h4>
                        <p>利用行列式性质，通过初等行变换将行列式化为上三角形，然后计算主对角线元素的乘积。</p>

                        <div class="tip-box">
                            <i class="fas fa-lightbulb"></i>
                            <strong>计算技巧：</strong>选择零元素最多的行或列进行展开，可以简化计算。
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-link"></i>
                            <h2>行列式与矩阵的关系</h2>
                        </div>
                        
                        <h4>重要关系：</h4>
                        <ul>
                            <li>$|AB| = |A||B|$（方阵）</li>
                            <li>$|kA| = k^n|A|$（$n$ 阶方阵）</li>
                            <li>$A$ 可逆当且仅当 $|A| \neq 0$</li>
                            <li>$|A^{-1}| = \frac{1}{|A|}$</li>
                        </ul>

                        <h4>克拉默法则：</h4>
                        <p>对于 $n$ 元线性方程组 $Ax = b$，当 $|A| \neq 0$ 时，方程组有唯一解：</p>
                        <div class="math-block">
                            $$x_j = \frac{|A_j|}{|A|}$$
                        </div>
                        <p>其中 $A_j$ 是将矩阵 $A$ 的第 $j$ 列替换为向量 $b$ 得到的矩阵。</p>
                    </div>



                </div>
            </section>

            <!-- 向量空間 -->
            <section id="vectors" class="section">
                <div class="content-header">
                    <h1>向量空間</h1>
                    <div class="breadcrumb">首页 > 向量空間</div>
                </div>
                <div class="content-body">
                    <!-- 向量基礎理論 -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-vector-square"></i>
                            <h2>向量基礎概念</h2>
                        </div>
                        
                        <div class="math-block">
                            <h4>向量的定義</h4>
                            <p>向量是既有大小又有方向的量，可以表示為 $\vec{v} = (v_1, v_2, \ldots, v_n)$</p>
                        </div>

                        <div class="concept-grid">
                            <div class="concept-item">
                                <h4><i class="fas fa-ruler"></i> 向量長度（模）</h4>
                                <div class="math-block">
                                    對於二維向量 $\vec{v} = (x, y)$：
                                    $$|\vec{v}| = \sqrt{x^2 + y^2}$$
                                </div>
                                <p>向量的模表示向量的大小或長度。</p>
                            </div>

                            <div class="concept-item">
                                <h4><i class="fas fa-compass"></i> 單位向量</h4>
                                <div class="math-block">
                                    $$\hat{v} = \frac{\vec{v}}{|\vec{v}|}$$
                                </div>
                                <p>單位向量是模長為1的向量，保持原方向但長度標準化。</p>
                            </div>

                            <div class="concept-item">
                                <h4><i class="fas fa-angle-right"></i> 向量夾角</h4>
                                <div class="math-block">
                                    $$\cos\theta = \frac{\vec{a} \cdot \vec{b}}{|\vec{a}||\vec{b}|}$$
                                </div>
                                <p>两向量间的角度可通过点积公式计算。</p>
                            </div>

                            <div class="concept-item">
                                <h4><i class="fas fa-arrows-alt-h"></i> 向量投影</h4>
                                <div class="math-block">
                                    $$\text{proj}_{\vec{b}}\vec{a} = \frac{\vec{a} \cdot \vec{b}}{|\vec{b}|^2}\vec{b}$$
                                </div>
                                <p>向量 $\vec{a}$ 在向量 $\vec{b}$ 方向上的投影。</p>
                            </div>
                        </div>

                        <div class="vector-operations-theory">
                            <h4>向量運算</h4>
                            
                            <div class="operation-explanation">
                                <h5>1. 向量加法</h5>
                                <div class="math-block">
                                    $$\vec{a} + \vec{b} = (a_1 + b_1, a_2 + b_2)$$
                                </div>
                                <p><strong>幾何意義：</strong>遵循平行四邊形法則或三角形法則</p>
                                <ul>
                                    <li>交換律：$\vec{a} + \vec{b} = \vec{b} + \vec{a}$</li>
                                    <li>結合律：$(\vec{a} + \vec{b}) + \vec{c} = \vec{a} + (\vec{b} + \vec{c})$</li>
                                </ul>
                            </div>

                            <div class="operation-explanation">
                                <h5>2. 數量乘法</h5>
                                <div class="math-block">
                                    $$k\vec{a} = (ka_1, ka_2)$$
                                </div>
                                <p><strong>幾何意義：</strong></p>
                                <ul>
                                    <li>$k > 1$：向量伸長，方向不變</li>
                                    <li>$0 < k < 1$：向量縮短，方向不變</li>
                                    <li>$k < 0$：向量反向並縮放</li>
                                </ul>
                            </div>

                            <div class="operation-explanation">
                                <h5>3. 點積（內積）</h5>
                                <div class="math-block">
                                    $$\vec{a} \cdot \vec{b} = a_1b_1 + a_2b_2 = |\vec{a}||\vec{b}|\cos\theta$$
                                </div>
                                <p><strong>应用：</strong></p>
                                <ul>
                                    <li>计算向量夹角</li>
                                    <li>判断向量垂直（点积为0）</li>
                                    <li>计算向量投影</li>
                                </ul>
                            </div>

                            <div class="operation-explanation">
                                <h5>4. 外積（叉積）</h5>
                                <div class="math-block">
                                    對於三維向量：
                                    $$\vec{a} \times \vec{b} = (a_2b_3 - a_3b_2, a_3b_1 - a_1b_3, a_1b_2 - a_2b_1)$$
                                </div>
                                <p><strong>性質：</strong></p>
                                <ul>
                                    <li>结果垂直于两个原向量</li>
                                    <li>模長等於兩向量構成的平行四邊形面積</li>
                                    <li>反交換律：$\vec{a} \times \vec{b} = -\vec{b} \times \vec{a}$</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 向量運算可視化 -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-arrows-alt"></i>
                            <h2>向量運算可視化</h2>
                        </div>
                        
                        <div class="vector-visualization">
                            <div class="vector-controls">
                                <div class="control-tabs">
                                    <button class="tab-btn active" data-tab="basic">基礎運算</button>
                                    <button class="tab-btn" data-tab="advanced">進階運算</button>
                                    <button class="tab-btn" data-tab="projection">投影分析</button>
                                </div>

                                <!-- 基礎運算標籤頁 -->
                                <div class="tab-content active" id="basic-tab">
                                    <h4>向量輸入：</h4>
                                    <div class="vector-inputs">
                                        <div class="vector-input-group">
                                            <label>向量 A:</label>
                                            <input type="number" id="vectorAx" placeholder="x" value="3" step="0.5">
                                            <input type="number" id="vectorAy" placeholder="y" value="2" step="0.5">
                                            <span class="magnitude-display">|A| = <span id="magnitudeA">3.61</span></span>
                                        </div>
                                        <div class="vector-input-group">
                                            <label>向量 B:</label>
                                            <input type="number" id="vectorBx" placeholder="x" value="1" step="0.5">
                                            <input type="number" id="vectorBy" placeholder="y" value="4" step="0.5">
                                            <span class="magnitude-display">|B| = <span id="magnitudeB">4.12</span></span>
                                        </div>
                                    </div>
                                    
                                    <div class="vector-operations">
                                        <button class="btn operation-btn active" data-operation="add">A + B</button>
                                        <button class="btn operation-btn" data-operation="subtract">A - B</button>
                                        <button class="btn operation-btn" data-operation="scale">k·A</button>
                                        <button class="btn operation-btn" data-operation="dot">A · B</button>
                                        <button class="btn operation-btn" data-operation="normalize">單位化</button>
                                    </div>

                                    <div class="scalar-input" id="scalarInput" style="display: none;">
                                        <label>縮放因子 k:</label>
                                        <input type="number" id="scalarK" value="2" step="0.1">
                                    </div>
                                </div>

                                <!-- 進階運算標籤頁 -->
                                <div class="tab-content" id="advanced-tab">
                                    <h4>高級向量運算：</h4>
                                    <div class="advanced-operations">
                                        <button class="btn operation-btn" data-operation="angle">计算夹角</button>
                                        <button class="btn operation-btn" data-operation="perpendicular">求垂直向量</button>
                                        <button class="btn operation-btn" data-operation="parallel">平行分量</button>
                                        <button class="btn operation-btn" data-operation="area">平行四邊形面積</button>
                                    </div>
                                    
                                    <div class="vector-properties">
                                        <h5>向量性質：</h5>
                                        <div class="property-item">
                                            <strong>夾角：</strong> <span id="angleDisplay">56.3°</span>
                                        </div>
                                        <div class="property-item">
                                            <strong>是否垂直：</strong> <span id="perpendicularDisplay">否</span>
                                        </div>
                                        <div class="property-item">
                                            <strong>是否平行：</strong> <span id="parallelDisplay">否</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- 投影分析標籤頁 -->
                                <div class="tab-content" id="projection-tab">
                                    <h4>向量投影：</h4>
                                    <div class="projection-controls">
                                        <button class="btn operation-btn" data-operation="proj-a-on-b">A在B上的投影</button>
                                        <button class="btn operation-btn" data-operation="proj-b-on-a">B在A上的投影</button>
                                        <button class="btn operation-btn" data-operation="show-components">顯示分量</button>
                                    </div>
                                    
                                    <div class="projection-info">
                                        <div class="info-item">
                                            <strong>投影長度：</strong> <span id="projectionLength">2.43</span>
                                        </div>
                                        <div class="info-item">
                                            <strong>投影向量：</strong> <span id="projectionVector">(0.24, 0.97)</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="calculation-result">
                                    <h4>计算结果：</h4>
                                    <div id="vectorResult">向量加法：(4, 6)</div>
                                    <div id="detailedResult" class="detailed-result"></div>
                                </div>
                            </div>
                            
                            <div class="vector-canvas-container">
                                <canvas id="vectorCanvas" width="450" height="450"></canvas>
                                <div class="canvas-controls">
                                    <button class="btn grid-toggle" onclick="toggleGrid()">切換網格</button>
                                    <button class="btn zoom-btn" onclick="zoomIn()">放大</button>
                                    <button class="btn zoom-btn" onclick="zoomOut()">縮小</button>
                                    <button class="btn reset-btn" onclick="resetView()">重設視圖</button>
                                </div>
                                <div class="vector-info">
                                    <div class="info-section">
                                        <h5>向量資訊</h5>
                                        <div class="info-item">
                                            <span style="color: #ff6b6b;">● 向量 A</span>
                                            <span id="vectorAInfo">(3, 2)</span>
                                        </div>
                                        <div class="info-item">
                                            <span style="color: #4ecdc4;">● 向量 B</span>
                                            <span id="vectorBInfo">(1, 4)</span>
                                        </div>
                                        <div class="info-item">
                                            <span style="color: #45b7d1;">● 結果向量</span>
                                            <span id="resultVectorInfo">(4, 6)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 矩陣變換可視化 -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-magic"></i>
                            <h2>矩陣變換可視化</h2>
                        </div>
                        
                        <div class="visualization-container">
                            <div class="viz-controls">
                                <h4>選擇變換類型：</h4>
                                <div class="transform-buttons">
                                    <button class="btn transform-btn active" data-transform="identity">恆等變換</button>
                                    <button class="btn transform-btn" data-transform="scale">縮放變換</button>
                                    <button class="btn transform-btn" data-transform="rotate">旋轉變換</button>
                                    <button class="btn transform-btn" data-transform="shear">剪切變換</button>
                                    <button class="btn transform-btn" data-transform="reflect">反射變換</button>
                                </div>
                                
                                <div class="parameter-controls">
                                    <div class="control-group">
                                        <label for="scaleX">X軸縮放: <span id="scaleXValue">1.0</span></label>
                                        <input type="range" id="scaleX" min="0.1" max="3" step="0.1" value="1">
                                    </div>
                                    <div class="control-group">
                                        <label for="scaleY">Y軸縮放: <span id="scaleYValue">1.0</span></label>
                                        <input type="range" id="scaleY" min="0.1" max="3" step="0.1" value="1">
                                    </div>
                                    <div class="control-group">
                                        <label for="rotation">旋轉角度: <span id="rotationValue">0°</span></label>
                                        <input type="range" id="rotation" min="0" max="360" step="5" value="0">
                                    </div>
                                    <div class="control-group">
                                        <label for="shearX">X軸剪切: <span id="shearXValue">0.0</span></label>
                                        <input type="range" id="shearX" min="-2" max="2" step="0.1" value="0">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="visualization-area">
                                <div class="canvas-container">
                                    <canvas id="transformCanvas" width="400" height="400"></canvas>
                                    <div class="matrix-display">
                                        <h4>變換矩陣：</h4>
                                        <div class="matrix-values" id="matrixDisplay">
                                            <div class="matrix-row">
                                                <span>[</span>
                                                <span id="m11">1.00</span>
                                                <span id="m12">0.00</span>
                                                <span>]</span>
                                            </div>
                                            <div class="matrix-row">
                                                <span>[</span>
                                                <span id="m21">0.00</span>
                                                <span id="m22">1.00</span>
                                                <span>]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="legend">
                                    <div class="legend-item">
                                        <div class="color-box original"></div>
                                        <span>原始圖形</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="color-box transformed"></div>
                                        <span>變換後圖形</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>





                    <!-- 学习提示 -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-lightbulb"></i>
                            <h2>學習提示與技巧</h2>
                        </div>
                        
                        <div class="learning-tips">
                            <div class="tip-container">
                                <div class="tip-icon">💡</div>
                                <div class="tip-content">
                                    <h4>理解矩陣變換</h4>
                                    <p>矩陣變換可以想像為對空間中所有點的統一操作。通過可視化，你可以直觀地看到縮放、旋轉、剪切等變換如何影響圖形。</p>
                                </div>
                            </div>
                            
                            <div class="tip-container">
                                <div class="tip-icon">🔍</div>
                                <div class="tip-content">
                                    <h4>向量運算的幾何意義</h4>
                                    <p>向量加法遵循平行四邊形法則，向量減法可以理解為從終點到起點的向量。點積的幾何意義與兩向量的夾角和長度有關。</p>
                                </div>
                            </div>
                            

                            
                            <div class="tip-container">
                                <div class="tip-icon">🎯</div>
                                <div class="tip-content">
                                    <h4>學習建議</h4>
                                    <p>多動手操作這些可視化工具，改變參數觀察結果變化。理論結合實踐，能更深入地理解線性代數的本質。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 例题示范 -->
            <section id="examples" class="section">
                <div class="content-header">
                    <h1>例题示范</h1>
                    <div class="breadcrumb">首页 > 例题示范</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-lightbulb"></i>
                            <h2>线性方程组求解</h2>
                        </div>
                        
                        <div class="problem-container">
                            <div class="problem-title">例题1：用高斯消元法求解线性方程组</div>
                            <div class="problem-content">
                                <div class="math-block">
                                    $$\begin{cases}
                                    x_1 + 2x_2 + x_3 = 4 \\
                                    2x_1 + x_2 - x_3 = 1 \\
                                    x_1 - x_2 + 2x_3 = 5
                                    \end{cases}$$
                                </div>
                            </div>
                            
                            <div class="solution">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i>
                                    详细解答
                                </div>
                                <p><strong>步骤1：</strong>写出增广矩阵</p>
                                <div class="math-block">
                                    $$(A|b) = \begin{pmatrix}
                                    1 & 2 & 1 & | & 4 \\
                                    2 & 1 & -1 & | & 1 \\
                                    1 & -1 & 2 & | & 5
                                    \end{pmatrix}$$
                                </div>
                                
                                <p><strong>步骤2：</strong>进行初等行变换</p>
                                <p>$R_2 - 2R_1 \rightarrow R_2$，$R_3 - R_1 \rightarrow R_3$：</p>
                                <div class="math-block">
                                    $$\begin{pmatrix}
                                    1 & 2 & 1 & | & 4 \\
                                    0 & -3 & -3 & | & -7 \\
                                    0 & -3 & 1 & | & 1
                                    \end{pmatrix}$$
                                </div>
                                
                                <p>$R_3 - R_2 \rightarrow R_3$：</p>
                                <div class="math-block">
                                    $$\begin{pmatrix}
                                    1 & 2 & 1 & | & 4 \\
                                    0 & -3 & -3 & | & -7 \\
                                    0 & 0 & 4 & | & 8
                                    \end{pmatrix}$$
                                </div>
                                
                                <p><strong>步骤3：</strong>回代求解</p>
                                <p>从第三行：$4x_3 = 8 \Rightarrow x_3 = 2$</p>
                                <p>从第二行：$-3x_2 - 3(2) = -7 \Rightarrow x_2 = \frac{1}{3}$</p>
                                <p>从第一行：$x_1 + 2(\frac{1}{3}) + 2 = 4 \Rightarrow x_1 = \frac{4}{3}$</p>
                                
                                <p><strong>答案：</strong>$x_1 = \frac{4}{3}$, $x_2 = \frac{1}{3}$, $x_3 = 2$</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-th"></i>
                            <h2>矩阵运算</h2>
                        </div>
                        
                        <div class="problem-container">
                            <div class="problem-title">例题2：求矩阵的逆</div>
                            <div class="problem-content">
                                <p>求矩阵 $A = \begin{pmatrix} 1 & 2 \\ 3 & 4 \end{pmatrix}$ 的逆矩阵。</p>
                            </div>
                            
                            <div class="solution">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i>
                                    详细解答
                                </div>
                                <p><strong>方法1：公式法</strong></p>
                                <p>首先计算行列式：$|A| = 1 \times 4 - 2 \times 3 = -2 \neq 0$</p>
                                <p>所以 $A$ 可逆。</p>
                                <div class="math-block">
                                    $$A^{-1} = \frac{1}{|A|}\begin{pmatrix} 4 & -2 \\ -3 & 1 \end{pmatrix} = \frac{1}{-2}\begin{pmatrix} 4 & -2 \\ -3 & 1 \end{pmatrix} = \begin{pmatrix} -2 & 1 \\ \frac{3}{2} & -\frac{1}{2} \end{pmatrix}$$
                                </div>
                                
                                <p><strong>方法2：初等行变换法</strong></p>
                                <p>对 $(A|I)$ 进行初等行变换：</p>
                                <div class="math-block">
                                    $$\begin{pmatrix} 1 & 2 & | & 1 & 0 \\ 3 & 4 & | & 0 & 1 \end{pmatrix}$$
                                </div>
                                <p>$R_2 - 3R_1 \rightarrow R_2$：</p>
                                <div class="math-block">
                                    $$\begin{pmatrix} 1 & 2 & | & 1 & 0 \\ 0 & -2 & | & -3 & 1 \end{pmatrix}$$
                                </div>
                                <p>$-\frac{1}{2}R_2 \rightarrow R_2$，$R_1 - 2R_2 \rightarrow R_1$：</p>
                                <div class="math-block">
                                    $$\begin{pmatrix} 1 & 0 & | & -2 & 1 \\ 0 & 1 & | & \frac{3}{2} & -\frac{1}{2} \end{pmatrix}$$
                                </div>
                                <p><strong>答案：</strong>$A^{-1} = \begin{pmatrix} -2 & 1 \\ \frac{3}{2} & -\frac{1}{2} \end{pmatrix}$</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-square-root-alt"></i>
                            <h2>行列式计算</h2>
                        </div>
                        
                        <div class="problem-container">
                            <div class="problem-title">例题3：计算三阶行列式</div>
                            <div class="problem-content">
                                <p>计算行列式：</p>
                                <div class="math-block">
                                    $$D = \begin{vmatrix}
                                    1 & 2 & 3 \\
                                    4 & 5 & 6 \\
                                    7 & 8 & 9
                                    \end{vmatrix}$$
                                </div>
                            </div>
                            
                            <div class="solution">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i>
                                    详细解答
                                </div>
                                <p><strong>方法1：按第一行展开</strong></p>
                                <div class="math-block">
                                    $$D = 1 \cdot \begin{vmatrix} 5 & 6 \\ 8 & 9 \end{vmatrix} - 2 \cdot \begin{vmatrix} 4 & 6 \\ 7 & 9 \end{vmatrix} + 3 \cdot \begin{vmatrix} 4 & 5 \\ 7 & 8 \end{vmatrix}$$
                                </div>
                                <p>$= 1(5 \times 9 - 6 \times 8) - 2(4 \times 9 - 6 \times 7) + 3(4 \times 8 - 5 \times 7)$</p>
                                <p>$= 1(45 - 48) - 2(36 - 42) + 3(32 - 35)$</p>
                                <p>$= 1(-3) - 2(-6) + 3(-3)$</p>
                                <p>$= -3 + 12 - 9 = 0$</p>
                                
                                <p><strong>方法2：化三角形</strong></p>
                                <p>观察发现第二行减去第一行得到 $(3, 3, 3)$，第三行减去第一行得到 $(6, 6, 6)$</p>
                                <p>由于第二行和第三行成比例，所以行列式为0。</p>
                                
                                <p><strong>答案：</strong>$D = 0$</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-graduation-cap"></i>
                            <h2>综合应用题</h2>
                        </div>
                        
                        <div class="problem-container">
                            <div class="problem-title">例题4：利用克拉默法则求解</div>
                            <div class="problem-content">
                                <p>用克拉默法则求解线性方程组：</p>
                                <div class="math-block">
                                    $$\begin{cases}
                                    2x + 3y = 7 \\
                                    x - y = 1
                                    \end{cases}$$
                                </div>
                            </div>
                            
                            <div class="solution">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i>
                                    详细解答
                                </div>
                                <p><strong>步骤1：</strong>计算系数矩阵的行列式</p>
                                <div class="math-block">
                                    $$D = \begin{vmatrix} 2 & 3 \\ 1 & -1 \end{vmatrix} = 2 \times (-1) - 3 \times 1 = -5 \neq 0$$
                                </div>
                                
                                <p><strong>步骤2：</strong>计算 $D_x$ 和 $D_y$</p>
                                <div class="math-block">
                                    $$D_x = \begin{vmatrix} 7 & 3 \\ 1 & -1 \end{vmatrix} = 7 \times (-1) - 3 \times 1 = -10$$
                                </div>
                                <div class="math-block">
                                    $$D_y = \begin{vmatrix} 2 & 7 \\ 1 & 1 \end{vmatrix} = 2 \times 1 - 7 \times 1 = -5$$
                                </div>
                                
                                <p><strong>步骤3：</strong>应用克拉默法则</p>
                                <p>$x = \frac{D_x}{D} = \frac{-10}{-5} = 2$</p>
                                <p>$y = \frac{D_y}{D} = \frac{-5}{-5} = 1$</p>
                                
                                <p><strong>答案：</strong>$x = 2$, $y = 1$</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 习题练习 -->
            <section id="practice" class="section">
                <div class="content-header">
                    <h1>习题练习</h1>
                    <div class="breadcrumb">首页 > 习题练习</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-pencil-alt"></i>
                            <h2>在线练习系统</h2>
                        </div>
                        <p>通过以下练习题检验您的学习效果。每道题都有详细的解析，帮助您巩固知识点。</p>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%" id="practice-progress"></div>
                        </div>
                        <p>练习进度: <span id="practice-progress-text">0/10</span></p>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 1 <span class="difficulty-badge difficulty-easy">簡單</span></h4>
                        <p>下列哪个矩阵运算是正确的？</p>
                        <div class="math-block">
                            设 $A = \begin{pmatrix} 1 & 2 \\ 3 & 4 \end{pmatrix}$, $B = \begin{pmatrix} 5 & 6 \\ 7 & 8 \end{pmatrix}$
                        </div>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q1" value="A"> $AB = \begin{pmatrix} 19 & 22 \\ 43 & 50 \end{pmatrix}$</li>
                            <li><input type="radio" name="q1" value="B"> $AB = \begin{pmatrix} 6 & 8 \\ 10 & 12 \end{pmatrix}$</li>
                            <li><input type="radio" name="q1" value="C"> $AB = \begin{pmatrix} 5 & 12 \\ 21 & 32 \end{pmatrix}$</li>
                            <li><input type="radio" name="q1" value="D"> $AB = BA$</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(1, 'A')">提交答案</button>
                        <div id="result1" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error1" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 2 <span class="difficulty-badge difficulty-easy">簡單</span></h4>
                        <p>计算二阶行列式 $\begin{vmatrix} 3 & -2 \\ 1 & 4 \end{vmatrix}$ 的值：</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q2" value="A"> 10</li>
                            <li><input type="radio" name="q2" value="B"> 14</li>
                            <li><input type="radio" name="q2" value="C"> -14</li>
                            <li><input type="radio" name="q2" value="D"> 2</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(2, 'B')">提交答案</button>
                        <div id="result2" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error2" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 3 <span class="difficulty-badge difficulty-medium">中等</span></h4>
                        <p>线性方程组 $\begin{cases} x + 2y = 5 \\ 2x + 4y = 10 \end{cases}$ 的解的情况是：</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q3" value="A"> 有唯一解</li>
                            <li><input type="radio" name="q3" value="B"> 有无穷多解</li>
                            <li><input type="radio" name="q3" value="C"> 无解</li>
                            <li><input type="radio" name="q3" value="D"> 无法确定</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(3, 'B')">提交答案</button>
                        <div id="result3" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error3" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 4 <span class="difficulty-badge difficulty-easy">簡單</span></h4>
                        <p>矩阵 $A = \begin{pmatrix} 2 & 0 \\ 0 & 3 \end{pmatrix}$ 的逆矩阵是：</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q4" value="A"> $\begin{pmatrix} \frac{1}{2} & 0 \\ 0 & \frac{1}{3} \end{pmatrix}$</li>
                            <li><input type="radio" name="q4" value="B"> $\begin{pmatrix} 3 & 0 \\ 0 & 2 \end{pmatrix}$</li>
                            <li><input type="radio" name="q4" value="C"> $\begin{pmatrix} -2 & 0 \\ 0 & -3 \end{pmatrix}$</li>
                            <li><input type="radio" name="q4" value="D"> 不存在逆矩阵</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(4, 'A')">提交答案</button>
                        <div id="result4" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error4" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 5 <span class="difficulty-badge difficulty-medium">中等</span></h4>
                        <p>齐次线性方程组 $\begin{cases} x + y + z = 0 \\ 2x + 2y + 2z = 0 \end{cases}$ 的基础解系包含几个解向量？</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q5" value="A"> 1个</li>
                            <li><input type="radio" name="q5" value="B"> 2个</li>
                            <li><input type="radio" name="q5" value="C"> 3个</li>
                            <li><input type="radio" name="q5" value="D"> 0个</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(5, 'B')">提交答案</button>
                        <div id="result5" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error5" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 6 <span class="difficulty-badge difficulty-hard">困难</span></h4>
                        <p>设矩阵 $A = \begin{pmatrix} 1 & 2 & 3 \\ 0 & 1 & 4 \\ 0 & 0 & 2 \end{pmatrix}$，则 $A^{-1}$ 的第一行第三列元素为：</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q6" value="A"> $-\frac{5}{2}$</li>
                            <li><input type="radio" name="q6" value="B"> $\frac{5}{2}$</li>
                            <li><input type="radio" name="q6" value="C"> $-2$</li>
                            <li><input type="radio" name="q6" value="D"> $2$</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(6, 'A')">提交答案</button>
                        <div id="result6" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error6" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 7 <span class="difficulty-badge difficulty-easy">簡單</span></h4>
                        <p>若矩阵 $A$ 和 $B$ 均为 $3 \times 3$ 矩阵，且 $|A| = 2$，$|B| = -3$，则 $|2AB|$ 等于：</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q7" value="A"> $-6$</li>
                            <li><input type="radio" name="q7" value="B"> $-48$</li>
                            <li><input type="radio" name="q7" value="C"> $48$</li>
                            <li><input type="radio" name="q7" value="D"> $12$</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(7, 'B')">提交答案</button>
                        <div id="result7" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error7" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 8 <span class="difficulty-badge difficulty-medium">中等</span></h4>
                        <p>线性方程组 $\begin{cases} x_1 + 2x_2 + 3x_3 = 1 \\ 2x_1 + 4x_2 + 6x_3 = 2 \\ 3x_1 + 6x_2 + 9x_3 = 4 \end{cases}$ 的解的情况是：</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q8" value="A"> 有唯一解</li>
                            <li><input type="radio" name="q8" value="B"> 有无穷多解</li>
                            <li><input type="radio" name="q8" value="C"> 无解</li>
                            <li><input type="radio" name="q8" value="D"> 不确定</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(8, 'C')">提交答案</button>
                        <div id="result8" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error8" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 9 <span class="difficulty-badge difficulty-hard">困难</span></h4>
                        <p>設 $A$ 為 $n$ 階矩陣，$\text{rank}(A) = r < n$，則齊次線性方程組 $Ax = 0$ 的基礎解系包含：</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q9" value="A"> $r$ 個線性無關的解向量</li>
                            <li><input type="radio" name="q9" value="B"> $n-r$ 個線性無關的解向量</li>
                            <li><input type="radio" name="q9" value="C"> $n$ 個線性無關的解向量</li>
                            <li><input type="radio" name="q9" value="D"> $n+r$ 個線性無關的解向量</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(9, 'B')">提交答案</button>
                        <div id="result9" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error9" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="exercise-item">
                        <h4>练习题 10 <span class="difficulty-badge difficulty-easy">簡單</span></h4>
                        <p>下列關於矩陣運算的敘述，哪個是正確的？</p>
                        <ul class="exercise-options">
                            <li><input type="radio" name="q10" value="A"> 矩陣乘法滿足交換律</li>
                            <li><input type="radio" name="q10" value="B"> $(A+B)^T = A^T + B^T$</li>
                            <li><input type="radio" name="q10" value="C"> $(AB)^{-1} = A^{-1}B^{-1}$</li>
                            <li><input type="radio" name="q10" value="D"> $|A+B| = |A| + |B|$</li>
                        </ul>
                        <button class="btn btn-primary" onclick="checkAnswer(10, 'B')">提交答案</button>
                        <div id="result10" class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <span></span>
                        </div>
                        <div id="error10" class="error-message">
                            <i class="fas fa-times-circle"></i>
                            <span></span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-chart-bar"></i>
                            <h2>学习统计</h2>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                            <div style="text-align: center; padding: 20px; background: var(--hover-bg); border-radius: 8px;">
                                <h3 style="color: var(--primary-color); margin-bottom: 10px;">完成题目</h3>
                                <p style="font-size: 2em; font-weight: bold;" id="completed-count">0</p>
                            </div>
                            <div style="text-align: center; padding: 20px; background: var(--hover-bg); border-radius: 8px;">
                                <h3 style="color: var(--success-color); margin-bottom: 10px;">正确率</h3>
                                <p style="font-size: 2em; font-weight: bold;" id="accuracy-rate">0%</p>
                            </div>
                            <div style="text-align: center; padding: 20px; background: var(--hover-bg); border-radius: 8px;">
                                <h3 style="color: var(--warning-color); margin-bottom: 10px;">学习时间</h3>
                                <p style="font-size: 2em; font-weight: bold;" id="study-time">0分钟</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 矩阵计算器 -->
            <section id="calculator" class="section">
                <div class="content-header">
                    <h1>矩阵计算器</h1>
                    <div class="breadcrumb">首页 > 矩阵计算器</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-calculator"></i>
                            <h2>在线矩阵运算工具</h2>
                        </div>
                        <p>输入矩阵进行各种运算，包括加法、乘法、求逆、行列式计算等。</p>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                            <div>
                                <h4>矩阵 A:</h4>
                                <div id="matrix-a-input">
                                    <div style="margin-bottom: 10px;">
                                        大小: 
                                        <select id="rows-a" onchange="updateMatrixSize('a')">
                                            <option value="2">2</option>
                                            <option value="3" selected>3</option>
                                            <option value="4">4</option>
                                        </select>
                                        ×
                                        <select id="cols-a" onchange="updateMatrixSize('a')">
                                            <option value="2">2</option>
                                            <option value="3" selected>3</option>
                                            <option value="4">4</option>
                                        </select>
                                    </div>
                                    <div id="matrix-a-grid" class="matrix-grid"></div>
                                </div>
                            </div>
                            
                            <div>
                                <h4>矩阵 B:</h4>
                                <div id="matrix-b-input">
                                    <div style="margin-bottom: 10px;">
                                        大小: 
                                        <select id="rows-b" onchange="updateMatrixSize('b')">
                                            <option value="2">2</option>
                                            <option value="3" selected>3</option>
                                            <option value="4">4</option>
                                        </select>
                                        ×
                                        <select id="cols-b" onchange="updateMatrixSize('b')">
                                            <option value="2">2</option>
                                            <option value="3" selected>3</option>
                                            <option value="4">4</option>
                                        </select>
                                    </div>
                                    <div id="matrix-b-grid" class="matrix-grid"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin: 20px 0; text-align: center;">
                            <button class="btn btn-primary" onclick="performOperation('add')">
                                <i class="fas fa-plus"></i> A + B
                            </button>
                            <button class="btn btn-primary" onclick="performOperation('subtract')">
                                <i class="fas fa-minus"></i> A - B
                            </button>
                            <button class="btn btn-primary" onclick="performOperation('multiply')">
                                <i class="fas fa-times"></i> A × B
                            </button>
                            <button class="btn btn-success" onclick="performOperation('inverse-a')">
                                <i class="fas fa-undo"></i> A⁻¹
                            </button>
                            <button class="btn btn-success" onclick="performOperation('det-a')">
                                <i class="fas fa-square-root-alt"></i> |A|
                            </button>
                            <button class="btn btn-warning" onclick="clearMatrices()">
                                <i class="fas fa-eraser"></i> 清除
                            </button>
                        </div>
                        
                        <div id="calculation-result" style="display: none;">
                            <h4>计算结果:</h4>
                            <div id="result-matrix" class="math-block"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 学习成就 -->
            <section id="achievements" class="section">
                <div class="content-header">
                    <h1>学习成就</h1>
                    <div class="breadcrumb">首页 > 学习成就</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-trophy"></i>
                            <h2>成就系统</h2>
                        </div>
                        <p>通过完成学习任务获得成就徽章，激励您的学习进度！</p>
                        
                        <div class="knowledge-grid">
                            <div class="achievement-card" id="achievement-first-login">
                                <div class="achievement-icon">🎯</div>
                                <h3>初次访问</h3>
                                <p>首次访问线性代数学习网站</p>
                                <div class="achievement-status unlocked">已解锁</div>
                            </div>
                            
                            <div class="achievement-card" id="achievement-complete-chapter">
                                <div class="achievement-icon">📚</div>
                                <h3>章节完成者</h3>
                                <p>完成任意一个章节的学习</p>
                                <div class="achievement-status locked">未解锁</div>
                            </div>
                            
                            <div class="achievement-card" id="achievement-practice-master">
                                <div class="achievement-icon">💪</div>
                                <h3>练习达人</h3>
                                <p>完成所有练习题</p>
                                <div class="achievement-status locked">未解锁</div>
                            </div>
                            
                            <div class="achievement-card" id="achievement-perfect-score">
                                <div class="achievement-icon">⭐</div>
                                <h3>满分学霸</h3>
                                <p>练习正确率达到100%</p>
                                <div class="achievement-status locked">未解锁</div>
                            </div>
                            
                            <div class="achievement-card" id="achievement-calculator-user">
                                <div class="achievement-icon">🧮</div>
                                <h3>计算器专家</h3>
                                <p>使用矩阵计算器进行10次计算</p>
                                <div class="achievement-status locked">未解锁</div>
                            </div>
                            
                            <div class="achievement-card" id="achievement-time-spent">
                                <div class="achievement-icon">⏰</div>
                                <h3>专注学习者</h3>
                                <p>累计学习时间超过30分钟</p>
                                <div class="achievement-status locked">未解锁</div>
                            </div>
                        </div>
                        
                        <div class="card" style="margin-top: 20px;">
                            <div class="card-header">
                                <i class="fas fa-chart-pie"></i>
                                <h2>学习统计</h2>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                <div class="stat-item">
                                    <div class="stat-number" id="total-achievements">1</div>
                                    <div class="stat-label">已解锁成就</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="chapters-completed">0</div>
                                    <div class="stat-label">已完成章节</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="problems-solved">0</div>
                                    <div class="stat-label">已解决问题</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="calculator-uses">0</div>
                                    <div class="stat-label">计算器使用次数</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 学习笔记 -->
            <section id="notes" class="section">
                <div class="content-header">
                    <h1>学习笔记</h1>
                    <div class="breadcrumb">首页 > 学习笔记</div>
                </div>
                <div class="content-body">
                    <div class="card fade-in">
                        <div class="card-header">
                            <i class="fas fa-sticky-note"></i>
                            <h2>我的笔记</h2>
                        </div>
                        <p>记录您的学习心得和重要知识点，便于复习和巩固。</p>
                        
                        <div style="margin: 20px 0;">
                            <button class="btn btn-primary" onclick="addNewNote()">
                                <i class="fas fa-plus"></i> 添加新笔记
                            </button>
                            <button class="btn btn-success" onclick="exportNotes()">
                                <i class="fas fa-download"></i> 导出笔记
                            </button>
                        </div>
                        
                        <div id="notes-container">
                            <div class="note-item" data-note-id="1">
                                <div class="note-header">
                                    <h4>线性方程组学习要点</h4>
                                    <div class="note-actions">
                                        <button class="btn-small" onclick="editNote(1)"><i class="fas fa-edit"></i></button>
                                        <button class="btn-small" onclick="deleteNote(1)"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="note-content">
                                    <p>1. 高斯消元法的三种初等行变换</p>
                                    <p>2. 解的判定依据：rank(A) 与 rank(A|b) 的关系</p>
                                    <p>3. 齐次方程组一定有零解</p>
                                </div>
                                <div class="note-meta">
                                    <span>创建时间: 2024-01-15</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // 全局变量
        let currentTheme = 'light';
        let completedQuestions = 0;
        let correctAnswers = 0;
        let startTime = new Date();
        let sidebarCollapsed = false;
        let calculatorUses = 0;
        let achievements = {
            'first-login': true,
            'complete-chapter': false,
            'practice-master': false,
            'perfect-score': false,
            'calculator-user': false,
            'time-spent': false
        };
        let notes = [];

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 检查本地存储的主题设置
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                currentTheme = savedTheme;
                document.documentElement.setAttribute('data-theme', currentTheme);
                updateThemeButton();
            }
            
            // 更新学习时间
            setInterval(updateStudyTime, 60000); // 每分钟更新一次
            
            // 渲染数学公式
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
            
            // 初始化矩阵计算器
            initializeMatrices();
            
            // 初始化可視化組件
            initializeVisualizations();
            
            // 加载成就和笔记
            loadUserData();
        });

        // 主题切换
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
            updateThemeButton();
        }

        function updateThemeButton() {
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            
            if (currentTheme === 'dark') {
                themeIcon.className = 'fas fa-sun';
                themeText.textContent = '浅色模式';
            } else {
                themeIcon.className = 'fas fa-moon';
                themeText.textContent = '护眼模式';
            }
        }

        // 侧边栏控制
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebarCollapsed = !sidebarCollapsed;
            
            if (sidebarCollapsed) {
                sidebar.classList.add('collapsed');
                mainContent.classList.add('expanded');
            } else {
                sidebar.classList.remove('collapsed');
                mainContent.classList.remove('expanded');
            }
        }

        function toggleMobileSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('mobile-open');
        }

        // 页面切换
        function showSection(sectionId) {
            // 隐藏所有section
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // 显示目标section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                targetSection.classList.add('fade-in');
            }
            
            // 更新导航状态
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            // 找到对应的导航链接并激活
            const activeLink = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            // 重新渲染数学公式
            if (window.MathJax) {
                MathJax.typesetPromise([targetSection]);
            }
            
            // 关闭移动端侧边栏
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.remove('mobile-open');
        }

        // 练习题答案检查
        function checkAnswer(questionNum, correctAnswer) {
            const selectedAnswer = document.querySelector(`input[name="q${questionNum}"]:checked`);
            const resultDiv = document.getElementById(`result${questionNum}`);
            const errorDiv = document.getElementById(`error${questionNum}`);
            
            // 隐藏之前的结果
            resultDiv.classList.remove('show');
            errorDiv.classList.remove('show');
            
            if (!selectedAnswer) {
                errorDiv.querySelector('span').textContent = '请先选择一个答案';
                errorDiv.classList.add('show');
                return;
            }
            
            completedQuestions++;
            
            if (selectedAnswer.value === correctAnswer) {
                correctAnswers++;
                resultDiv.querySelector('span').textContent = '回答正确！';
                resultDiv.classList.add('show');
            } else {
                errorDiv.querySelector('span').textContent = `回答错误。正确答案是选项 ${correctAnswer}`;
                errorDiv.classList.add('show');
            }
            
            // 更新统计信息
            updateStats();
            updateProgress();
        }

        // 更新统计信息
        function updateStats() {
            document.getElementById('completed-count').textContent = completedQuestions;
            
            const accuracy = completedQuestions > 0 ? Math.round((correctAnswers / completedQuestions) * 100) : 0;
            document.getElementById('accuracy-rate').textContent = accuracy + '%';
        }

        // 更新学习进度
        function updateProgress() {
            const totalQuestions = 10;
            const progress = Math.round((completedQuestions / totalQuestions) * 100);
            
            document.getElementById('practice-progress').style.width = progress + '%';
            document.getElementById('practice-progress-text').textContent = `${completedQuestions}/${totalQuestions}`;
            
            // 更新总体进度
            const overallProgress = Math.min(progress, 100);
            document.getElementById('overall-progress').style.width = overallProgress + '%';
            document.getElementById('progress-text').textContent = overallProgress + '%';
        }

        // 更新学习时间
        function updateStudyTime() {
            const currentTime = new Date();
            const studyMinutes = Math.floor((currentTime - startTime) / (1000 * 60));
            document.getElementById('study-time').textContent = studyMinutes + '分钟';
        }

        // 响应式处理
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                const sidebar = document.getElementById('sidebar');
                sidebar.classList.remove('mobile-open');
            }
        });

        // 阻止默认的右键菜单（可选）
        document.addEventListener('contextmenu', function(e) {
            // e.preventDefault(); // 取消注释以禁用右键菜单
        });

        // ============ 矩阵计算器功能 ============
        function initializeMatrices() {
            updateMatrixSize('a');
            updateMatrixSize('b');
        }

        function updateMatrixSize(matrixName) {
            const rows = document.getElementById(`rows-${matrixName}`).value;
            const cols = document.getElementById(`cols-${matrixName}`).value;
            const grid = document.getElementById(`matrix-${matrixName}-grid`);
            
            grid.innerHTML = '';
            grid.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.className = 'matrix-input';
                    input.id = `${matrixName}-${i}-${j}`;
                    input.placeholder = '0';
                    input.value = i === j ? '1' : '0'; // 默认设置为单位矩阵
                    grid.appendChild(input);
                }
            }
        }

        function getMatrixValues(matrixName) {
            const rows = document.getElementById(`rows-${matrixName}`).value;
            const cols = document.getElementById(`cols-${matrixName}`).value;
            const matrix = [];
            
            for (let i = 0; i < rows; i++) {
                matrix[i] = [];
                for (let j = 0; j < cols; j++) {
                    const input = document.getElementById(`${matrixName}-${i}-${j}`);
                    matrix[i][j] = parseFloat(input.value) || 0;
                }
            }
            return matrix;
        }

        function performOperation(operation) {
            try {
                const matrixA = getMatrixValues('a');
                const matrixB = getMatrixValues('b');
                let result;
                let resultText = '';

                switch (operation) {
                    case 'add':
                        if (matrixA.length !== matrixB.length || matrixA[0].length !== matrixB[0].length) {
                            throw new Error('矩阵维度不匹配，无法进行加法运算');
                        }
                        result = matrixAdd(matrixA, matrixB);
                        resultText = '矩阵加法结果 (A + B):';
                        break;
                    case 'subtract':
                        if (matrixA.length !== matrixB.length || matrixA[0].length !== matrixB[0].length) {
                            throw new Error('矩阵维度不匹配，无法进行减法运算');
                        }
                        result = matrixSubtract(matrixA, matrixB);
                        resultText = '矩阵减法结果 (A - B):';
                        break;
                    case 'multiply':
                        if (matrixA[0].length !== matrixB.length) {
                            throw new Error('矩阵维度不匹配，无法进行乘法运算');
                        }
                        result = matrixMultiply(matrixA, matrixB);
                        resultText = '矩阵乘法结果 (A × B):';
                        break;
                    case 'inverse-a':
                        if (matrixA.length !== matrixA[0].length) {
                            throw new Error('只有方阵才能求逆');
                        }
                        result = matrixInverse(matrixA);
                        resultText = '矩阵A的逆矩阵 (A⁻¹):';
                        break;
                    case 'det-a':
                        if (matrixA.length !== matrixA[0].length) {
                            throw new Error('只有方阵才能求行列式');
                        }
                        const det = matrixDeterminant(matrixA);
                        displayScalarResult(det, '矩阵A的行列式 |A|:');
                        updateCalculatorStats();
                        return;
                }

                displayMatrixResult(result, resultText);
                updateCalculatorStats();
            } catch (error) {
                alert('计算错误: ' + error.message);
            }
        }

        function matrixAdd(a, b) {
            const result = [];
            for (let i = 0; i < a.length; i++) {
                result[i] = [];
                for (let j = 0; j < a[0].length; j++) {
                    result[i][j] = a[i][j] + b[i][j];
                }
            }
            return result;
        }

        function matrixSubtract(a, b) {
            const result = [];
            for (let i = 0; i < a.length; i++) {
                result[i] = [];
                for (let j = 0; j < a[0].length; j++) {
                    result[i][j] = a[i][j] - b[i][j];
                }
            }
            return result;
        }

        function matrixMultiply(a, b) {
            const result = [];
            for (let i = 0; i < a.length; i++) {
                result[i] = [];
                for (let j = 0; j < b[0].length; j++) {
                    result[i][j] = 0;
                    for (let k = 0; k < a[0].length; k++) {
                        result[i][j] += a[i][k] * b[k][j];
                    }
                }
            }
            return result;
        }

        function matrixDeterminant(matrix) {
            const n = matrix.length;
            if (n === 1) return matrix[0][0];
            if (n === 2) return matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];
            
            let det = 0;
            for (let j = 0; j < n; j++) {
                const minor = getMinor(matrix, 0, j);
                det += Math.pow(-1, j) * matrix[0][j] * matrixDeterminant(minor);
            }
            return det;
        }

        function getMinor(matrix, row, col) {
            return matrix.filter((_, i) => i !== row)
                         .map(row => row.filter((_, j) => j !== col));
        }

        function matrixInverse(matrix) {
            const det = matrixDeterminant(matrix);
            if (Math.abs(det) < 1e-10) {
                throw new Error('矩阵不可逆（行列式为0）');
            }
            
            const n = matrix.length;
            const adjugate = [];
            
            for (let i = 0; i < n; i++) {
                adjugate[i] = [];
                for (let j = 0; j < n; j++) {
                    const minor = getMinor(matrix, i, j);
                    adjugate[i][j] = Math.pow(-1, i + j) * matrixDeterminant(minor);
                }
            }
            
            // 转置并除以行列式
            const result = [];
            for (let i = 0; i < n; i++) {
                result[i] = [];
                for (let j = 0; j < n; j++) {
                    result[i][j] = adjugate[j][i] / det;
                }
            }
            
            return result;
        }

        function displayMatrixResult(matrix, title) {
            const resultDiv = document.getElementById('calculation-result');
            const resultMatrix = document.getElementById('result-matrix');
            
            let matrixHTML = `<h4>${title}</h4><div class="math-block">$$\\begin{pmatrix}`;
            
            for (let i = 0; i < matrix.length; i++) {
                for (let j = 0; j < matrix[0].length; j++) {
                    matrixHTML += matrix[i][j].toFixed(3);
                    if (j < matrix[0].length - 1) matrixHTML += ' & ';
                }
                if (i < matrix.length - 1) matrixHTML += ' \\\\\\\\ ';
            }
            
            matrixHTML += '\\end{pmatrix}$$</div>';
            resultMatrix.innerHTML = matrixHTML;
            resultDiv.style.display = 'block';
            
            // 重新渲染数学公式
            if (window.MathJax) {
                MathJax.typesetPromise([resultMatrix]);
            }
        }

        function displayScalarResult(value, title) {
            const resultDiv = document.getElementById('calculation-result');
            const resultMatrix = document.getElementById('result-matrix');
            
            const resultHTML = `<h4>${title}</h4><div class="math-block">$$${value.toFixed(6)}$$</div>`;
            resultMatrix.innerHTML = resultHTML;
            resultDiv.style.display = 'block';
            
            // 重新渲染数学公式
            if (window.MathJax) {
                MathJax.typesetPromise([resultMatrix]);
            }
        }

        function clearMatrices() {
            const matrixAInputs = document.querySelectorAll('[id^="a-"]');
            const matrixBInputs = document.querySelectorAll('[id^="b-"]');
            
            matrixAInputs.forEach(input => input.value = '0');
            matrixBInputs.forEach(input => input.value = '0');
            
            document.getElementById('calculation-result').style.display = 'none';
        }

        function updateCalculatorStats() {
            calculatorUses++;
            document.getElementById('calculator-uses').textContent = calculatorUses;
            
            // 检查计算器专家成就
            if (calculatorUses >= 10 && !achievements['calculator-user']) {
                unlockAchievement('calculator-user');
            }
            
            saveUserData();
        }

        // ============ 成就系统 ============
        function unlockAchievement(achievementId) {
            if (!achievements[achievementId]) {
                achievements[achievementId] = true;
                const card = document.getElementById(`achievement-${achievementId}`);
                if (card) {
                    card.classList.add('unlocked');
                    const status = card.querySelector('.achievement-status');
                    status.textContent = '已解锁';
                    status.className = 'achievement-status unlocked';
                }
                updateAchievementStats();
                
                // 显示解锁提示
                showAchievementNotification(achievementId);
            }
        }

        function showAchievementNotification(achievementId) {
            // 创建成就解锁通知（简单版本）
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--success-color);
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 9999;
                animation: slideIn 0.5s ease;
            `;
            notification.innerHTML = `<i class="fas fa-trophy"></i> 成就解锁！`;
            
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function updateAchievementStats() {
            const unlockedCount = Object.values(achievements).filter(a => a).length;
            document.getElementById('total-achievements').textContent = unlockedCount;
        }

        // ============ 笔记系统 ============
        function addNewNote() {
            const title = prompt('请输入笔记标题:');
            if (!title) return;
            
            const content = prompt('请输入笔记内容:');
            if (!content) return;
            
            const note = {
                id: Date.now(),
                title: title,
                content: content,
                created: new Date().toLocaleDateString()
            };
            
            notes.push(note);
            renderNotes();
            saveUserData();
        }

        function editNote(noteId) {
            const note = notes.find(n => n.id == noteId);
            if (!note) return;
            
            const newTitle = prompt('编辑标题:', note.title);
            if (newTitle === null) return;
            
            const newContent = prompt('编辑内容:', note.content);
            if (newContent === null) return;
            
            note.title = newTitle;
            note.content = newContent;
            
            renderNotes();
            saveUserData();
        }

        function deleteNote(noteId) {
            if (!confirm('确定要删除这条笔记吗？')) return;
            
            notes = notes.filter(n => n.id != noteId);
            renderNotes();
            saveUserData();
        }

        function renderNotes() {
            const container = document.getElementById('notes-container');
            container.innerHTML = '';
            
            notes.forEach(note => {
                const noteHTML = `
                    <div class="note-item" data-note-id="${note.id}">
                        <div class="note-header">
                            <h4>${note.title}</h4>
                            <div class="note-actions">
                                <button class="btn-small" onclick="editNote(${note.id})"><i class="fas fa-edit"></i></button>
                                <button class="btn-small" onclick="deleteNote(${note.id})"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="note-content">
                            <p>${note.content.replace(/\\n/g, '</p><p>')}</p>
                        </div>
                        <div class="note-meta">
                            <span>创建时间: ${note.created}</span>
                        </div>
                    </div>
                `;
                container.innerHTML += noteHTML;
            });
        }

        function exportNotes() {
            if (notes.length === 0) {
                alert('没有笔记可以导出');
                return;
            }
            
            let exportText = '# 线性代数学习笔记\\n\\n';
            notes.forEach(note => {
                exportText += `## ${note.title}\\n`;
                exportText += `${note.content}\\n`;
                exportText += `*创建时间: ${note.created}*\\n\\n`;
            });
            
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '线性代数学习笔记.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // ============ 数据持久化 ============
        function saveUserData() {
            const userData = {
                achievements: achievements,
                notes: notes,
                calculatorUses: calculatorUses,
                completedQuestions: completedQuestions,
                correctAnswers: correctAnswers
            };
            localStorage.setItem('linearAlgebraUserData', JSON.stringify(userData));
        }

        function loadUserData() {
            const savedData = localStorage.getItem('linearAlgebraUserData');
            if (savedData) {
                const userData = JSON.parse(savedData);
                achievements = { ...achievements, ...userData.achievements };
                notes = userData.notes || [];
                calculatorUses = userData.calculatorUses || 0;
                completedQuestions = userData.completedQuestions || 0;
                correctAnswers = userData.correctAnswers || 0;
                
                updateAchievementStats();
                renderNotes();
                updateStats();
                
                // 更新成就显示
                Object.keys(achievements).forEach(key => {
                    if (achievements[key]) {
                        const card = document.getElementById(`achievement-${key}`);
                        if (card) {
                            card.classList.add('unlocked');
                            const status = card.querySelector('.achievement-status');
                            status.textContent = '已解锁';
                            status.className = 'achievement-status unlocked';
                        }
                    }
                });
            }
        }

        // ============ 增强的练习题检查 ============
        function checkAnswer(questionNum, correctAnswer) {
            const selectedAnswer = document.querySelector(`input[name="q${questionNum}"]:checked`);
            const resultDiv = document.getElementById(`result${questionNum}`);
            const errorDiv = document.getElementById(`error${questionNum}`);
            
            // 隐藏之前的结果
            resultDiv.classList.remove('show');
            errorDiv.classList.remove('show');
            
            if (!selectedAnswer) {
                errorDiv.querySelector('span').textContent = '请先选择一个答案';
                errorDiv.classList.add('show');
                return;
            }
            
            completedQuestions++;
            
            if (selectedAnswer.value === correctAnswer) {
                correctAnswers++;
                resultDiv.querySelector('span').textContent = '回答正确！';
                resultDiv.classList.add('show');
            } else {
                errorDiv.querySelector('span').textContent = `回答错误。正确答案是选项 ${correctAnswer}`;
                errorDiv.classList.add('show');
            }
            
            // 更新统计信息
            updateStats();
            updateProgress();
            
            // 检查成就
            if (completedQuestions >= 10 && !achievements['practice-master']) {
                unlockAchievement('practice-master');
            }
            
            if (completedQuestions > 0 && (correctAnswers / completedQuestions) === 1 && !achievements['perfect-score']) {
                unlockAchievement('perfect-score');
            }
            
            saveUserData();
        }

        // 矩陣變換可視化系統
        class TransformationVisualizer {
            constructor(canvasId) {
                this.canvas = document.getElementById(canvasId);
                if (!this.canvas) return;
                this.ctx = this.canvas.getContext('2d');
                this.currentMatrix = [[1, 0], [0, 1]]; // 單位矩陣
                this.originalShape = [
                    [-50, -50], [50, -50], [50, 50], [-50, 50], [-50, -50]
                ];
                this.setupEventListeners();
                this.draw();
            }

            setupEventListeners() {
                // 變換類型按鈕
                document.querySelectorAll('.transform-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.transform-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.updateTransform();
                    });
                });

                // 參數控制滑桿
                const controls = ['scaleX', 'scaleY', 'rotation', 'shearX'];
                controls.forEach(controlId => {
                    const slider = document.getElementById(controlId);
                    if (slider) {
                        slider.addEventListener('input', () => {
                            document.getElementById(controlId + 'Value').textContent = 
                                controlId === 'rotation' ? slider.value + '°' : 
                                parseFloat(slider.value).toFixed(1);
                            this.updateTransform();
                        });
                    }
                });
            }

            updateTransform() {
                const activeBtn = document.querySelector('.transform-btn.active');
                if (!activeBtn) return;
                
                const activeTransform = activeBtn.dataset.transform;
                const scaleX = parseFloat(document.getElementById('scaleX').value);
                const scaleY = parseFloat(document.getElementById('scaleY').value);
                const rotation = parseFloat(document.getElementById('rotation').value) * Math.PI / 180;
                const shearX = parseFloat(document.getElementById('shearX').value);

                switch (activeTransform) {
                    case 'identity':
                        this.currentMatrix = [[1, 0], [0, 1]];
                        break;
                    case 'scale':
                        this.currentMatrix = [[scaleX, 0], [0, scaleY]];
                        break;
                    case 'rotate':
                        this.currentMatrix = [
                            [Math.cos(rotation), -Math.sin(rotation)],
                            [Math.sin(rotation), Math.cos(rotation)]
                        ];
                        break;
                    case 'shear':
                        this.currentMatrix = [[1, shearX], [0, 1]];
                        break;
                    case 'reflect':
                        this.currentMatrix = [[-1, 0], [0, 1]];
                        break;
                }
                
                this.updateMatrixDisplay();
                this.draw();
            }

            updateMatrixDisplay() {
                const elements = ['m11', 'm12', 'm21', 'm22'];
                elements.forEach((id, index) => {
                    const element = document.getElementById(id);
                    if (element) {
                        const row = Math.floor(index / 2);
                        const col = index % 2;
                        element.textContent = this.currentMatrix[row][col].toFixed(2);
                    }
                });
            }

            transformPoint(point) {
                return [
                    this.currentMatrix[0][0] * point[0] + this.currentMatrix[0][1] * point[1],
                    this.currentMatrix[1][0] * point[0] + this.currentMatrix[1][1] * point[1]
                ];
            }

            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.save();
                this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);

                // 繪製座標軸
                this.drawAxes();

                // 繪製原始圖形
                this.drawShape(this.originalShape, '#ff6b6b', false);

                // 繪製變換後圖形
                const transformedShape = this.originalShape.map(point => this.transformPoint(point));
                this.drawShape(transformedShape, '#45b7d1', true);

                this.ctx.restore();
            }

            drawAxes() {
                this.ctx.strokeStyle = '#ddd';
                this.ctx.lineWidth = 1;
                this.ctx.setLineDash([5, 5]);

                // X軸
                this.ctx.beginPath();
                this.ctx.moveTo(-200, 0);
                this.ctx.lineTo(200, 0);
                this.ctx.stroke();

                // Y軸
                this.ctx.beginPath();
                this.ctx.moveTo(0, -200);
                this.ctx.lineTo(0, 200);
                this.ctx.stroke();

                this.ctx.setLineDash([]);
            }

            drawShape(points, color, filled) {
                this.ctx.strokeStyle = color;
                this.ctx.fillStyle = color + '40';
                this.ctx.lineWidth = 2;

                this.ctx.beginPath();
                this.ctx.moveTo(points[0][0], points[0][1]);
                for (let i = 1; i < points.length; i++) {
                    this.ctx.lineTo(points[i][0], points[i][1]);
                }
                this.ctx.stroke();
                
                if (filled) {
                    this.ctx.fill();
                }
            }
        }

        // 向量操作可視化系統
        class VectorVisualizer {
            constructor(canvasId) {
                this.canvas = document.getElementById(canvasId);
                if (!this.canvas) return;
                this.ctx = this.canvas.getContext('2d');
                this.vectorA = { x: 3, y: 2 };
                this.vectorB = { x: 1, y: 4 };
                this.currentOperation = 'add';
                this.setupEventListeners();
                this.updateInfo();
                this.updateResult();
                this.draw();
            }

            setupEventListeners() {
                // 向量輸入
                const inputs = ['vectorAx', 'vectorAy', 'vectorBx', 'vectorBy'];
                inputs.forEach(inputId => {
                    const input = document.getElementById(inputId);
                    if (input) {
                        input.addEventListener('input', () => {
                            this.updateVectors();
                        });
                    }
                });

                // 操作按鈕
                document.querySelectorAll('.operation-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.operation-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentOperation = e.target.dataset.operation;
                        this.draw();
                        this.updateResult();
                    });
                });
            }

            updateVectors() {
                this.vectorA.x = parseFloat(document.getElementById('vectorAx').value) || 0;
                this.vectorA.y = parseFloat(document.getElementById('vectorAy').value) || 0;
                this.vectorB.x = parseFloat(document.getElementById('vectorBx').value) || 0;
                this.vectorB.y = parseFloat(document.getElementById('vectorBy').value) || 0;
                
                this.updateInfo();
                this.draw();
                this.updateResult();
            }

            updateInfo() {
                const aInfo = document.getElementById('vectorAInfo');
                const bInfo = document.getElementById('vectorBInfo');
                if (aInfo) aInfo.textContent = `(${this.vectorA.x}, ${this.vectorA.y})`;
                if (bInfo) bInfo.textContent = `(${this.vectorB.x}, ${this.vectorB.y})`;
            }

            updateResult() {
                let result, resultVector;
                
                switch (this.currentOperation) {
                    case 'add':
                        resultVector = { x: this.vectorA.x + this.vectorB.x, y: this.vectorA.y + this.vectorB.y };
                        result = `向量加法：(${resultVector.x}, ${resultVector.y})`;
                        break;
                    case 'subtract':
                        resultVector = { x: this.vectorA.x - this.vectorB.x, y: this.vectorA.y - this.vectorB.y };
                        result = `向量減法：(${resultVector.x}, ${resultVector.y})`;
                        break;
                    case 'scalar':
                        resultVector = { x: 2 * this.vectorA.x, y: 2 * this.vectorA.y };
                        result = `標量乘法：(${resultVector.x}, ${resultVector.y})`;
                        break;
                    case 'dot':
                        const dotProduct = this.vectorA.x * this.vectorB.x + this.vectorA.y * this.vectorB.y;
                        result = `點積：${dotProduct}`;
                        resultVector = null;
                        break;
                }
                
                const resultEl = document.getElementById('vectorResult');
                const resultInfoEl = document.getElementById('resultVectorInfo');
                if (resultEl) resultEl.textContent = result;
                if (resultInfoEl) {
                    resultInfoEl.textContent = resultVector ? 
                        `(${resultVector.x}, ${resultVector.y})` : 
                        (this.currentOperation === 'dot' ? `${this.vectorA.x * this.vectorB.x + this.vectorA.y * this.vectorB.y}` : '');
                }
            }

            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.save();
                this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);
                this.ctx.scale(1, -1); // 翻轉Y軸使數學座標系向上為正

                // 繪製座標軸
                this.drawAxes();
                
                // 繪製網格
                this.drawGrid();

                // 繪製向量
                this.drawVector(0, 0, this.vectorA.x * 30, this.vectorA.y * 30, '#ff6b6b');
                this.drawVector(0, 0, this.vectorB.x * 30, this.vectorB.y * 30, '#4ecdc4');

                // 繪製結果向量
                this.drawResultVector();

                this.ctx.restore();
            }

            drawAxes() {
                this.ctx.strokeStyle = '#333';
                this.ctx.lineWidth = 2;

                // X軸
                this.ctx.beginPath();
                this.ctx.moveTo(-180, 0);
                this.ctx.lineTo(180, 0);
                this.ctx.stroke();

                // Y軸
                this.ctx.beginPath();
                this.ctx.moveTo(0, -180);
                this.ctx.lineTo(0, 180);
                this.ctx.stroke();

                // 軸標籤
                this.ctx.save();
                this.ctx.scale(1, -1);
                this.ctx.fillStyle = '#333';
                this.ctx.font = '12px Arial';
                this.ctx.fillText('X', 160, 15);
                this.ctx.fillText('Y', 10, -160);
                this.ctx.restore();
            }

            drawGrid() {
                this.ctx.strokeStyle = '#eee';
                this.ctx.lineWidth = 1;
                this.ctx.setLineDash([2, 2]);

                for (let i = -6; i <= 6; i++) {
                    if (i !== 0) {
                        // 垂直線
                        this.ctx.beginPath();
                        this.ctx.moveTo(i * 30, -180);
                        this.ctx.lineTo(i * 30, 180);
                        this.ctx.stroke();

                        // 水平線
                        this.ctx.beginPath();
                        this.ctx.moveTo(-180, i * 30);
                        this.ctx.lineTo(180, i * 30);
                        this.ctx.stroke();
                    }
                }
                this.ctx.setLineDash([]);
            }

            drawVector(startX, startY, endX, endY, color) {
                this.ctx.strokeStyle = color;
                this.ctx.fillStyle = color;
                this.ctx.lineWidth = 3;

                // 向量線
                this.ctx.beginPath();
                this.ctx.moveTo(startX, startY);
                this.ctx.lineTo(endX, endY);
                this.ctx.stroke();

                // 箭頭
                const angle = Math.atan2(endY - startY, endX - startX);
                const arrowLength = 15;
                
                this.ctx.beginPath();
                this.ctx.moveTo(endX, endY);
                this.ctx.lineTo(
                    endX - arrowLength * Math.cos(angle - Math.PI / 6),
                    endY - arrowLength * Math.sin(angle - Math.PI / 6)
                );
                this.ctx.moveTo(endX, endY);
                this.ctx.lineTo(
                    endX - arrowLength * Math.cos(angle + Math.PI / 6),
                    endY - arrowLength * Math.sin(angle + Math.PI / 6)
                );
                this.ctx.stroke();
            }

            drawResultVector() {
                let resultVector;
                
                switch (this.currentOperation) {
                    case 'add':
                        resultVector = { x: this.vectorA.x + this.vectorB.x, y: this.vectorA.y + this.vectorB.y };
                        this.drawVector(0, 0, resultVector.x * 30, resultVector.y * 30, '#45b7d1');
                        // 繪製平行四邊形
                        this.drawParallelogram();
                        break;
                    case 'subtract':
                        resultVector = { x: this.vectorA.x - this.vectorB.x, y: this.vectorA.y - this.vectorB.y };
                        this.drawVector(0, 0, resultVector.x * 30, resultVector.y * 30, '#45b7d1');
                        break;
                    case 'scalar':
                        resultVector = { x: 2 * this.vectorA.x, y: 2 * this.vectorA.y };
                        this.drawVector(0, 0, resultVector.x * 30, resultVector.y * 30, '#45b7d1');
                        break;
                }
            }

            drawParallelogram() {
                this.ctx.strokeStyle = '#ddd';
                this.ctx.lineWidth = 1;
                this.ctx.setLineDash([5, 5]);

                const aX = this.vectorA.x * 30;
                const aY = this.vectorA.y * 30;
                const bX = this.vectorB.x * 30;
                const bY = this.vectorB.y * 30;

                this.ctx.beginPath();
                this.ctx.moveTo(aX, aY);
                this.ctx.lineTo(aX + bX, aY + bY);
                this.ctx.stroke();

                this.ctx.beginPath();
                this.ctx.moveTo(bX, bY);
                this.ctx.lineTo(aX + bX, aY + bY);
                this.ctx.stroke();

                this.ctx.setLineDash([]);
            }
        }

        // 初始化可視化組件
        function initializeVisualizations() {
            // 檢查是否在知識概念頁面
            if (document.getElementById('transformCanvas')) {
                new TransformationVisualizer('transformCanvas');
            }
            if (document.getElementById('vectorCanvas')) {
                new VectorVisualizer('vectorCanvas');
            }
        }
    </script>
</body>
</html>


